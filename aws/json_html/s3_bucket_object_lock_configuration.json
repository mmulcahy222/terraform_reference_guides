{"resource-aws-s3-bucket-object-lock-configuration": "<h1 id=\"resource-aws_s3_bucket_object_lock_configuration\">Resource: aws_s3_bucket_object_lock_configuration</h1><p>Provides an S3 bucket Object Lock configuration resource. For more information about Object Locking, go to <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html\">Using S3 Object Lock</a> in the Amazon S3 User Guide.</p><p>~&gt; <strong>NOTE:</strong> This resource <strong>does not enable</strong> Object Lock for <strong>new</strong> buckets. It configures a default retention period for objects placed in the specified bucket.<br />Thus, to <strong>enable</strong> Object Lock for a <strong>new</strong> bucket, see the <a href=\"s3_bucket.html.markdown#using-object-lock-configuration\">Using object lock configuration</a> section in  the <code>aws_s3_bucket</code> resource or the <a href=\"#object-lock-configuration-for-a-new-bucket\">Object Lock configuration for a new bucket</a> example below.<br />If you want to <strong>enable</strong> Object Lock for an <strong>existing</strong> bucket, contact AWS Support and see the <a href=\"#object-lock-configuration-for-an-existing-bucket\">Object Lock configuration for an existing bucket</a> example below.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><h3 id=\"object-lock-configuration-for-a-new-bucket\">Object Lock configuration for a new bucket</h3><p>terraform<br />resource \"aws_s3_bucket\" \"example\" {<br />  bucket = \"mybucket\"</p><p>object_lock_enabled = true<br />}</p><p>resource \"aws_s3_bucket_object_lock_configuration\" \"example\" {<br />  bucket = aws_s3_bucket.example.id</p><p>rule {<br />    default_retention {<br />      mode = \"COMPLIANCE\"<br />      days = 5<br />    }<br />  }<br />}<br /></p><h3 id=\"object-lock-configuration-for-an-existing-bucket\">Object Lock configuration for an existing bucket</h3><p>This is a multistep process that requires AWS Support intervention.</p><ol><li>Enable versioning on your S3 bucket, if you have not already done so.<br />Doing so will generate an \"Object Lock token\" in the back-end.</li></ol><!-- markdownlint-disable MD029 --><p>terraform<br />resource \"aws_s3_bucket\" \"example\" {<br />  bucket = \"mybucket\"<br />}</p><p>resource \"aws_s3_bucket_versioning\" \"example\" {<br />  bucket = aws_s3_bucket.example.id</p><p>versioning_configuration {<br />    status = \"Enabled\"<br />  }<br />}<br /></p><!-- markdownlint-disable MD029 --><ol><li>Contact AWS Support to provide you with the \"Object Lock token\" for the specified bucket and use the token (or token ID) within your new <code>aws_s3_bucket_object_lock_configuration</code> resource.<br />   Notice the <code>object_lock_enabled</code> argument does not need to be specified as it defaults to <code>Enabled</code>.</li></ol><!-- markdownlint-disable MD029 --><p>terraform<br />resource \"aws_s3_bucket_object_lock_configuration\" \"example\" {<br />  bucket = aws_s3_bucket.example.id</p><p>rule {<br />    default_retention {<br />      mode = \"COMPLIANCE\"<br />      days = 5<br />    }<br />  }</p><p>token = \"NG2MKsfoLqV3A+aquXneSG4LOu/ekrlXkRXwIPFVfERT7XOPos+/k444d7RIH0E3W3p5QU6ml2exS2F/eYCFmMWHJ3hFZGk6al1sIJkmNhUMYmsv0jYVQyTTZNLM+DnfooA6SATt39mM1VW1yJh4E+XljMlWzaBwHKbss3/EjlGDjOmVhaSs4Z6427mMCaFD0RLwsYY7zX49gEc31YfOMJGxbXCXSeyNwAhhM/A8UH7gQf38RmjHjjAFbbbLtl8arsxTPW8F1IYohqwmKIr9DnotLLj8Tg44U2SPwujVaqmlKKP9s41rfgb4UbIm7khSafDBng0LGfxC4pMlT9Ny2w==\"<br />}<br /></p><!-- markdownlint-disable MD029 -->", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>This resource supports the following arguments:</p><ul><li><code>bucket</code> - (Required, Forces new resource) Name of the bucket.</li><li><code>expected_bucket_owner</code> - (Optional, Forces new resource) Account ID of the expected bucket owner.</li><li><code>object_lock_enabled</code> - (Optional, Forces new resource) Indicates whether this bucket has an Object Lock configuration enabled. Defaults to <code>Enabled</code>. Valid values: <code>Enabled</code>.</li><li><code>rule</code> - (Optional) Configuration block for specifying the Object Lock rule for the specified object. <a href=\"#rule\">See below</a>.</li><li><code>token</code> - (Optional) Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's \"Object Lock token\".<br />The token is generated in the back-end when <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html\">versioning</a> is enabled on a bucket. For more details on versioning, see the <a href=\"s3_bucket_versioning.html.markdown\"><code>aws_s3_bucket_versioning</code> resource</a>.</li></ul><h3 id=\"rule\">rule</h3><p>The <code>rule</code> configuration block supports the following arguments:</p><ul><li><code>default_retention</code> - (Required) Configuration block for specifying the default Object Lock retention settings for new objects placed in the specified bucket. <a href=\"#default_retention\">See below</a>.</li></ul><h3 id=\"default_retention\">default_retention</h3><p>The <code>default_retention</code> configuration block supports the following arguments:</p><ul><li><code>days</code> - (Optional, Required if <code>years</code> is not specified) Number of days that you want to specify for the default retention period.</li><li><code>mode</code> - (Required) Default Object Lock retention mode you want to apply to new objects placed in the specified bucket. Valid values: <code>COMPLIANCE</code>, <code>GOVERNANCE</code>.</li><li><code>years</code> - (Optional, Required if <code>days</code> is not specified) Number of years that you want to specify for the default retention period.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute Reference</h2><p>This resource exports the following attributes in addition to the arguments above:</p><ul><li><code>id</code> - The <code>bucket</code> or <code>bucket</code> and <code>expected_bucket_owner</code> separated by a comma (<code>,</code>) if the latter is provided.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>In Terraform v1.5.0 and later, use an <a href=\"https://developer.hashicorp.com/terraform/language/import\"><code>import</code> block</a> to import S3 bucket Object Lock configuration using the <code>bucket</code> or using the <code>bucket</code> and <code>expected_bucket_owner</code> separated by a comma (<code>,</code>). For example:</p><p>If the owner (account ID) of the source bucket is the same account used to configure the Terraform AWS Provider, import using the <code>bucket</code>:</p><p><code>terraformimport {  to = aws_s3_bucket_object_lock_configuration.example  id = \"bucket-name\"}</code></p><p>If the owner (account ID) of the source bucket differs from the account used to configure the Terraform AWS Provider, import using the <code>bucket</code> and <code>expected_bucket_owner</code> separated by a comma (<code>,</code>):</p><p>import {<br />  to = aws_s3_bucket_object_lock_configuration.example<br />  id = \"bucket-name,123456789012\"<br />}</p><p><strong>Using <code>terraform import</code> to import</strong> S3 bucket Object Lock configuration using the <code>bucket</code> or using the <code>bucket</code> and <code>expected_bucket_owner</code> separated by a comma (<code>,</code>). For example:</p><p>If the owner (account ID) of the source bucket is the same account used to configure the Terraform AWS Provider, import using the <code>bucket</code>:</p><p><code>console% terraform import aws_s3_bucket_object_lock_configuration.example bucket-name</code></p><p>If the owner (account ID) of the source bucket differs from the account used to configure the Terraform AWS Provider, import using the <code>bucket</code> and <code>expected_bucket_owner</code> separated by a comma (<code>,</code>):</p><p><code>console% terraform import aws_s3_bucket_object_lock_configuration.example bucket-name,123456789012</code></p>", "description": "<h1 id=\"resource-aws_s3_bucket_object_lock_configuration\">Resource: aws_s3_bucket_object_lock_configuration</h1><p>Provides an S3 bucket Object Lock configuration resource. For more information about Object Locking, go to <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html\">Using S3 Object Lock</a> in the Amazon S3 User Guide.</p><p>~&gt; <strong>NOTE:</strong> This resource <strong>does not enable</strong> Object Lock for <strong>new</strong> buckets. It configures a default retention period for objects placed in the specified bucket.<br />Thus, to <strong>enable</strong> Object Lock for a <strong>new</strong> bucket, see the <a href=\"s3_bucket.html.markdown#using-object-lock-configuration\">Using object lock configuration</a> section in  the <code>aws_s3_bucket</code> resource or the <a href=\"#object-lock-configuration-for-a-new-bucket\">Object Lock configuration for a new bucket</a> example below.<br />If you want to <strong>enable</strong> Object Lock for an <strong>existing</strong> bucket, contact AWS Support and see the <a href=\"#object-lock-configuration-for-an-existing-bucket\">Object Lock configuration for an existing bucket</a> example below.</p>"}