{"resource-aws-amplify-branch": "<h1 id=\"resource-aws_amplify_branch\">Resource: aws_amplify_branch</h1><p>Provides an Amplify Branch resource.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>terraform<br />resource \"aws_amplify_app\" \"example\" {<br />  name = \"app\"<br />}</p><br /><p>resource \"aws_amplify_branch\" \"master\" {<br />  app_id      = aws_amplify_app.example.id<br />  branch_name = \"master\"</p><br /><p>framework = \"React\"<br />  stage     = \"PRODUCTION\"</p><br /><p>environment_variables = {<br />    REACT_APP_API_SERVER = \"https://api.example.com\"<br />  }<br />}</p><br /><h3 id=\"basic-authentication\">Basic Authentication</h3><br /><p>terraform<br />resource \"aws_amplify_app\" \"example\" {<br />  name = \"app\"<br />}</p><br /><p>resource \"aws_amplify_branch\" \"master\" {<br />  app_id      = aws_amplify_app.example.id<br />  branch_name = \"master\"</p><br /><p>enable_basic_auth      = true<br />  basic_auth_credentials = base64encode(\"username:password\")<br />}</p><br /><h3 id=\"notifications\">Notifications</h3><br /><p>Amplify Console uses EventBridge (formerly known as CloudWatch Events) and SNS for email notifications.  To implement the same functionality, you need to set <code>enable_notification</code> in a <code>aws_amplify_branch</code> resource, as well as creating an EventBridge Rule, an SNS topic, and SNS subscriptions.</p><br /><p>terraform<br />resource \"aws_amplify_app\" \"example\" {<br />  name = \"app\"<br />}</p><br /><p>resource \"aws_amplify_branch\" \"master\" {<br />  app_id      = aws_amplify_app.example.id<br />  branch_name = \"master\"</p><br /><p># Enable SNS notifications.<br />  enable_notification = true<br />}</p><br />", "eventbridge-rule-for-amplify-notifications": "<h1 id=\"eventbridge-rule-for-amplify-notifications\">EventBridge Rule for Amplify notifications</h1><p>resource \"aws_cloudwatch_event_rule\" \"amplify_app_master\" {<br />  name        = \"amplify-${aws_amplify_app.app.id}-${aws_amplify_branch.master.branch_name}-branch-notification\"<br />  description = \"AWS Amplify build notifications for :  App: ${aws_amplify_app.app.id} Branch: ${aws_amplify_branch.master.branch_name}\"</p><p>event_pattern = jsonencode({<br />    \"detail\" = {<br />      \"appId\" = [<br />        aws_amplify_app.example.id<br />      ]<br />      \"branchName\" = [<br />        aws_amplify_branch.master.branch_name<br />      ],<br />      \"jobStatus\" = [<br />        \"SUCCEED\",<br />        \"FAILED\",<br />        \"STARTED\"<br />      ]<br />    }<br />    \"detail-type\" = [<br />      \"Amplify Deployment Status Change\"<br />    ]<br />    \"source\" = [<br />      \"aws.amplify\"<br />    ]<br />  })<br />}</p><p>resource \"aws_cloudwatch_event_target\" \"amplify_app_master\" {<br />  rule      = aws_cloudwatch_event_rule.amplify_app_master.name<br />  target_id = aws_amplify_branch.master.branch_name<br />  arn       = aws_sns_topic.amplify_app_master.arn</p><p>input_transformer {<br />    input_paths = {<br />      jobId  = \"$.detail.jobId\"<br />      appId  = \"$.detail.appId\"<br />      region = \"$.region\"<br />      branch = \"$.detail.branchName\"<br />      status = \"$.detail.jobStatus\"<br />    }</p><pre><code>input_template = \"\\\"Build notification from the AWS Amplify Console for app: https://&lt;branch&gt;.&lt;appId&gt;.amplifyapp.com/. Your build status is &lt;status&gt;. Go to https://console.aws.amazon.com/amplify/home?region=&lt;region&gt;#&lt;appId&gt;/&lt;branch&gt;/&lt;jobId&gt; to view details on your build. \\\"\"</code></pre><p>}<br />}</p>", "sns-topic-for-amplify-notifications": "<h1 id=\"sns-topic-for-amplify-notifications\">SNS Topic for Amplify notifications</h1><p>resource \"aws_sns_topic\" \"amplify_app_master\" {<br />  name = \"amplify-${aws_amplify_app.app.id}_${aws_amplify_branch.master.branch_name}\"<br />}</p><p>data \"aws_iam_policy_document\" \"amplify_app_master\" {<br />  statement {<br />    sid = \"Allow_Publish_Events ${aws_amplify_branch.master.arn}\"</p><pre><code>effect = \"Allow\"actions = [  \"SNS:Publish\",]principals {  type = \"Service\"  identifiers = [    \"events.amazonaws.com\",  ]}resources = [  aws_sns_topic.amplify_app_master.arn,]</code></pre><p>}<br />}</p><p>resource \"aws_sns_topic_policy\" \"amplify_app_master\" {<br />  arn    = aws_sns_topic.amplify_app_master.arn<br />  policy = data.aws_iam_policy_document.amplify_app_master.json<br />}</p><p>resource \"aws_sns_topic_subscription\" \"this\" {<br />  topic_arn = aws_sns_topic.amplify_app_master.arn<br />  protocol  = \"email\"<br />  endpoint  = \"user@acme.com\"<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>This resource supports the following arguments:</p><ul><li><code>app_id</code> - (Required) Unique ID for an Amplify app.</li><li><code>branch_name</code> - (Required) Name for the branch.</li><li><code>backend_environment_arn</code> - (Optional) ARN for a backend environment that is part of an Amplify app.</li><li><code>basic_auth_credentials</code> - (Optional) Basic authorization credentials for the branch.</li><li><code>description</code> - (Optional) Description for the branch.</li><li><code>display_name</code> - (Optional) Display name for a branch. This is used as the default domain prefix.</li><li><code>enable_auto_build</code> - (Optional) Enables auto building for the branch.</li><li><code>enable_basic_auth</code> - (Optional) Enables basic authorization for the branch.</li><li><code>enable_notification</code> - (Optional) Enables notifications for the branch.</li><li><code>enable_performance_mode</code> - (Optional) Enables performance mode for the branch.</li><li><code>enable_pull_request_preview</code> - (Optional) Enables pull request previews for this branch.</li><li><code>environment_variables</code> - (Optional) Environment variables for the branch.</li><li><code>framework</code> - (Optional) Framework for the branch.</li><li><code>pull_request_environment_name</code> - (Optional) Amplify environment name for the pull request.</li><li><code>stage</code> - (Optional) Describes the current stage for the branch. Valid values: <code>PRODUCTION</code>, <code>BETA</code>, <code>DEVELOPMENT</code>, <code>EXPERIMENTAL</code>, <code>PULL_REQUEST</code>.</li><li><code>tags</code> - (Optional) Key-value mapping of resource tags. If configured with a provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a> present, tags with matching keys will overwrite those defined at the provider-level.</li><li><code>ttl</code> - (Optional) Content Time To Live (TTL) for the website in seconds.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute Reference</h2><p>This resource exports the following attributes in addition to the arguments above:</p><ul><li><code>arn</code> - ARN for the branch.</li><li><code>associated_resources</code> - A list of custom resources that are linked to this branch.</li><li><code>custom_domains</code> - Custom domains for the branch.</li><li><code>destination_branch</code> - Destination branch if the branch is a pull request branch.</li><li><code>source_branch</code> - Source branch if the branch is a pull request branch.</li><li><code>tags_all</code> - Map of tags assigned to the resource, including those inherited from the provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a>.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>In Terraform v1.5.0 and later, use an <a href=\"https://developer.hashicorp.com/terraform/language/import\"><code>import</code> block</a> to import Amplify branch using <code>app_id</code> and <code>branch_name</code>. For example:</p><p>terraform<br />import {<br />  to = aws_amplify_branch.master<br />  id = \"d2ypk4k47z8u6/master\"<br />}</p><p>Using <code>terraform import</code>, import Amplify branch using <code>app_id</code> and <code>branch_name</code>. For example:</p><p>console<br />% terraform import aws_amplify_branch.master d2ypk4k47z8u6/master</p>", "description": "<h1 id=\"resource-aws_amplify_branch\">Resource: aws_amplify_branch</h1><p>Provides an Amplify Branch resource.</p>"}