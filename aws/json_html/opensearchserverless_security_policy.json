{"resource-aws-opensearchserverless-security-policy": "<h1 id=\"resource-aws_opensearchserverless_security_policy\">Resource: aws_opensearchserverless_security_policy</h1><p>Terraform resource for managing an AWS OpenSearch Serverless Security Policy. See AWS documentation for <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/serverless-encryption.html#serverless-encryption-policies\">encryption policies</a> and <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/serverless-network.html#serverless-network-policies\">network policies</a>.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><h3 id=\"encryption-security-policy\">Encryption Security Policy</h3><br /><h4 id=\"applies-to-a-single-collection\">Applies to a single collection</h4><br /><p>terraform<br />resource \"aws_opensearchserverless_security_policy\" \"example\" {<br />  name        = \"example\"<br />  type        = \"encryption\"<br />  description = \"encryption security policy for example-collection\"<br />  policy = jsonencode({<br />    Rules = [<br />      {<br />        Resource = [<br />          \"collection/example-collection\"<br />        ],<br />        ResourceType = \"collection\"<br />      }<br />    ],<br />    AWSOwnedKey = true<br />  })<br />}</p><br /><h4 id=\"applies-to-multiple-collections\">Applies to multiple collections</h4><br /><p>terraform<br />resource \"aws_opensearchserverless_security_policy\" \"example\" {<br />  name        = \"example\"<br />  type        = \"encryption\"<br />  description = \"encryption security policy for collections that begin with \\\"example\\\"\"<br />  policy = jsonencode({<br />    Rules = [<br />      {<br />        Resource = [<br />          \"collection/example*\"<br />        ],<br />        ResourceType = \"collection\"<br />      }<br />    ],<br />    AWSOwnedKey = true<br />  })<br />}</p><br /><h4 id=\"using-a-customer-managed-key\">Using a customer managed key</h4><br /><p>terraform<br />resource \"aws_opensearchserverless_security_policy\" \"example\" {<br />  name        = \"example\"<br />  type        = \"encryption\"<br />  description = \"encryption security policy using customer KMS key\"<br />  policy = jsonencode({<br />    Rules = [<br />      {<br />        Resource = [<br />          \"collection/customer-managed-key-collection\"<br />        ],<br />        ResourceType = \"collection\"<br />      }<br />    ],<br />    AWSOwnedKey = false<br />    KmsARN      = \"arn:aws:kms:us-east-1:123456789012:key/93fd6da4-a317-4c17-bfe9-382b5d988b36\"<br />  })<br />}</p><br /><h3 id=\"network-security-policy\">Network Security Policy</h3><br /><h4 id=\"allow-public-access-to-the-collection-endpoint-and-the-dashboards-endpoint\">Allow public access to the collection endpoint and the Dashboards endpoint</h4><br /><p>terraform<br />resource \"aws_opensearchserverless_security_policy\" \"example\" {<br />  name        = \"example\"<br />  type        = \"network\"<br />  description = \"Public access\"<br />  policy = jsonencode([<br />    {<br />      Description = \"Public access to collection and Dashboards endpoint for example collection\",<br />      Rules = [<br />        {<br />          ResourceType = \"collection\",<br />          Resource = [<br />            \"collection/example-collection\"<br />          ]<br />        },<br />        {<br />          ResourceType = \"dashboard\"<br />          Resource = [<br />            \"collection/example-collection\"<br />          ]<br />        }<br />      ],<br />      AllowFromPublic = true<br />    }<br />  ])<br />}</p><br /><h4 id=\"allow-vpc-access-to-the-collection-endpoint-and-the-dashboards-endpoint\">Allow VPC access to the collection endpoint and the Dashboards endpoint</h4><br /><p>terraform<br />resource \"aws_opensearchserverless_security_policy\" \"example\" {<br />  name        = \"example\"<br />  type        = \"network\"<br />  description = \"VPC access\"<br />  policy = jsonencode([<br />    {<br />      Description = \"VPC access to collection and Dashboards endpoint for example collection\",<br />      Rules = [<br />        {<br />          ResourceType = \"collection\",<br />          Resource = [<br />            \"collection/example-collection\"<br />          ]<br />        },<br />        {<br />          ResourceType = \"dashboard\"<br />          Resource = [<br />            \"collection/example-collection\"<br />          ]<br />        }<br />      ],<br />      AllowFromPublic = false,<br />      SourceVPCEs = [<br />        \"vpce-050f79086ee71ac05\"<br />      ]<br />    }<br />  ])<br />}</p><br /><h4 id=\"mixed-access-for-different-collections\">Mixed access for different collections</h4><br /><p>terraform<br />resource \"aws_opensearchserverless_security_policy\" \"example\" {<br />  name        = \"example\"<br />  type        = \"network\"<br />  description = \"Mixed access for marketing and sales\"<br />  policy = jsonencode([<br />    {<br />      \"Description\" : \"Marketing access\",<br />      \"Rules\" : [<br />        {<br />          \"ResourceType\" : \"collection\",<br />          \"Resource\" : [<br />            \"collection/marketing<em>\"<br />          ]<br />        },<br />        {<br />          \"ResourceType\" : \"dashboard\",<br />          \"Resource\" : [<br />            \"collection/marketing</em>\"<br />          ]<br />        }<br />      ],<br />      \"AllowFromPublic\" : false,<br />      \"SourceVPCEs\" : [<br />        \"vpce-050f79086ee71ac05\"<br />      ]<br />    },<br />    {<br />      \"Description\" : \"Sales access\",<br />      \"Rules\" : [<br />        {<br />          \"ResourceType\" : \"collection\",<br />          \"Resource\" : [<br />            \"collection/finance\"<br />          ]<br />        }<br />      ],<br />      \"AllowFromPublic\" : true<br />    }<br />  ])<br />}</p><br />", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are required:</p><ul><li><code>name</code> - (Required) Name of the policy.</li><li><code>policy</code> - (Required) JSON policy document to use as the content for the new policy</li><li><code>type</code> - (Required) Type of security policy. One of <code>encryption</code> or <code>network</code>.</li></ul><p>The following arguments are optional:</p><ul><li><code>description</code> - (Optional) Description of the policy. Typically used to store information about the permissions defined in the policy.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute Reference</h2><p>This resource exports the following attributes in addition to the arguments above:</p><ul><li><code>policy_version</code> - Version of the policy.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>In Terraform v1.5.0 and later, use an <a href=\"https://developer.hashicorp.com/terraform/language/import\"><code>import</code> block</a> to import OpenSearchServerless Security Policy using the <code>name</code> and <code>type</code> arguments separated by a slash (<code>/</code>). For example:</p><p>terraform<br />import {<br />  to = aws_opensearchserverless_security_policy.example<br />  id = \"example/encryption\"<br />}</p><p>Using <code>terraform import</code>, import OpenSearchServerless Security Policy using the <code>name</code> and <code>type</code> arguments separated by a slash (<code>/</code>). For example:</p><p>console<br />% terraform import aws_opensearchserverless_security_policy.example example/encryption</p>", "description": "<h1 id=\"resource-aws_opensearchserverless_security_policy\">Resource: aws_opensearchserverless_security_policy</h1><p>Terraform resource for managing an AWS OpenSearch Serverless Security Policy. See AWS documentation for <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/serverless-encryption.html#serverless-encryption-policies\">encryption policies</a> and <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/serverless-network.html#serverless-network-policies\">network policies</a>.</p>"}