{"resource-aws-wafregional-web-acl-association": "<h1 id=\"resource-aws_wafregional_web_acl_association\">Resource: aws_wafregional_web_acl_association</h1><p>Manages an association with WAF Regional Web ACL.</p><p>-&gt; <strong>Note:</strong> An Application Load Balancer can only be associated with one WAF Regional WebACL.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><h3 id=\"application-load-balancer-association\">Application Load Balancer Association</h3><br /><p>terraform<br />resource \"aws_wafregional_ipset\" \"ipset\" {<br />  name = \"tfIPSet\"</p><br /><p>ip_set_descriptor {<br />    type  = \"IPV4\"<br />    value = \"192.0.7.0/24\"<br />  }<br />}</p><br /><p>resource \"aws_wafregional_rule\" \"foo\" {<br />  name        = \"tfWAFRule\"<br />  metric_name = \"tfWAFRule\"</p><br /><p>predicate {<br />    data_id = aws_wafregional_ipset.ipset.id<br />    negated = false<br />    type    = \"IPMatch\"<br />  }<br />}</p><br /><p>resource \"aws_wafregional_web_acl\" \"foo\" {<br />  name        = \"foo\"<br />  metric_name = \"foo\"</p><br /><p>default_action {<br />    type = \"ALLOW\"<br />  }</p><br /><p>rule {<br />    action {<br />      type = \"BLOCK\"<br />    }</p><br /><pre><code>priority = 1<br />rule_id  = aws_wafregional_rule.foo.id<br /></code></pre><br /><p>}<br />}</p><br /><p>resource \"aws_vpc\" \"foo\" {<br />  cidr_block = \"10.1.0.0/16\"<br />}</p><br /><p>data \"aws_availability_zones\" \"available\" {}</p><br /><p>resource \"aws_subnet\" \"foo\" {<br />  vpc_id            = aws_vpc.foo.id<br />  cidr_block        = \"10.1.1.0/24\"<br />  availability_zone = data.aws_availability_zones.available.names[0]<br />}</p><br /><p>resource \"aws_subnet\" \"bar\" {<br />  vpc_id            = aws_vpc.foo.id<br />  cidr_block        = \"10.1.2.0/24\"<br />  availability_zone = data.aws_availability_zones.available.names[1]<br />}</p><br /><p>resource \"aws_alb\" \"foo\" {<br />  internal = true<br />  subnets  = [aws_subnet.foo.id, aws_subnet.bar.id]<br />}</p><br /><p>resource \"aws_wafregional_web_acl_association\" \"foo\" {<br />  resource_arn = aws_alb.foo.arn<br />  web_acl_id   = aws_wafregional_web_acl.foo.id<br />}</p><br /><h3 id=\"api-gateway-association\">API Gateway Association</h3><br /><p>terraform<br />resource \"aws_wafregional_ipset\" \"ipset\" {<br />  name = \"tfIPSet\"</p><br /><p>ip_set_descriptor {<br />    type  = \"IPV4\"<br />    value = \"192.0.7.0/24\"<br />  }<br />}</p><br /><p>resource \"aws_wafregional_rule\" \"foo\" {<br />  name        = \"tfWAFRule\"<br />  metric_name = \"tfWAFRule\"</p><br /><p>predicate {<br />    data_id = aws_wafregional_ipset.ipset.id<br />    negated = false<br />    type    = \"IPMatch\"<br />  }<br />}</p><br /><p>resource \"aws_wafregional_web_acl\" \"foo\" {<br />  name        = \"foo\"<br />  metric_name = \"foo\"</p><br /><p>default_action {<br />    type = \"ALLOW\"<br />  }</p><br /><p>rule {<br />    action {<br />      type = \"BLOCK\"<br />    }</p><br /><pre><code>priority = 1<br />rule_id  = aws_wafregional_rule.foo.id<br /></code></pre><br /><p>}<br />}</p><br /><p>resource \"aws_api_gateway_rest_api\" \"example\" {<br />  body = jsonencode({<br />    openapi = \"3.0.1\"<br />    info = {<br />      title   = \"example\"<br />      version = \"1.0\"<br />    }<br />    paths = {<br />      \"/path1\" = {<br />        get = {<br />          x-amazon-apigateway-integration = {<br />            httpMethod           = \"GET\"<br />            payloadFormatVersion = \"1.0\"<br />            type                 = \"HTTP_PROXY\"<br />            uri                  = \"https://ip-ranges.amazonaws.com/ip-ranges.json\"<br />          }<br />        }<br />      }<br />    }<br />  })</p><br /><p>name = \"example\"<br />}</p><br /><p>resource \"aws_api_gateway_deployment\" \"example\" {<br />  rest_api_id = aws_api_gateway_rest_api.example.id</p><br /><p>triggers = {<br />    redeployment = sha1(jsonencode(aws_api_gateway_rest_api.example.body))<br />  }</p><br /><p>lifecycle {<br />    create_before_destroy = true<br />  }<br />}</p><br /><p>resource \"aws_api_gateway_stage\" \"example\" {<br />  deployment_id = aws_api_gateway_deployment.example.id<br />  rest_api_id   = aws_api_gateway_rest_api.example.id<br />  stage_name    = \"example\"<br />}</p><br /><p>resource \"aws_wafregional_web_acl_association\" \"association\" {<br />  resource_arn = aws_api_gateway_stage.example.arn<br />  web_acl_id   = aws_wafregional_web_acl.foo.id<br />}</p><br />", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>This resource supports the following arguments:</p><ul><li><code>web_acl_id</code> - (Required) The ID of the WAF Regional WebACL to create an association.</li><li><code>resource_arn</code> - (Required) ARN of the resource to associate with. For example, an Application Load Balancer or API Gateway Stage.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute Reference</h2><p>This resource exports the following attributes in addition to the arguments above:</p><ul><li><code>id</code> - The ID of the association</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>In Terraform v1.5.0 and later, use an <a href=\"https://developer.hashicorp.com/terraform/language/import\"><code>import</code> block</a> to import WAF Regional Web ACL Association using their <code>web_acl_id:resource_arn</code>. For example:</p><p>terraform<br />import {<br />  to = aws_wafregional_web_acl_association.foo<br />  id = \"web_acl_id:resource_arn\"<br />}</p><p>Using <code>terraform import</code>, import WAF Regional Web ACL Association using their <code>web_acl_id:resource_arn</code>. For example:</p><p>console<br />% terraform import aws_wafregional_web_acl_association.foo web_acl_id:resource_arn</p>", "description": "<h1 id=\"resource-aws_wafregional_web_acl_association\">Resource: aws_wafregional_web_acl_association</h1><p>Manages an association with WAF Regional Web ACL.</p><p>-&gt; <strong>Note:</strong> An Application Load Balancer can only be associated with one WAF Regional WebACL.</p>"}