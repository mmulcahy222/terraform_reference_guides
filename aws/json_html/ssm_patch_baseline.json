{"resource-aws-ssm-patch-baseline": "<h1 id=\"resource-aws_ssm_patch_baseline\">Resource: aws_ssm_patch_baseline</h1><p>Provides an SSM Patch Baseline resource.</p><p>~&gt; <strong>NOTE on Patch Baselines:</strong> The <code>approved_patches</code> and <code>approval_rule</code> are<br />both marked as optional fields, but the Patch Baseline requires that at least one<br />of them is specified.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><h3 id=\"basic-usage\">Basic Usage</h3><p>Using <code>approved_patches</code> only.</p><p><code>terraformresource \"aws_ssm_patch_baseline\" \"production\" {  name             = \"patch-baseline\"  approved_patches = [\"KB123456\"]}</code></p><h3 id=\"advanced-usage-specifying-patch-filters\">Advanced Usage, specifying patch filters</h3><p>terraform<br />resource \"aws_ssm_patch_baseline\" \"production\" {<br />  name             = \"patch-baseline\"<br />  description      = \"Patch Baseline Description\"<br />  approved_patches = [\"KB123456\", \"KB456789\"]<br />  rejected_patches = [\"KB987654\"]</p><p>global_filter {<br />    key    = \"PRODUCT\"<br />    values = [\"WindowsServer2008\"]<br />  }</p><p>global_filter {<br />    key    = \"CLASSIFICATION\"<br />    values = [\"ServicePacks\"]<br />  }</p><p>global_filter {<br />    key    = \"MSRC_SEVERITY\"<br />    values = [\"Low\"]<br />  }</p><p>approval_rule {<br />    approve_after_days = 7<br />    compliance_level   = \"HIGH\"</p><pre><code>patch_filter {  key    = \"PRODUCT\"  values = [\"WindowsServer2016\"]}patch_filter {  key    = \"CLASSIFICATION\"  values = [\"CriticalUpdates\", \"SecurityUpdates\", \"Updates\"]}patch_filter {  key    = \"MSRC_SEVERITY\"  values = [\"Critical\", \"Important\", \"Moderate\"]}</code></pre><p>}</p><p>approval_rule {<br />    approve_after_days = 7</p><pre><code>patch_filter {  key    = \"PRODUCT\"  values = [\"WindowsServer2012\"]}</code></pre><p>}<br />}<br /></p><h3 id=\"advanced-usage-specifying-microsoft-application-and-windows-patch-rules\">Advanced usage, specifying Microsoft application and Windows patch rules</h3><p>terraform<br />resource \"aws_ssm_patch_baseline\" \"windows_os_apps\" {<br />  name             = \"WindowsOSAndMicrosoftApps\"<br />  description      = \"Patch both Windows and Microsoft apps\"<br />  operating_system = \"WINDOWS\"</p><p>approval_rule {<br />    approve_after_days = 7</p><pre><code>patch_filter {  key    = \"CLASSIFICATION\"  values = [\"CriticalUpdates\", \"SecurityUpdates\"]}patch_filter {  key    = \"MSRC_SEVERITY\"  values = [\"Critical\", \"Important\"]}</code></pre><p>}</p><p>approval_rule {<br />    approve_after_days = 7</p><pre><code>patch_filter {  key    = \"PATCH_SET\"  values = [\"APPLICATION\"]}# Filter on Microsoft product if necessarypatch_filter {  key    = \"PRODUCT\"  values = [\"Office 2013\", \"Office 2016\"]}</code></pre><p>}<br />}<br /></p><h3 id=\"advanced-usage-specifying-alternate-patch-source-repository\">Advanced usage, specifying alternate patch source repository</h3><p>terraform<br />resource \"aws_ssm_patch_baseline\" \"al_2017_09\" {<br />  name             = \"Amazon-Linux-2017.09\"<br />  description      = \"My patch repository for Amazon Linux 2017.09\"<br />  operating_system = \"AMAZON_LINUX\"</p><p>approval_rule {<br />    # ...<br />  }</p><p>source {<br />    name          = \"My-AL2017.09\"<br />    products      = [\"AmazonLinux2017.09\"]<br />    configuration = &lt;&lt;EOF<br />[amzn-main]<br />name=amzn-main-Base<br />mirrorlist=http://repo./$awsregion./$awsdomain//$releasever/main/mirror.list<br />mirrorlist_expire=300<br />metadata_expire=300<br />priority=10<br />failovermethod=priority<br />fastestmirror_enabled=0<br />gpgcheck=1<br />gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-amazon-ga<br />enabled=1<br />retries=3<br />timeout=5<br />report_instanceid=yes<br />EOF<br />  }<br />}<br /></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>This resource supports the following arguments:</p><ul><li><code>name</code> - (Required) The name of the patch baseline.</li><li><code>description</code> - (Optional) The description of the patch baseline.</li><li><code>operating_system</code> - (Optional) The operating system the patch baseline applies to.<br />  Valid values are<br /><code>ALMA_LINUX</code>,<br /><code>AMAZON_LINUX</code>,<br /><code>AMAZON_LINUX_2</code>,<br /><code>AMAZON_LINUX_2022</code>,<br /><code>AMAZON_LINUX_2023</code>,<br /><code>CENTOS</code>,<br /><code>DEBIAN</code>,<br /><code>MACOS</code>,<br /><code>ORACLE_LINUX</code>,<br /><code>RASPBIAN</code>,<br /><code>REDHAT_ENTERPRISE_LINUX</code>,<br /><code>ROCKY_LINUX</code>,<br /><code>SUSE</code>,<br /><code>UBUNTU</code>, and<br /><code>WINDOWS</code>.<br />  The default value is <code>WINDOWS</code>.</li><li><code>approved_patches_compliance_level</code> - (Optional) The compliance level for approved patches.<br />  This means that if an approved patch is reported as missing, this is the severity of the compliance violation.<br />  Valid values are <code>CRITICAL</code>, <code>HIGH</code>, <code>MEDIUM</code>, <code>LOW</code>, <code>INFORMATIONAL</code>, <code>UNSPECIFIED</code>.<br />  The default value is <code>UNSPECIFIED</code>.</li><li><code>approved_patches</code> - (Optional) A list of explicitly approved patches for the baseline.<br />  Cannot be specified with <code>approval_rule</code>.</li><li><code>rejected_patches</code> - (Optional) A list of rejected patches.</li><li><code>global_filter</code> - (Optional) A set of global filters used to exclude patches from the baseline.<br />  Up to 4 global filters can be specified using Key/Value pairs.<br />  Valid Keys are <code>PRODUCT</code>, <code>CLASSIFICATION</code>, <code>MSRC_SEVERITY</code>, and <code>PATCH_ID</code>.</li><li><code>approval_rule</code> - (Optional) A set of rules used to include patches in the baseline.<br />  Up to 10 approval rules can be specified.<br />  See <a href=\"#approval_rule-block\"><code>approval_rule</code></a> below.</li><li><code>source</code> - (Optional) Configuration block with alternate sources for patches.<br />  Applies to Linux instances only.<br />  See <a href=\"#source-block\"><code>source</code></a> below.</li><li><code>rejected_patches_action</code> - (Optional) The action for Patch Manager to take on patches included in the <code>rejected_patches</code> list.<br />  Valid values are <code>ALLOW_AS_DEPENDENCY</code> and <code>BLOCK</code>.</li><li><code>approved_patches_enable_non_security</code> - (Optional) Indicates whether the list of approved patches includes non-security updates that should be applied to the instances.<br />  Applies to Linux instances only.</li><li><code>tags</code> - (Optional) A map of tags to assign to the resource. If configured with a provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a> present, tags with matching keys will overwrite those defined at the provider-level.</li></ul><h3 id=\"approval_rule-block\"><code>approval_rule</code> Block</h3><p>The <code>approval_rule</code> block supports:</p><ul><li><code>approve_after_days</code> - (Optional) The number of days after the release date of each patch matched by the rule the patch is marked as approved in the patch baseline.<br />  Valid Range: 0 to 100.<br />  Conflicts with <code>approve_until_date</code>.</li><li><code>approve_until_date</code> - (Optional) The cutoff date for auto approval of released patches.<br />  Any patches released on or before this date are installed automatically.<br />  Date is formatted as <code>YYYY-MM-DD</code>.<br />  Conflicts with <code>approve_after_days</code></li><li><code>patch_filter</code> - (Required) The patch filter group that defines the criteria for the rule.<br />  Up to 5 patch filters can be specified per approval rule using Key/Value pairs.<br />  Valid combinations of these Keys and the <code>operating_system</code> value can be found in the <a href=\"https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DescribePatchProperties.html\">SSM DescribePatchProperties API Reference</a>.<br />  Valid Values are exact values for the patch property given as the key, or a wildcard <code>*</code>, which matches all values.<ul><li><code>PATCH_SET</code> defaults to <code>OS</code> if unspecified</li></ul></li><li><code>compliance_level</code> - (Optional) The compliance level for patches approved by this rule.<br />  Valid values are <code>CRITICAL</code>, <code>HIGH</code>, <code>MEDIUM</code>, <code>LOW</code>, <code>INFORMATIONAL</code>, and <code>UNSPECIFIED</code>.<br />  The default value is <code>UNSPECIFIED</code>.</li><li><code>enable_non_security</code> - (Optional) Boolean enabling the application of non-security updates.<br />  The default value is <code>false</code>.<br />  Valid for Linux instances only.</li></ul><h3 id=\"source-block\"><code>source</code> Block</h3><p>The <code>source</code> block supports:</p><ul><li><code>name</code> - (Required) The name specified to identify the patch source.</li><li><code>configuration</code> - (Required) The value of the yum repo configuration.<br />  For information about other options available for your yum repository configuration, see the <a href=\"https://man7.org/linux/man-pages/man5/dnf.conf.5.html\"><code>dnf.conf</code> documentation</a></li><li><code>products</code> - (Required) The specific operating system versions a patch repository applies to, such as <code>\"Ubuntu16.04\"</code>, <code>\"AmazonLinux2016.09\"</code>, <code>\"RedhatEnterpriseLinux7.2\"</code> or <code>\"Suse12.7\"</code>.<br />  For lists of supported product values, see <a href=\"https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_PatchFilter.html\">PatchFilter</a>.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute Reference</h2><p>This resource exports the following attributes in addition to the arguments above:</p><ul><li><code>id</code> - The ID of the patch baseline.</li><li><code>arn</code> - The ARN of the patch baseline.</li><li><code>tags_all</code> - A map of tags assigned to the resource, including those inherited from the provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a>.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>In Terraform v1.5.0 and later, use an <a href=\"https://developer.hashicorp.com/terraform/language/import\"><code>import</code> block</a> to import SSM Patch Baselines using their baseline ID. For example:</p><p><code>terraformimport {  to = aws_ssm_patch_baseline.example  id = \"pb-12345678\"}</code></p><p>Using <code>terraform import</code>, import SSM Patch Baselines using their baseline ID. For example:</p><p><code>console% terraform import aws_ssm_patch_baseline.example pb-12345678</code></p>", "description": "<h1 id=\"resource-aws_ssm_patch_baseline\">Resource: aws_ssm_patch_baseline</h1><p>Provides an SSM Patch Baseline resource.</p><p>~&gt; <strong>NOTE on Patch Baselines:</strong> The <code>approved_patches</code> and <code>approval_rule</code> are<br />both marked as optional fields, but the Patch Baseline requires that at least one<br />of them is specified.</p>"}