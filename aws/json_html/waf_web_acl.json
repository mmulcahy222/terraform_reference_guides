{"resource-aws-waf-web-acl": "<h1 id=\"resource-aws_waf_web_acl\">Resource: aws_waf_web_acl</h1><p>Provides a WAF Web ACL Resource</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>This example blocks requests coming from <code>192.0.7.0/24</code> and allows everything else.</p><p>terraform<br />resource \"aws_waf_ipset\" \"ipset\" {<br />  name = \"tfIPSet\"</p><p>ip_set_descriptors {<br />    type  = \"IPV4\"<br />    value = \"192.0.7.0/24\"<br />  }<br />}</p><p>resource \"aws_waf_rule\" \"wafrule\" {<br />  depends_on  = [aws_waf_ipset.ipset]<br />  name        = \"tfWAFRule\"<br />  metric_name = \"tfWAFRule\"</p><p>predicates {<br />    data_id = aws_waf_ipset.ipset.id<br />    negated = false<br />    type    = \"IPMatch\"<br />  }<br />}</p><p>resource \"aws_waf_web_acl\" \"waf_acl\" {<br />  depends_on = [<br />    aws_waf_ipset.ipset,<br />    aws_waf_rule.wafrule,<br />  ]<br />  name        = \"tfWebACL\"<br />  metric_name = \"tfWebACL\"</p><p>default_action {<br />    type = \"ALLOW\"<br />  }</p><p>rules {<br />    action {<br />      type = \"BLOCK\"<br />    }</p><pre><code>priority = 1rule_id  = aws_waf_rule.wafrule.idtype     = \"REGULAR\"</code></pre><p>}<br />}<br /></p><h3 id=\"logging\">Logging</h3><p>~&gt; <em>NOTE:</em> The Kinesis Firehose Delivery Stream name must begin with <code>aws-waf-logs-</code> and be located in <code>us-east-1</code> region. See the <a href=\"https://docs.aws.amazon.com/waf/latest/developerguide/logging.html\">AWS WAF Developer Guide</a> for more information about enabling WAF logging.</p><p>terraform<br />resource \"aws_waf_web_acl\" \"example\" {<br />  # ... other configuration ...<br />  logging_configuration {<br />    log_destination = aws_kinesis_firehose_delivery_stream.example.arn</p><pre><code>redacted_fields {  field_to_match {    type = \"URI\"  }  field_to_match {    data = \"referer\"    type = \"HEADER\"  }}</code></pre><p>}<br />}<br /></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>This resource supports the following arguments:</p><ul><li><code>default_action</code> - (Required) Configuration block with action that you want AWS WAF to take when a request doesn't match the criteria in any of the rules that are associated with the web ACL. Detailed below.</li><li><code>metric_name</code> - (Required) The name or description for the Amazon CloudWatch metric of this web ACL.</li><li><code>name</code> - (Required) The name or description of the web ACL.</li><li><code>rules</code> - (Optional) Configuration blocks containing rules to associate with the web ACL and the settings for each rule. Detailed below.</li><li><code>logging_configuration</code> - (Optional) Configuration block to enable WAF logging. Detailed below.</li><li><code>tags</code> - (Optional) Key-value map of resource tags. If configured with a provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a> present, tags with matching keys will overwrite those defined at the provider-level.</li></ul><h3 id=\"default_action-configuration-block\"><code>default_action</code> Configuration Block</h3><ul><li><code>type</code> - (Required) Specifies how you want AWS WAF to respond to requests that don't match the criteria in any of the <code>rules</code>.<br />  e.g., <code>ALLOW</code> or <code>BLOCK</code></li></ul><h3 id=\"logging_configuration-configuration-block\"><code>logging_configuration</code> Configuration Block</h3><ul><li><code>log_destination</code> - (Required) Amazon Resource Name (ARN) of Kinesis Firehose Delivery Stream</li><li><code>redacted_fields</code> - (Optional) Configuration block containing parts of the request that you want redacted from the logs. Detailed below.</li></ul><h4 id=\"redacted_fields-configuration-block\"><code>redacted_fields</code> Configuration Block</h4><ul><li><code>field_to_match</code> - (Required) Set of configuration blocks for fields to redact. Detailed below.</li></ul><h5 id=\"field_to_match-configuration-block\"><code>field_to_match</code> Configuration Block</h5><p>-&gt; Additional information about this configuration can be found in the <a href=\"https://docs.aws.amazon.com/waf/latest/APIReference/API_regional_FieldToMatch.html\">AWS WAF Regional API Reference</a>.</p><ul><li><code>data</code> - (Optional) When the value of <code>type</code> is <code>HEADER</code>, enter the name of the header that you want the WAF to search, for example, <code>User-Agent</code> or <code>Referer</code>. If the value of <code>type</code> is any other value, omit <code>data</code>.</li><li><code>type</code> - (Required) The part of the web request that you want AWS WAF to search for a specified stringE.g., <code>HEADER</code> or <code>METHOD</code></li></ul><h3 id=\"rules-configuration-block\"><code>rules</code> Configuration Block</h3><p>See <a href=\"http://docs.aws.amazon.com/waf/latest/APIReference/API_ActivatedRule.html\">docs</a> for all details and supported values.</p><ul><li><code>action</code> - (Optional) The action that CloudFront or AWS WAF takes when a web request matches the conditions in the rule. Not used if <code>type</code> is <code>GROUP</code>.<ul><li><code>type</code> - (Required) valid values are: <code>BLOCK</code>, <code>ALLOW</code>, or <code>COUNT</code></li></ul></li><li><code>override_action</code> - (Optional) Override the action that a group requests CloudFront or AWS WAF takes when a web request matches the conditions in the rule. Only used if <code>type</code> is <code>GROUP</code>.<ul><li><code>type</code> - (Required) valid values are: <code>NONE</code> or <code>COUNT</code></li></ul></li><li><code>priority</code> - (Required) Specifies the order in which the rules in a WebACL are evaluated.<br />  Rules with a lower value are evaluated before rules with a higher value.</li><li><code>rule_id</code> - (Required) ID of the associated WAF (Global) rule (e.g., <a href=\"/docs/providers/aws/r/waf_rule.html\"><code>aws_waf_rule</code></a>). WAF (Regional) rules cannot be used.</li><li><code>type</code> - (Optional) The rule type, either <code>REGULAR</code>, as defined by <a href=\"http://docs.aws.amazon.com/waf/latest/APIReference/API_Rule.html\">Rule</a>, <code>RATE_BASED</code>, as defined by <a href=\"http://docs.aws.amazon.com/waf/latest/APIReference/API_RateBasedRule.html\">RateBasedRule</a>, or <code>GROUP</code>, as defined by <a href=\"https://docs.aws.amazon.com/waf/latest/APIReference/API_RuleGroup.html\">RuleGroup</a>. The default is REGULAR. If you add a RATE_BASED rule, you need to set <code>type</code> as <code>RATE_BASED</code>. If you add a GROUP rule, you need to set <code>type</code> as <code>GROUP</code>.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute Reference</h2><p>This resource exports the following attributes in addition to the arguments above:</p><ul><li><code>id</code> - The ID of the WAF WebACL.</li><li><code>arn</code> - The ARN of the WAF WebACL.</li><li><code>tags_all</code> - A map of tags assigned to the resource, including those inherited from the provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a>.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>In Terraform v1.5.0 and later, use an <a href=\"https://developer.hashicorp.com/terraform/language/import\"><code>import</code> block</a> to import WAF Web ACL using the <code>id</code>. For example:</p><p><code>terraformimport {  to = aws_waf_web_acl.main  id = \"0c8e583e-18f3-4c13-9e2a-67c4805d2f94\"}</code></p><p>Using <code>terraform import</code>, import WAF Web ACL using the <code>id</code>. For example:</p><p><code>console% terraform import aws_waf_web_acl.main 0c8e583e-18f3-4c13-9e2a-67c4805d2f94</code></p>", "description": "<h1 id=\"resource-aws_waf_web_acl\">Resource: aws_waf_web_acl</h1><p>Provides a WAF Web ACL Resource</p>"}