{"resource-aws-cloudfront-distribution": "<h1 id=\"resource-aws_cloudfront_distribution\">Resource: aws_cloudfront_distribution</h1><p>Creates an Amazon CloudFront web distribution.</p><p>For information about CloudFront distributions, see the <a href=\"http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Introduction.html\">Amazon CloudFront Developer Guide</a>. For specific information about creating CloudFront web distributions, see the <a href=\"https://docs.aws.amazon.com/cloudfront/latest/APIReference/API_CreateDistribution.html\">POST Distribution</a> page in the Amazon CloudFront API Reference.</p><p>~&gt; <strong>NOTE:</strong> CloudFront distributions take about 15 minutes to reach a deployed state after creation or modification. During this time, deletes to resources will be blocked. If you need to delete a distribution that is enabled and you do not want to wait, you need to use the <code>retain_on_delete</code> flag.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><h3 id=\"s3-origin\">S3 Origin</h3><p>The example below creates a CloudFront distribution with an S3 origin.</p><p>terraform<br />resource \"aws_s3_bucket\" \"b\" {<br />  bucket = \"mybucket\"</p><p>tags = {<br />    Name = \"My bucket\"<br />  }<br />}</p><p>resource \"aws_s3_bucket_acl\" \"b_acl\" {<br />  bucket = aws_s3_bucket.b.id<br />  acl    = \"private\"<br />}</p><p>locals {<br />  s3_origin_id = \"myS3Origin\"<br />}</p><p>resource \"aws_cloudfront_distribution\" \"s3_distribution\" {<br />  origin {<br />    domain_name              = aws_s3_bucket.b.bucket_regional_domain_name<br />    origin_access_control_id = aws_cloudfront_origin_access_control.default.id<br />    origin_id                = local.s3_origin_id<br />  }</p><p>enabled             = true<br />  is_ipv6_enabled     = true<br />  comment             = \"Some comment\"<br />  default_root_object = \"index.html\"</p><p>logging_config {<br />    include_cookies = false<br />    bucket          = \"mylogs.s3.amazonaws.com\"<br />    prefix          = \"myprefix\"<br />  }</p><p>aliases = [\"mysite.example.com\", \"yoursite.example.com\"]</p><p>default_cache_behavior {<br />    allowed_methods  = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"PATCH\", \"POST\", \"PUT\"]<br />    cached_methods   = [\"GET\", \"HEAD\"]<br />    target_origin_id = local.s3_origin_id</p><pre><code>forwarded_values {  query_string = false  cookies {    forward = \"none\"  }}viewer_protocol_policy = \"allow-all\"min_ttl                = 0default_ttl            = 3600max_ttl                = 86400</code></pre><p>}</p><p># Cache behavior with precedence 0<br />  ordered_cache_behavior {<br />    path_pattern     = \"/content/immutable/*\"<br />    allowed_methods  = [\"GET\", \"HEAD\", \"OPTIONS\"]<br />    cached_methods   = [\"GET\", \"HEAD\", \"OPTIONS\"]<br />    target_origin_id = local.s3_origin_id</p><pre><code>forwarded_values {  query_string = false  headers      = [\"Origin\"]  cookies {    forward = \"none\"  }}min_ttl                = 0default_ttl            = 86400max_ttl                = 31536000compress               = trueviewer_protocol_policy = \"redirect-to-https\"</code></pre><p>}</p><p># Cache behavior with precedence 1<br />  ordered_cache_behavior {<br />    path_pattern     = \"/content/*\"<br />    allowed_methods  = [\"GET\", \"HEAD\", \"OPTIONS\"]<br />    cached_methods   = [\"GET\", \"HEAD\"]<br />    target_origin_id = local.s3_origin_id</p><pre><code>forwarded_values {  query_string = false  cookies {    forward = \"none\"  }}min_ttl                = 0default_ttl            = 3600max_ttl                = 86400compress               = trueviewer_protocol_policy = \"redirect-to-https\"</code></pre><p>}</p><p>price_class = \"PriceClass_200\"</p><p>restrictions {<br />    geo_restriction {<br />      restriction_type = \"whitelist\"<br />      locations        = [\"US\", \"CA\", \"GB\", \"DE\"]<br />    }<br />  }</p><p>tags = {<br />    Environment = \"production\"<br />  }</p><p>viewer_certificate {<br />    cloudfront_default_certificate = true<br />  }<br />}<br /></p><h3 id=\"with-failover-routing\">With Failover Routing</h3><p>The example below creates a CloudFront distribution with an origin group for failover routing.</p><p>terraform<br />resource \"aws_cloudfront_distribution\" \"s3_distribution\" {<br />  origin_group {<br />    origin_id = \"groupS3\"</p><pre><code>failover_criteria {  status_codes = [403, 404, 500, 502]}member {  origin_id = \"primaryS3\"}member {  origin_id = \"failoverS3\"}</code></pre><p>}</p><p>origin {<br />    domain_name = aws_s3_bucket.primary.bucket_regional_domain_name<br />    origin_id   = \"primaryS3\"</p><pre><code>s3_origin_config {  origin_access_identity = aws_cloudfront_origin_access_identity.default.cloudfront_access_identity_path}</code></pre><p>}</p><p>origin {<br />    domain_name = aws_s3_bucket.failover.bucket_regional_domain_name<br />    origin_id   = \"failoverS3\"</p><pre><code>s3_origin_config {  origin_access_identity = aws_cloudfront_origin_access_identity.default.cloudfront_access_identity_path}</code></pre><p>}</p><p>default_cache_behavior {<br />    # ... other configuration ...<br />    target_origin_id = \"groupS3\"<br />  }</p><p># ... other configuration ...<br />}<br /></p><h3 id=\"with-managed-caching-policy\">With Managed Caching Policy</h3><p>The example below creates a CloudFront distribution with an <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-managed-cache-policies.html\">AWS managed caching policy</a>.</p><p>terraform<br />locals {<br />  s3_origin_id = \"myS3Origin\"<br />}</p><p>resource \"aws_cloudfront_distribution\" \"s3_distribution\" {<br />  origin {<br />    domain_name = aws_s3_bucket.primary.bucket_regional_domain_name<br />    origin_id   = \"myS3Origin\"</p><pre><code>s3_origin_config {  origin_access_identity = aws_cloudfront_origin_access_identity.default.cloudfront_access_identity_path}</code></pre><p>}<br />  enabled             = true<br />  is_ipv6_enabled     = true<br />  comment             = \"Some comment\"<br />  default_root_object = \"index.html\"</p><p># AWS Managed Caching Policy (CachingDisabled)<br />  default_cache_behavior {<br />    # Using the CachingDisabled managed policy ID:<br />    cache_policy_id  = \"4135ea2d-6df8-44a3-9df3-4b5a84be39ad\"<br />    allowed_methods  = [\"GET\", \"HEAD\", \"OPTIONS\"]<br />    target_origin_id = local.s3_origin_id<br />  }</p><p>restrictions {<br />    geo_restriction {<br />      restriction_type = \"whitelist\"<br />      locations        = [\"US\", \"CA\", \"GB\", \"DE\"]<br />    }<br />  }</p><p>viewer_certificate {<br />    cloudfront_default_certificate = true<br />  }</p><p># ... other configuration ...<br />}<br /></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The CloudFront distribution argument layout is a complex structure composed of several sub-resources - these resources are laid out below.</p><h3 id=\"top-level-arguments\">Top-Level Arguments</h3><ul><li><code>aliases</code> (Optional) - Extra CNAMEs (alternate domain names), if any, for this distribution.</li><li><code>comment</code> (Optional) - Any comments you want to include about the distribution.</li><li><code>continuous_deployment_policy_id</code> (Optional) - Identifier of a continuous deployment policy. This argument should only be set on a production distribution. See the <a href=\"./cloudfront_continuous_deployment_policy.html.markdown\"><code>aws_cloudfront_continuous_deployment_policy</code> resource</a> for additional details.</li><li><code>custom_error_response</code> (Optional) - One or more <a href=\"#custom-error-response-arguments\">custom error response</a> elements (multiples allowed).</li><li><code>default_cache_behavior</code> (Required) - <a href=\"#default-cache-behavior-arguments\">Default cache behavior</a> for this distribution (maximum one). Requires either <code>cache_policy_id</code> (preferred) or <code>forwarded_values</code> (deprecated) be set.</li><li><code>default_root_object</code> (Optional) - Object that you want CloudFront to return (for example, index.html) when an end user requests the root URL.</li><li><code>enabled</code> (Required) - Whether the distribution is enabled to accept end user requests for content.</li><li><code>is_ipv6_enabled</code> (Optional) - Whether the IPv6 is enabled for the distribution.</li><li><code>http_version</code> (Optional) - Maximum HTTP version to support on the distribution. Allowed values are <code>http1.1</code>, <code>http2</code>, <code>http2and3</code> and <code>http3</code>. The default is <code>http2</code>.</li><li><code>logging_config</code> (Optional) - The <a href=\"#logging-config-arguments\">logging configuration</a> that controls how logs are written to your distribution (maximum one).</li><li><code>ordered_cache_behavior</code> (Optional) - Ordered list of <a href=\"#cache-behavior-arguments\">cache behaviors</a> resource for this distribution. List from top to bottom in order of precedence. The topmost cache behavior will have precedence 0.</li><li><code>origin</code> (Required) - One or more <a href=\"#origin-arguments\">origins</a> for this distribution (multiples allowed).</li><li><code>origin_group</code> (Optional) - One or more <a href=\"#origin-group-arguments\">origin_group</a> for this distribution (multiples allowed).</li><li><code>price_class</code> (Optional) - Price class for this distribution. One of <code>PriceClass_All</code>, <code>PriceClass_200</code>, <code>PriceClass_100</code>.</li><li><code>restrictions</code> (Required) - The <a href=\"#restrictions-arguments\">restriction configuration</a> for this distribution (maximum one).</li><li><code>staging</code> (Optional) - A Boolean that indicates whether this is a staging distribution. Defaults to <code>false</code>.</li><li><code>tags</code> - (Optional) A map of tags to assign to the resource. If configured with a provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a> present, tags with matching keys will overwrite those defined at the provider-level.</li><li><code>viewer_certificate</code> (Required) - The <a href=\"#viewer-certificate-arguments\">SSL configuration</a> for this distribution (maximum one).</li><li><code>web_acl_id</code> (Optional) - Unique identifier that specifies the AWS WAF web ACL, if any, to associate with this distribution. To specify a web ACL created using the latest version of AWS WAF (WAFv2), use the ACL ARN, for example <code>aws_wafv2_web_acl.example.arn</code>. To specify a web ACL created using AWS WAF Classic, use the ACL ID, for example <code>aws_waf_web_acl.example.id</code>. The WAF Web ACL must exist in the WAF Global (CloudFront) region and the credentials configuring this argument must have <code>waf:GetWebACL</code> permissions assigned.</li><li><code>retain_on_delete</code> (Optional) - Disables the distribution instead of deleting it when destroying the resource through Terraform. If this is set, the distribution needs to be deleted manually afterwards. Default: <code>false</code>.</li><li><code>wait_for_deployment</code> (Optional) - If enabled, the resource will wait for the distribution status to change from <code>InProgress</code> to <code>Deployed</code>. Setting this to<code>false</code> will skip the process. Default: <code>true</code>.</li></ul><h4 id=\"cache-behavior-arguments\">Cache Behavior Arguments</h4><p>~&gt; <strong>NOTE:</strong> To achieve the setting of 'Use origin cache headers' without a linked cache policy, use the following TTL values: <code>min_ttl</code> = 0, <code>max_ttl</code> = 31536000, <code>default_ttl</code> = 86400. See <a href=\"https://github.com/hashicorp/terraform-provider-aws/issues/19382\">this issue</a> for additional context.</p><ul><li><code>allowed_methods</code> (Required) - Controls which HTTP methods CloudFront processes and forwards to your Amazon S3 bucket or your custom origin.</li><li><code>cached_methods</code> (Required) - Controls whether CloudFront caches the response to requests using the specified HTTP methods.</li><li><code>cache_policy_id</code> (Optional) - Unique identifier of the cache policy that is attached to the cache behavior. If configuring the <code>default_cache_behavior</code> either <code>cache_policy_id</code> or <code>forwarded_values</code> must be set.</li><li><code>compress</code> (Optional) - Whether you want CloudFront to automatically compress content for web requests that include <code>Accept-Encoding: gzip</code> in the request header (default: <code>false</code>).</li><li><code>default_ttl</code> (Optional) - Default amount of time (in seconds) that an object is in a CloudFront cache before CloudFront forwards another request in the absence of an <code>Cache-Control max-age</code> or <code>Expires</code> header.</li><li><code>field_level_encryption_id</code> (Optional) - Field level encryption configuration ID.</li><li><code>forwarded_values</code> (Optional, <strong>Deprecated</strong> use <code>cache_policy_id</code> or <code>origin_request_policy_id</code> instead) - The <a href=\"#forwarded-values-arguments\">forwarded values configuration</a> that specifies how CloudFront handles query strings, cookies and headers (maximum one).</li><li><code>lambda_function_association</code> (Optional) - A <a href=\"#lambda-function-association\">config block</a> that triggers a lambda function with specific actions (maximum 4).</li><li><code>function_association</code> (Optional) - A <a href=\"#function-association\">config block</a> that triggers a cloudfront function with specific actions (maximum 2).</li><li><code>max_ttl</code> (Optional) - Maximum amount of time (in seconds) that an object is in a CloudFront cache before CloudFront forwards another request to your origin to determine whether the object has been updated. Only effective in the presence of <code>Cache-Control max-age</code>, <code>Cache-Control s-maxage</code>, and <code>Expires</code> headers.</li><li><code>min_ttl</code> (Optional) - Minimum amount of time that you want objects to stay in CloudFront caches before CloudFront queries your origin to see whether the object has been updated. Defaults to 0 seconds.</li><li><code>origin_request_policy_id</code> (Optional) - Unique identifier of the origin request policy that is attached to the behavior.</li><li><code>path_pattern</code> (Required) - Pattern (for example, <code>images/*.jpg</code>) that specifies which requests you want this cache behavior to apply to.</li><li><code>realtime_log_config_arn</code> (Optional) - ARN of the <a href=\"cloudfront_realtime_log_config.html\">real-time log configuration</a> that is attached to this cache behavior.</li><li><code>response_headers_policy_id</code> (Optional) - Identifier for a response headers policy.</li><li><code>smooth_streaming</code> (Optional) - Indicates whether you want to distribute media files in Microsoft Smooth Streaming format using the origin that is associated with this cache behavior.</li><li><code>target_origin_id</code> (Required) - Value of ID for the origin that you want CloudFront to route requests to when a request matches the path pattern either for a cache behavior or for the default cache behavior.</li><li><code>trusted_key_groups</code> (Optional) - List of key group IDs that CloudFront can use to validate signed URLs or signed cookies. See the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-trusted-signers.html\">CloudFront User Guide</a> for more information about this feature.</li><li><code>trusted_signers</code> (Optional) - List of AWS account IDs (or <code>self</code>) that you want to allow to create signed URLs for private content. See the <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-trusted-signers.html\">CloudFront User Guide</a> for more information about this feature.</li><li><code>viewer_protocol_policy</code> (Required) - Use this element to specify the protocol that users can use to access the files in the origin specified by TargetOriginId when a request matches the path pattern in PathPattern. One of <code>allow-all</code>, <code>https-only</code>, or <code>redirect-to-https</code>.</li></ul><h5 id=\"forwarded-values-arguments\">Forwarded Values Arguments</h5><ul><li><code>cookies</code> (Required) - The <a href=\"#cookies-arguments\">forwarded values cookies</a> that specifies how CloudFront handles cookies (maximum one).</li><li><code>headers</code> (Optional) - Headers, if any, that you want CloudFront to vary upon for this cache behavior. Specify <code>*</code> to include all headers.</li><li><code>query_string</code> (Required) - Indicates whether you want CloudFront to forward query strings to the origin that is associated with this cache behavior.</li><li><code>query_string_cache_keys</code> (Optional) - When specified, along with a value of <code>true</code> for <code>query_string</code>, all query strings are forwarded, however only the query string keys listed in this argument are cached. When omitted with a value of <code>true</code> for <code>query_string</code>, all query string keys are cached.</li></ul><h5 id=\"lambda-function-association\">Lambda Function Association</h5><p>Lambda@Edge allows you to associate an AWS Lambda Function with a predefined<br />event. You can associate a single function per event type. See <a href=\"http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/what-is-lambda-at-edge.html\">What is<br />Lambda@Edge</a><br />for more information.</p><p>Example configuration:</p><p>terraform<br />resource \"aws_cloudfront_distribution\" \"example\" {<br />  # ... other configuration ...</p><p># lambda_function_association is also supported by default_cache_behavior<br />  ordered_cache_behavior {<br />    # ... other configuration ...</p><pre><code>lambda_function_association {  event_type   = \"viewer-request\"  lambda_arn   = aws_lambda_function.example.qualified_arn  include_body = false}</code></pre><p>}<br />}<br /></p><ul><li><code>event_type</code> (Required) - Specific event to trigger this function. Valid values: <code>viewer-request</code>, <code>origin-request</code>, <code>viewer-response</code>, <code>origin-response</code>.</li><li><code>lambda_arn</code> (Required) - ARN of the Lambda function.</li><li><code>include_body</code> (Optional) - When set to true it exposes the request body to the lambda function. Defaults to false. Valid values: <code>true</code>, <code>false</code>.</li></ul><h5 id=\"function-association\">Function Association</h5><p>With CloudFront Functions in Amazon CloudFront, you can write lightweight functions in JavaScript for high-scale, latency-sensitive CDN customizations. You can associate a single function per event type. See <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/cloudfront-functions.html\">CloudFront Functions</a><br />for more information.</p><p>Example configuration:</p><p>terraform<br />resource \"aws_cloudfront_distribution\" \"example\" {<br />  # ... other configuration ...</p><p># function_association is also supported by default_cache_behavior<br />  ordered_cache_behavior {<br />    # ... other configuration ...</p><pre><code>function_association {  event_type   = \"viewer-request\"  function_arn = aws_cloudfront_function.example.arn}</code></pre><p>}<br />}<br /></p><ul><li><code>event_type</code> (Required) - Specific event to trigger this function. Valid values: <code>viewer-request</code> or <code>viewer-response</code>.</li><li><code>function_arn</code> (Required) - ARN of the CloudFront function.</li></ul><h5 id=\"cookies-arguments\">Cookies Arguments</h5><ul><li><code>forward</code> (Required) - Whether you want CloudFront to forward cookies to the origin that is associated with this cache behavior. You can specify <code>all</code>, <code>none</code> or <code>whitelist</code>. If <code>whitelist</code>, you must include the subsequent <code>whitelisted_names</code>.</li><li><code>whitelisted_names</code> (Optional) - If you have specified <code>whitelist</code> to <code>forward</code>, the whitelisted cookies that you want CloudFront to forward to your origin.</li></ul><h4 id=\"custom-error-response-arguments\">Custom Error Response Arguments</h4><ul><li><code>error_caching_min_ttl</code> (Optional) - Minimum amount of time you want HTTP error codes to stay in CloudFront caches before CloudFront queries your origin to see whether the object has been updated.</li><li><code>error_code</code> (Required) - 4xx or 5xx HTTP status code that you want to customize.</li><li><code>response_code</code> (Optional) - HTTP status code that you want CloudFront to return with the custom error page to the viewer.</li><li><code>response_page_path</code> (Optional) - Path of the custom error page (for example, <code>/custom_404.html</code>).</li></ul><h4 id=\"default-cache-behavior-arguments\">Default Cache Behavior Arguments</h4><p>The arguments for <code>default_cache_behavior</code> are the same as for<br /><a href=\"#cache-behavior-arguments\"><code>ordered_cache_behavior</code></a>, except for the <code>path_pattern</code><br />argument should not be specified.</p><h4 id=\"logging-config-arguments\">Logging Config Arguments</h4><ul><li><code>bucket</code> (Required) - Amazon S3 bucket to store the access logs in, for example, <code>myawslogbucket.s3.amazonaws.com</code>.</li><li><code>include_cookies</code> (Optional) - Whether to include cookies in access logs (default: <code>false</code>).</li><li><code>prefix</code> (Optional) - Prefix to the access log filenames for this distribution, for example, <code>myprefix/</code>.</li></ul><h4 id=\"origin-arguments\">Origin Arguments</h4><ul><li><code>connection_attempts</code> (Optional) - Number of times that CloudFront attempts to connect to the origin. Must be between 1-3. Defaults to 3.</li><li><code>connection_timeout</code> (Optional) - Number of seconds that CloudFront waits when trying to establish a connection to the origin. Must be between 1-10. Defaults to 10.</li><li><code>custom_origin_config</code> - The <a href=\"#custom-origin-config-arguments\">CloudFront custom origin</a> configuration information. If an S3 origin is required, use <code>origin_access_control_id</code> or <code>s3_origin_config</code> instead.</li><li><code>domain_name</code> (Required) - DNS domain name of either the S3 bucket, or web site of your custom origin.</li><li><code>custom_header</code> (Optional) - One or more sub-resources with <code>name</code> and <code>value</code> parameters that specify header data that will be sent to the origin (multiples allowed).</li><li><code>origin_access_control_id</code> (Optional) - Unique identifier of a <a href=\"/docs/providers/aws/r/cloudfront_origin_access_control.html\">CloudFront origin access control</a> for this origin.</li><li><code>origin_id</code> (Required) - Unique identifier for the origin.</li><li><code>origin_path</code> (Optional) - Optional element that causes CloudFront to request your content from a directory in your Amazon S3 bucket or your custom origin.</li><li><code>origin_shield</code> - The <a href=\"#origin-shield-arguments\">CloudFront Origin Shield</a> configuration information. Using Origin Shield can help reduce the load on your origin. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/origin-shield.html\">Using Origin Shield</a> in the Amazon CloudFront Developer Guide.</li><li><code>s3_origin_config</code> - The <a href=\"#s3-origin-config-arguments\">CloudFront S3 origin</a> configuration information. If a custom origin is required, use <code>custom_origin_config</code> instead.</li></ul><h5 id=\"custom-origin-config-arguments\">Custom Origin Config Arguments</h5><ul><li><code>http_port</code> (Required) - HTTP port the custom origin listens on.</li><li><code>https_port</code> (Required) - HTTPS port the custom origin listens on.</li><li><code>origin_protocol_policy</code> (Required) - Origin protocol policy to apply to your origin. One of <code>http-only</code>, <code>https-only</code>, or <code>match-viewer</code>.</li><li><code>origin_ssl_protocols</code> (Required) - SSL/TLS protocols that you want CloudFront to use when communicating with your origin over HTTPS. A list of one or more of <code>SSLv3</code>, <code>TLSv1</code>, <code>TLSv1.1</code>, and <code>TLSv1.2</code>.</li><li><code>origin_keepalive_timeout</code> - (Optional) The Custom KeepAlive timeout, in seconds. By default, AWS enforces an upper limit of <code>60</code>. But you can request an <a href=\"http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html#request-custom-request-timeout\">increase</a>. Defaults to <code>5</code>.</li><li><code>origin_read_timeout</code> - (Optional) The Custom Read timeout, in seconds. By default, AWS enforces an upper limit of <code>60</code>. But you can request an <a href=\"http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html#request-custom-request-timeout\">increase</a>. Defaults to <code>30</code>.</li></ul><h5 id=\"origin-shield-arguments\">Origin Shield Arguments</h5><ul><li><code>enabled</code> (Required) - Whether Origin Shield is enabled.</li><li><code>origin_shield_region</code> (Required) - AWS Region for Origin Shield. To specify a region, use the region code, not the region name. For example, specify the US East (Ohio) region as us-east-2.</li></ul><h5 id=\"s3-origin-config-arguments\">S3 Origin Config Arguments</h5><ul><li><code>origin_access_identity</code> (Required) - The <a href=\"/docs/providers/aws/r/cloudfront_origin_access_identity.html\">CloudFront origin access identity</a> to associate with the origin.</li></ul><h4 id=\"origin-group-arguments\">Origin Group Arguments</h4><ul><li><code>origin_id</code> (Required) - Unique identifier for the origin group.</li><li><code>failover_criteria</code> (Required) - The <a href=\"#failover-criteria-arguments\">failover criteria</a> for when to failover to the secondary origin.</li><li><code>member</code> (Required) - Ordered <a href=\"#member-arguments\">member</a> configuration blocks assigned to the origin group, where the first member is the primary origin. You must specify two members.</li></ul><h5 id=\"failover-criteria-arguments\">Failover Criteria Arguments</h5><ul><li><code>status_codes</code> (Required) - List of HTTP status codes for the origin group.</li></ul><h5 id=\"member-arguments\">Member Arguments</h5><ul><li><code>origin_id</code> (Required) - Unique identifier of the member origin.</li></ul><h4 id=\"restrictions-arguments\">Restrictions Arguments</h4><p>The <code>restrictions</code> sub-resource takes another single sub-resource named <code>geo_restriction</code> (see the example for usage).</p><p>The arguments of <code>geo_restriction</code> are:</p><ul><li><code>locations</code> (Required) - <a href=\"http://www.iso.org/iso/country_codes/iso_3166_code_lists/country_names_and_code_elements.htm\">ISO 3166-1-alpha-2 codes</a> for which you want CloudFront either to distribute your content (<code>whitelist</code>) or not distribute your content (<code>blacklist</code>). If the type is specified as <code>none</code> an empty array can be used.</li><li><code>restriction_type</code> (Required) - Method that you want to use to restrict distribution of your content by country: <code>none</code>, <code>whitelist</code>, or <code>blacklist</code>.</li></ul><h4 id=\"viewer-certificate-arguments\">Viewer Certificate Arguments</h4><ul><li><code>acm_certificate_arn</code> - ARN of the <a href=\"https://aws.amazon.com/certificate-manager/\">AWS Certificate Manager</a> certificate that you wish to use with this distribution. Specify this, <code>cloudfront_default_certificate</code>, or <code>iam_certificate_id</code>.  The ACM certificate must be in  US-EAST-1.</li><li><code>cloudfront_default_certificate</code> - <code>true</code> if you want viewers to use HTTPS to request your objects and you're using the CloudFront domain name for your distribution. Specify this, <code>acm_certificate_arn</code>, or <code>iam_certificate_id</code>.</li><li><code>iam_certificate_id</code> - IAM certificate identifier of the custom viewer certificate for this distribution if you are using a custom domain. Specify this, <code>acm_certificate_arn</code>, or <code>cloudfront_default_certificate</code>.</li><li><code>minimum_protocol_version</code> - Minimum version of the SSL protocol that you want CloudFront to use for HTTPS connections. Can only be set if <code>cloudfront_default_certificate = false</code>. See all possible values in <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/secure-connections-supported-viewer-protocols-ciphers.html\">this</a> table under \"Security policy.\" Some examples include: <code>TLSv1.2_2019</code> and <code>TLSv1.2_2021</code>. Default: <code>TLSv1</code>. <strong>NOTE</strong>: If you are using a custom certificate (specified with <code>acm_certificate_arn</code> or <code>iam_certificate_id</code>), and have specified <code>sni-only</code> in <code>ssl_support_method</code>, <code>TLSv1</code> or later must be specified. If you have specified <code>vip</code> in <code>ssl_support_method</code>, only <code>SSLv3</code> or <code>TLSv1</code> can be specified. If you have specified <code>cloudfront_default_certificate</code>, <code>TLSv1</code> must be specified.</li><li><code>ssl_support_method</code> - How you want CloudFront to serve HTTPS requests. One of <code>vip</code> or <code>sni-only</code>. Required if you specify <code>acm_certificate_arn</code> or <code>iam_certificate_id</code>. <strong>NOTE:</strong> <code>vip</code> causes CloudFront to use a dedicated IP address and may incur extra charges.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute Reference</h2><p>This resource exports the following attributes in addition to the arguments above:</p><ul><li><code>id</code> - Identifier for the distribution. For example: <code>EDFDVBD632BHDS5</code>.</li><li><code>arn</code> - ARN for the distribution. For example: <code>arn:aws:cloudfront::123456789012:distribution/EDFDVBD632BHDS5</code>, where <code>123456789012</code> is your AWS account ID.</li><li><code>caller_reference</code> - Internal value used by CloudFront to allow future updates to the distribution configuration.</li><li><code>status</code> - Current status of the distribution. <code>Deployed</code> if the distribution's information is fully propagated throughout the Amazon CloudFront system.</li><li><code>tags_all</code> - Map of tags assigned to the resource, including those inherited from the provider <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block\"><code>default_tags</code> configuration block</a>.</li><li><code>trusted_key_groups</code> - List of nested attributes for active trusted key groups, if the distribution is set up to serve private content with signed URLs.<ul><li><code>enabled</code> - <code>true</code> if any of the key groups have public keys that CloudFront can use to verify the signatures of signed URLs and signed cookies.</li><li><code>items</code> - List of nested attributes for each key group.<ul><li><code>key_group_id</code> - ID of the key group that contains the public keys.</li><li><code>key_pair_ids</code> - Set of CloudFront key pair IDs.</li></ul></li></ul></li><li><code>trusted_signers</code> - List of nested attributes for active trusted signers, if the distribution is set up to serve private content with signed URLs.<ul><li><code>enabled</code> - <code>true</code> if any of the AWS accounts listed as trusted signers have active CloudFront key pairs</li><li><code>items</code> - List of nested attributes for each trusted signer<ul><li><code>aws_account_number</code> - AWS account ID or <code>self</code></li><li><code>key_pair_ids</code> - Set of active CloudFront key pairs associated with the signer account</li></ul></li></ul></li><li><code>domain_name</code> - Domain name corresponding to the distribution. For example: <code>d604721fxaaqy9.cloudfront.net</code>.</li><li><code>last_modified_time</code> - Date and time the distribution was last modified.</li><li><code>in_progress_validation_batches</code> - Number of invalidation batches currently in progress.</li><li><code>etag</code> - Current version of the distribution's information. For example: <code>E2QWRUHAPOMQZL</code>.</li><li><code>hosted_zone_id</code> - CloudFront Route 53 zone ID that can be used to route an <a href=\"http://docs.aws.amazon.com/Route53/latest/APIReference/CreateAliasRRSAPI.html\">Alias Resource Record Set</a> to. This attribute is simply an alias for the zone ID <code>Z2FDTNDATAQYW2</code>.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>In Terraform v1.5.0 and later, use an <a href=\"https://developer.hashicorp.com/terraform/language/import\"><code>import</code> block</a> to import CloudFront Distributions using the <code>id</code>. For example:</p><p><code>terraformimport {  to = aws_cloudfront_distribution.distribution  id = \"E74FTE3EXAMPLE\"}</code></p><p>Using <code>terraform import</code>, import CloudFront Distributions using the <code>id</code>. For example:</p><p><code>console% terraform import aws_cloudfront_distribution.distribution E74FTE3EXAMPLE</code></p>", "description": "<h1 id=\"resource-aws_cloudfront_distribution\">Resource: aws_cloudfront_distribution</h1><p>Creates an Amazon CloudFront web distribution.</p><p>For information about CloudFront distributions, see the <a href=\"http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Introduction.html\">Amazon CloudFront Developer Guide</a>. For specific information about creating CloudFront web distributions, see the <a href=\"https://docs.aws.amazon.com/cloudfront/latest/APIReference/API_CreateDistribution.html\">POST Distribution</a> page in the Amazon CloudFront API Reference.</p><p>~&gt; <strong>NOTE:</strong> CloudFront distributions take about 15 minutes to reach a deployed state after creation or modification. During this time, deletes to resources will be blocked. If you need to delete a distribution that is enabled and you do not want to wait, you need to use the <code>retain_on_delete</code> flag.</p>"}