{"azurerm-netapp-volume": "<h1 id=\"azurerm_netapp_volume\">azurerm_netapp_volume</h1><p>Manages a NetApp Volume.</p>", "netapp-volume-usage": "<h2 id=\"netapp-volume-usage\">NetApp Volume Usage</h2><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><p>resource \"azurerm_virtual_network\" \"example\" {<br />  name                = \"example-virtualnetwork\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  address_space       = [\"10.0.0.0/16\"]<br />}</p><p>resource \"azurerm_subnet\" \"example\" {<br />  name                 = \"example-subnet\"<br />  resource_group_name  = azurerm_resource_group.example.name<br />  virtual_network_name = azurerm_virtual_network.example.name<br />  address_prefixes     = [\"10.0.2.0/24\"]</p><p>delegation {<br />    name = \"netapp\"</p><pre><code>service_delegation {  name    = \"Microsoft.Netapp/volumes\"  actions = [\"Microsoft.Network/networkinterfaces/*\", \"Microsoft.Network/virtualNetworks/subnets/join/action\"]}</code></pre><p>}<br />}</p><p>resource \"azurerm_netapp_account\" \"example\" {<br />  name                = \"example-netappaccount\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />}</p><p>resource \"azurerm_netapp_pool\" \"example\" {<br />  name                = \"example-netapppool\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  account_name        = azurerm_netapp_account.example.name<br />  service_level       = \"Premium\"<br />  size_in_tb          = 4<br />}</p><p>resource \"azurerm_netapp_volume\" \"example\" {<br />  lifecycle {<br />    prevent_destroy = true<br />  }</p><p>name                       = \"example-netappvolume\"<br />  location                   = azurerm_resource_group.example.location<br />  zone                       = \"1\"<br />  resource_group_name        = azurerm_resource_group.example.name<br />  account_name               = azurerm_netapp_account.example.name<br />  pool_name                  = azurerm_netapp_pool.example.name<br />  volume_path                = \"my-unique-file-path\"<br />  service_level              = \"Premium\"<br />  subnet_id                  = azurerm_subnet.example.id<br />  network_features           = \"Basic\"<br />  protocols                  = [\"NFSv4.1\"]<br />  security_style             = \"unix\"<br />  storage_quota_in_gb        = 100<br />  snapshot_directory_visible = false</p><p># When creating volume from a snapshot<br />  create_from_snapshot_resource_id = \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.NetApp/netAppAccounts/account1/capacityPools/pool1/volumes/volume1/snapshots/snapshot1\"</p><p># Following section is only required if deploying a data protection volume (secondary)<br />  # to enable Cross-Region Replication feature<br />  data_protection_replication {<br />    endpoint_type             = \"dst\"<br />    remote_volume_location    = azurerm_resource_group.example.location<br />    remote_volume_resource_id = azurerm_netapp_volume.example.id<br />    replication_frequency     = \"10minutes\"<br />  }</p><p># Enabling Snapshot Policy for the volume<br />  # Note: this cannot be used in conjunction with data_protection_replication when endpoint_type is dst<br />  data_protection_snapshot_policy {<br />    snapshot_policy_id = \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.NetApp/netAppAccounts/account1/snapshotPolicies/snapshotpolicy1\"<br />  }<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) The name of the NetApp Volume. Changing this forces a new resource to be created.</p></li><li><p><code>resource_group_name</code> - (Required) The name of the resource group where the NetApp Volume should be created. Changing this forces a new resource to be created.</p></li><li><p><code>location</code> - (Required) Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.</p></li><li><p><code>zone</code> - (Optional) Specifies the Availability Zone in which the Volume should be located. Possible values are <code>1</code>, <code>2</code> and <code>3</code>. Changing this forces a new resource to be created. This feature is currently in preview, for more information on how to enable it, please refer to <a href=\"https://learn.microsoft.com/en-us/azure/azure-netapp-files/manage-availability-zone-volume-placement#register-the-feature\">Manage availability zone volume placement for Azure NetApp Files</a>.</p></li><li><p><code>account_name</code> - (Required) The name of the NetApp account in which the NetApp Pool should be created. Changing this forces a new resource to be created.</p></li><li><p><code>volume_path</code> - (Required) A unique file path for the volume. Used when creating mount targets. Changing this forces a new resource to be created.</p></li><li><p><code>pool_name</code> - (Required) The name of the NetApp pool in which the NetApp Volume should be created. Changing this forces a new resource to be created.</p></li><li><p><code>service_level</code> - (Required) The target performance of the file system. Valid values include <code>Premium</code>, <code>Standard</code>, or <code>Ultra</code>. Changing this forces a new resource to be created.</p></li><li><p><code>azure_vmware_data_store_enabled</code> - (Optional) Is the NetApp Volume enabled for Azure VMware Solution (AVS) datastore purpose. Defaults to <code>false</code>. Changing this forces a new resource to be created.</p></li><li><p><code>protocols</code> - (Optional) The target volume protocol expressed as a list. Supported single value include <code>CIFS</code>, <code>NFSv3</code>, or <code>NFSv4.1</code>. If argument is not defined it will default to <code>NFSv3</code>. Changing this forces a new resource to be created and data will be lost. Dual protocol scenario is supported for CIFS and NFSv3, for more information, please refer to <a href=\"https://docs.microsoft.com/azure/azure-netapp-files/create-volumes-dual-protocol\">Create a dual-protocol volume for Azure NetApp Files</a> document.</p></li><li><p><code>security_style</code> - (Optional) Volume security style, accepted values are <code>unix</code> or <code>ntfs</code>. If not provided, single-protocol volume is created defaulting to <code>unix</code> if it is <code>NFSv3</code> or <code>NFSv4.1</code> volume, if <code>CIFS</code>, it will default to <code>ntfs</code>. In a dual-protocol volume, if not provided, its value will be <code>ntfs</code>. Changing this forces a new resource to be created.</p></li><li><p><code>subnet_id</code> - (Required) The ID of the Subnet the NetApp Volume resides in, which must have the <code>Microsoft.NetApp/volumes</code> delegation. Changing this forces a new resource to be created.</p></li><li><p><code>network_features</code> - (Optional) Indicates which network feature to use, accepted values are <code>Basic</code> or <code>Standard</code>, it defaults to <code>Basic</code> if not defined. This is a feature in public preview and for more information about it and how to register, please refer to <a href=\"https://docs.microsoft.com/en-us/azure/azure-netapp-files/configure-network-features\">Configure network features for an Azure NetApp Files volume</a>. Changing this forces a new resource to be created.</p></li><li><p><code>storage_quota_in_gb</code> - (Required) The maximum Storage Quota allowed for a file system in Gigabytes.</p></li><li><p><code>snapshot_directory_visible</code> - (Optional) Specifies whether the .snapshot (NFS clients) or ~snapshot (SMB clients) path of a volume is visible, default value is true.</p></li><li><p><code>create_from_snapshot_resource_id</code> - (Optional) Creates volume from snapshot. Following properties must be the same as the original volume where the snapshot was taken from: <code>protocols</code>, <code>subnet_id</code>, <code>location</code>, <code>service_level</code>, <code>resource_group_name</code>, <code>account_name</code> and <code>pool_name</code>. Changing this forces a new resource to be created.</p></li><li><p><code>data_protection_replication</code> - (Optional) A <code>data_protection_replication</code> block as defined below. Changing this forces a new resource to be created.</p></li><li><p><code>data_protection_snapshot_policy</code> - (Optional) A <code>data_protection_snapshot_policy</code> block as defined below.</p></li><li><p><code>export_policy_rule</code> - (Optional) One or more <code>export_policy_rule</code> block defined below.</p></li><li><p><code>throughput_in_mibps</code> - (Optional) Throughput of this volume in Mibps.</p></li><li><p><code>tags</code> - (Optional) A mapping of tags to assign to the resource.</p></li></ul><p>-&gt; <strong>Note:</strong> It is highly recommended to use the <strong>lifecycle</strong> property as noted in the example since it will prevent an accidental deletion of the volume if the <code>protocols</code> argument changes to a different protocol type.</p><hr /><p>An <code>export_policy_rule</code> block supports the following:</p><ul><li><p><code>rule_index</code> - (Required) The index number of the rule.</p></li><li><p><code>allowed_clients</code> - (Required) A list of allowed clients IPv4 addresses.</p></li><li><p><code>protocols_enabled</code> - (Optional) A list of allowed protocols. Valid values include <code>CIFS</code>, <code>NFSv3</code>, or <code>NFSv4.1</code>. Only one value is supported at this time. This replaces the previous arguments: <code>cifs_enabled</code>, <code>nfsv3_enabled</code> and <code>nfsv4_enabled</code>.</p></li><li><p><code>unix_read_only</code> - (Optional) Is the file system on unix read only?</p></li><li><p><code>unix_read_write</code> - (Optional) Is the file system on unix read and write?</p></li><li><p><code>root_access_enabled</code> - (Optional) Is root access permitted to this volume?</p></li></ul><hr /><p>A <code>data_protection_replication</code> block is used when enabling the Cross-Region Replication (CRR) data protection option by deploying two Azure NetApp Files Volumes, one to be a primary volume and the other one will be the secondary, the secondary will have this block and will reference the primary volume, each volume must be in a supported <a href=\"https://docs.microsoft.com/azure/azure-netapp-files/cross-region-replication-introduction#supported-region-pairs\">region pair</a> and it supports the following:</p><ul><li><p><code>endpoint_type</code> - (Optional) The endpoint type, default value is <code>dst</code> for destination.</p></li><li><p><code>remote_volume_location</code> - (Required) Location of the primary volume. Changing this forces a new resource to be created.</p></li><li><p><code>remote_volume_resource_id</code> - (Required) Resource ID of the primary volume.</p></li><li><p><code>replication_frequency</code> - (Required) Replication frequency, supported values are '10minutes', 'hourly', 'daily', values are case sensitive.</p></li></ul><p>A full example of the <code>data_protection_replication</code> attribute can be found in <a href=\"https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/netapp/volume_crr\">the <code>./examples/netapp/volume_crr</code> directory within the GitHub Repository</a></p><p>~&gt; <strong>NOTE:</strong> <code>data_protection_replication</code> can be defined only once per secondary volume, adding a second instance of it is not supported.</p><hr /><p>A <code>data_protection_snapshot_policy</code> block is used when automatic snapshots for a volume based on a specific snapshot policy. It supports the following:</p><ul><li><code>snapshot_policy_id</code> - (Required) Resource ID of the snapshot policy to apply to the volume.</li></ul><p>A full example of the <code>data_protection_snapshot_policy</code> attribute usage can be found in <a href=\"https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/netapp/nfsv3_volume_with_snapshot_policy\">the <code>./examples/netapp/nfsv3_volume_with_snapshot_policy</code> directory within the GitHub Repository</a></p><p>~&gt; <strong>NOTE:</strong> <code>data_protection_snapshot_policy</code> block can be used alone or with data_protection_replication in the primary volume only, if enabling it in the secondary, an error will be thrown.</p><hr />", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><p><code>id</code> - The ID of the NetApp Volume.</p></li><li><p><code>mount_ip_addresses</code> - A list of IPv4 Addresses which should be used to mount the volume.</p></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 60 minutes) Used when creating the NetApp Volume.</li><li><code>update</code> - (Defaults to 60 minutes) Used when updating the NetApp Volume.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the NetApp Volume.</li><li><code>delete</code> - (Defaults to 60 minutes) Used when deleting the NetApp Volume.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>NetApp Volumes can be imported using the <code>resource id</code>, e.g.</p><p>shell<br />terraform import azurerm_netapp_volume.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.NetApp/netAppAccounts/account1/capacityPools/pool1/volumes/volume1</p>", "description": "<h1 id=\"azurerm_netapp_volume\">azurerm_netapp_volume</h1><p>Manages a NetApp Volume.</p>"}