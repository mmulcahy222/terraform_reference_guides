{"azurerm-databricks-workspace-customer-managed-key": "<h1 id=\"azurerm_databricks_workspace_customer_managed_key\">azurerm_databricks_workspace_customer_managed_key</h1><p>Manages a Customer Managed Key for a Databricks Workspace root DBFS</p><p>!&gt;<strong>IMPORTANT:</strong> This resource has been deprecated and will be removed from the 4.0 Azure provider. Please use the <code>azurerm_databricks_workspace_root_dbfs_customer_managed_key</code> resource instead.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>data \"azurerm_client_config\" \"current\" {}</p><br /><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><br /><p>resource \"azurerm_databricks_workspace\" \"example\" {<br />  name                = \"databricks-test\"<br />  resource_group_name = azurerm_resource_group.example.name<br />  location            = azurerm_resource_group.example.location<br />  sku                 = \"premium\"</p><br /><p>customer_managed_key_enabled = true</p><br /><p>tags = {<br />    Environment = \"Production\"<br />  }<br />}</p><br /><p>resource \"azurerm_databricks_workspace_root_dbfs_customer_managed_key\" \"example\" {<br />  depends_on = [azurerm_key_vault_access_policy.databricks]</p><br /><p>workspace_id     = azurerm_databricks_workspace.example.id<br />  key_vault_key_id = azurerm_key_vault_key.example.id<br />}</p><br /><p>resource \"azurerm_key_vault\" \"example\" {<br />  name                = \"examplekeyvault\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  tenant_id           = data.azurerm_client_config.current.tenant_id<br />  sku_name            = \"premium\"</p><br /><p>purge_protection_enabled   = true<br />  soft_delete_retention_days = 7<br />}</p><br /><p>resource \"azurerm_key_vault_key\" \"example\" {<br />  depends_on = [azurerm_key_vault_access_policy.terraform]</p><br /><p>name         = \"example-certificate\"<br />  key_vault_id = azurerm_key_vault.example.id<br />  key_type     = \"RSA\"<br />  key_size     = 2048</p><br /><p>key_opts = [<br />    \"decrypt\",<br />    \"encrypt\",<br />    \"sign\",<br />    \"unwrapKey\",<br />    \"verify\",<br />    \"wrapKey\",<br />  ]<br />}</p><br /><p>resource \"azurerm_key_vault_access_policy\" \"terraform\" {<br />  key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = azurerm_key_vault.example.tenant_id<br />  object_id    = data.azurerm_client_config.current.object_id</p><br /><p>key_permissions = [<br />    \"Create\",<br />    \"Delete\",<br />    \"Get\",<br />    \"Purge\",<br />    \"Recover\",<br />    \"Update\",<br />    \"List\",<br />    \"Decrypt\",<br />    \"Sign\",<br />    \"GetRotationPolicy\",<br />  ]<br />}</p><br /><p>resource \"azurerm_key_vault_access_policy\" \"databricks\" {<br />  depends_on = [azurerm_databricks_workspace.example]</p><br /><p>key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = azurerm_databricks_workspace.example.storage_account_identity.0.tenant_id<br />  object_id    = azurerm_databricks_workspace.example.storage_account_identity.0.principal_id</p><br /><p>key_permissions = [<br />    \"Create\",<br />    \"Delete\",<br />    \"Get\",<br />    \"Purge\",<br />    \"Recover\",<br />    \"Update\",<br />    \"List\",<br />    \"Decrypt\",<br />    \"Sign\"<br />  ]<br />}</p><br />", "example-hcl-configurations": "<h2 id=\"example-hcl-configurations\">Example HCL Configurations</h2><ul><li><a href=\"https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/databricks/customer-managed-key/dbfs\">Databricks Workspace with Root Databricks File System Customer Managed Keys</a></li><li><a href=\"https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/databricks/customer-managed-key/managed-services\">Databricks Workspace with Customer Managed Keys for Managed Services</a></li><li><a href=\"https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/private-endpoint/databricks/managed-services\">Databricks Workspace with Private Endpoint, Customer Managed Keys for Managed Services and Root Databricks File System Customer Managed Keys</a></li></ul>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>workspace_id</code> - (Required) The ID of the Databricks Workspace..</p></li><li><p><code>key_vault_key_id</code> - (Required) The ID of the Key Vault.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><code>id</code> - The ID of the Databricks Workspace.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 30 minutes) Used when creating the Customer Managed Key for this Databricks Workspace.</li><li><code>update</code> - (Defaults to 30 minutes) Used when updating the Customer Managed Key for this Databricks Workspace.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Customer Managed Key for this Databricks Workspace.</li><li><code>delete</code> - (Defaults to 30 minutes) Used when deleting the Customer Managed Key for this Databricks Workspace.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Databricks Workspace Customer Managed Key can be imported using the <code>resource id</code>, e.g.</p><p>shell<br />terraform import azurerm_databricks_workspace_customer_managed_key.workspace1 /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.Databricks/workspaces/workspace1</p>", "description": "<h1 id=\"azurerm_databricks_workspace_customer_managed_key\">azurerm_databricks_workspace_customer_managed_key</h1><p>Manages a Customer Managed Key for a Databricks Workspace root DBFS</p><p>!&gt;<strong>IMPORTANT:</strong> This resource has been deprecated and will be removed from the 4.0 Azure provider. Please use the <code>azurerm_databricks_workspace_root_dbfs_customer_managed_key</code> resource instead.</p>"}