{"azurerm-cdn-frontdoor-secret": "<h1 id=\"azurerm_cdn_frontdoor_secret\">azurerm_cdn_frontdoor_secret</h1><p>Manages a Front Door (standard/premium) Secret.</p>", "required-key-vault-permissions": "<h2 id=\"required-key-vault-permissions\">Required Key Vault Permissions</h2><p>!&gt;<strong>IMPORTANT:</strong> You must add an <code>Access Policy</code> to your <code>azurerm_key_vault</code> for the <code>Microsoft.AzurefrontDoor-Cdn</code> Enterprise Application Object ID.</p><p>This can be created by running Az Powershell command like this:</p><p><code>New-AzADServicePrincipal -ApplicationId \"00000000-0000-0000-0000-000000000000\"</code></p><table><thead><tr><th align=\"left\">Object ID</th><th align=\"center\">Key Permissions</th><th align=\"center\">Secret Permissions</th><th align=\"center\">Certificate Permissions</th></tr></thead><tbody><tr><td align=\"left\"><code>Microsoft.Azure.Cdn</code> Object ID</td><td align=\"center\">-</td><td align=\"center\"><strong>Get</strong></td><td align=\"center\">-</td></tr><tr><td align=\"left\">Your Personal AAD Object ID</td><td align=\"center\">-</td><td align=\"center\"><strong>Get</strong> and <strong>List</strong></td><td align=\"center\"><strong>Get</strong>, <strong>List</strong>, <strong>Purge</strong> and <strong>Recover</strong></td></tr><tr><td align=\"left\">Terraform Service Principal</td><td align=\"center\">-</td><td align=\"center\"><strong>Get</strong></td><td align=\"center\"><strong>Get</strong>, <strong>Import</strong>, <strong>Delete</strong> and <strong>Purge</strong></td></tr></tbody></table><p>-&gt;<strong>NOTE:</strong> You only need to add the <code>Access Policy</code> for your personal AAD Object ID if you are planning to view the <code>secrets</code> via the Azure Portal.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p><br />data \"azurerm_client_config\" \"current\" {}<br />data \"azuread_service_principal\" \"frontdoor\" {<br />  display_name = \"Microsoft.Azure.Cdn\"<br />}</p><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-cdn-frontdoor\"<br />  location = \"West Europe\"<br />}</p><p>resource \"azurerm_key_vault\" \"example\" {<br />  name                       = \"example-keyvault\"<br />  location                   = azurerm_resource_group.example.location<br />  resource_group_name        = azurerm_resource_group.example.name<br />  tenant_id                  = data.azurerm_client_config.current.tenant_id<br />  sku_name                   = \"premium\"<br />  soft_delete_retention_days = 7</p><p>network_acls {<br />    default_action = \"Deny\"<br />    bypass         = \"AzureServices\"<br />    ip_rules       = [\"10.0.0.0/24\"]<br />  }</p><p># CDN Front Door Enterprise Application Object ID(e.g. Microsoft.Azure.Cdn)<br />  access_policy {<br />    tenant_id = data.azurerm_client_config.current.tenant_id<br />    object_id = data.azuread_service_principal.frontdoor.object_id</p><pre><code>secret_permissions = [  \"Get\",]</code></pre><p>}</p><p># Terraform Service Principal<br />  access_policy {<br />    tenant_id = data.azurerm_client_config.current.tenant_id<br />    object_id = data.azurerm_client_config.current.object_id # &lt;- Object Id of the Service Principal that Terraform is running as</p><pre><code>certificate_permissions = [  \"Get\",  \"Import\",  \"Delete\",  \"Purge\"]secret_permissions = [  \"Get\",]</code></pre><p>}<br />}</p><p>resource \"azurerm_key_vault_certificate\" \"example\" {<br />  name         = \"example-cert\"<br />  key_vault_id = azurerm_key_vault.example.id</p><p>certificate {<br />    contents = filebase64(\"my-certificate.pfx\")<br />  }<br />}</p><p>resource \"azurerm_cdn_frontdoor_profile\" \"example\" {<br />  name                = \"example-cdn-profile\"<br />  resource_group_name = azurerm_resource_group.example.name<br />  sku_name            = \"Standard_AzureFrontDoor\"<br />}</p><p>resource \"azurerm_cdn_frontdoor_secret\" \"example\" {<br />  name                     = \"example-customer-managed-secret\"<br />  cdn_frontdoor_profile_id = azurerm_cdn_frontdoor_profile.example.id</p><p>secret {<br />    customer_certificate {<br />      key_vault_certificate_id = azurerm_key_vault_certificate.example.id<br />    }<br />  }<br />}<br /></p>", "arguments-reference": "<h2 id=\"arguments-reference\">Arguments Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) The name which should be used for this Front Door Secret. Possible values must start with a letter or a number, only contain letters, numbers and hyphens and have a length of between 2 and 260 characters. Changing this forces a new Front Door Secret to be created.</p></li><li><p><code>cdn_frontdoor_profile_id</code> - (Required) The Resource ID of the Front Door Profile. Changing this forces a new Front Door Secret to be created.</p></li><li><p><code>secret</code> - (Required) A <code>secret</code> block as defined below. Changing this forces a new Front Door Secret to be created.</p></li></ul><hr /><p>A <code>secret</code> block supports the following:</p><ul><li><code>customer_certificate</code> - (Required) A <code>customer_certificate</code> block as defined below. Changing this forces a new Front Door Secret to be created.</li></ul><hr /><p>A <code>customer_certificate</code> block supports the following:</p><ul><li><code>key_vault_certificate_id</code> - (Required) The ID of the Key Vault certificate resource to use. Changing this forces a new Front Door Secret to be created.</li></ul><p>-&gt;<strong>NOTE:</strong> If you would like to use the <strong>latest version</strong> of the Key Vault Certificate use the Key Vault Certificates <code>versionless_id</code> attribute as the <code>key_vault_certificate_id</code> fields value(e.g. <code>key_vault_certificate_id = azurerm_key_vault_certificate.example.versionless_id</code>).</p><ul><li><code>subject_alternative_names</code> - (Computed) One or more <code>subject alternative names</code> contained within the key vault certificate.</li></ul><hr />", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><p><code>id</code> - The ID of the Front Door Secret.</p></li><li><p><code>cdn_frontdoor_profile_name</code> - The name of the Front Door Profile containing this Front Door Secret.</p></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/docs/configuration/resources.html#timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 30 minutes) Used when creating the Front Door Secret.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Front Door Secret.</li><li><code>delete</code> - (Defaults to 30 minutes) Used when deleting the Front Door Secret.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Front Door Secrets can be imported using the <code>resource id</code>, e.g.</p><p><code>shellterraform import azurerm_cdn_frontdoor_secret.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/resourceGroup1/providers/Microsoft.Cdn/profiles/profile1/secrets/secrets1</code></p>", "description": "<h1 id=\"azurerm_cdn_frontdoor_secret\">azurerm_cdn_frontdoor_secret</h1><p>Manages a Front Door (standard/premium) Secret.</p>"}