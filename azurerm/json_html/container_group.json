{"azurerm-container-group": "<h1 id=\"azurerm_container_group\">azurerm_container_group</h1><p>Manages as an Azure Container Group instance.</p><p>~&gt; <strong>Note</strong> <code>network_profile_id</code> is <a href=\"https://docs.microsoft.com/en-us/azure/container-instances/container-instances-vnet\">deprecated</a> by Azure. For users who want to continue to manage existing <code>azurerm_container_group</code> that rely on <code>network_profile_id</code>, please stay on provider versions prior to v3.16.0. Otherwise, use <code>subnet_ids</code> instead.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>This example provisions a Basic Container. Other examples of the <code>azurerm_container_group</code> resource can be found in <a href=\"https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/container-instance\">the <code>./examples/container-instance</code> directory within the GitHub Repository</a>.</p><p><br />resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><p>resource \"azurerm_container_group\" \"example\" {<br />  name                = \"example-continst\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  ip_address_type     = \"Public\"<br />  dns_name_label      = \"aci-label\"<br />  os_type             = \"Linux\"</p><p>container {<br />    name   = \"hello-world\"<br />    image  = \"mcr.microsoft.com/azuredocs/aci-helloworld:latest\"<br />    cpu    = \"0.5\"<br />    memory = \"1.5\"</p><pre><code>ports {  port     = 443  protocol = \"TCP\"}</code></pre><p>}</p><p>container {<br />    name   = \"sidecar\"<br />    image  = \"mcr.microsoft.com/azuredocs/aci-tutorial-sidecar\"<br />    cpu    = \"0.5\"<br />    memory = \"1.5\"<br />  }</p><p>tags = {<br />    environment = \"testing\"<br />  }<br />}<br /></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) Specifies the name of the Container Group. Changing this forces a new resource to be created.</p></li><li><p><code>resource_group_name</code> - (Required) The name of the resource group in which to create the Container Group. Changing this forces a new resource to be created.</p></li><li><p><code>location</code> - (Required) Specifies the supported Azure location where the resource exists. Changing this forces a new resource to be created.</p></li><li><p><code>sku</code> - (Optional) Specifies the sku of the Container Group. Possible values are <code>Confidential</code>, <code>Dedicated</code> and <code>Standard</code>. Defaults to <code>Standard</code>. Changing this forces a new resource to be created.</p></li><li><p><code>identity</code> - (Optional) An <code>identity</code> block as defined below.</p></li><li><p><code>init_container</code> - (Optional) The definition of an init container that is part of the group as documented in the <code>init_container</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>container</code> - (Required) The definition of a container that is part of the group as documented in the <code>container</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>os_type</code> - (Required) The OS for the container group. Allowed values are <code>Linux</code> and <code>Windows</code>. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>Note:</strong> if <code>os_type</code> is set to <code>Windows</code> currently only a single <code>container</code> block is supported. Windows containers are not supported in virtual networks.</p><hr /><ul><li><p><code>dns_config</code> - (Optional) A <code>dns_config</code> block as documented below. Changing this forces a new resource to be created.</p></li><li><p><code>diagnostics</code> - (Optional) A <code>diagnostics</code> block as documented below. Changing this forces a new resource to be created.</p></li><li><p><code>dns_name_label</code> - (Optional) The DNS label/name for the container group's IP. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>Note:</strong> DNS label/name is not supported when deploying to virtual networks.</p><ul><li><p><code>dns_name_label_reuse_policy</code> - (Optional) The value representing the security enum. <code>Noreuse</code>, <code>ResourceGroupReuse</code>, <code>SubscriptionReuse</code>, <code>TenantReuse</code> or <code>Unsecure</code>. Defaults to <code>Unsecure</code>. </p></li><li><p><code>exposed_port</code> - (Optional) Zero or more <code>exposed_port</code> blocks as defined below. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>Note:</strong> The <code>exposed_port</code> can only contain ports that are also exposed on one or more containers in the group.</p><ul><li><code>ip_address_type</code> - (Optional) Specifies the IP address type of the container. <code>Public</code>, <code>Private</code> or <code>None</code>. Changing this forces a new resource to be created. If set to <code>Private</code>, <code>subnet_ids</code> also needs to be set.</li></ul><p>~&gt; <strong>Note:</strong> <code>dns_name_label</code> and <code>os_type</code> set to <code>windows</code> are not compatible with <code>Private</code> <code>ip_address_type</code></p><ul><li><p><code>key_vault_key_id</code> - (Optional) The Key Vault key URI for CMK encryption. Changing this forces a new resource to be created.</p></li><li><p><code>subnet_ids</code> - (Optional) The subnet resource IDs for a container group. Changing this forces a new resource to be created.</p></li><li><p><code>image_registry_credential</code> - (Optional) An <code>image_registry_credential</code> block as documented below. Changing this forces a new resource to be created.</p></li><li><p><code>restart_policy</code> - (Optional) Restart policy for the container group. Allowed values are <code>Always</code>, <code>Never</code>, <code>OnFailure</code>. Defaults to <code>Always</code>. Changing this forces a new resource to be created.</p></li><li><p><code>zones</code> - (Optional) A list of Availability Zones in which this Container Group is located. Changing this forces a new resource to be created.</p></li><li><p><code>tags</code> - (Optional) A mapping of tags to assign to the resource.</p></li></ul><hr /><p>An <code>identity</code> block supports the following:</p><ul><li><code>type</code> - (Required) Specifies the type of Managed Service Identity that should be configured on this Container Group. Possible values are <code>SystemAssigned</code>, <code>UserAssigned</code>, <code>SystemAssigned, UserAssigned</code> (to enable both).</li></ul><p>~&gt; <strong>NOTE:</strong> When <code>type</code> is set to <code>SystemAssigned</code>, the identity of the Principal ID can be retrieved after the container group has been created. See <a href=\"https://docs.microsoft.com/azure/active-directory/managed-service-identity/overview\">documentation</a> for more information.</p><ul><li><code>identity_ids</code> - (Optional) Specifies a list of User Assigned Managed Identity IDs to be assigned to this Container Group.</li></ul><p>~&gt; <strong>NOTE:</strong> This is required when <code>type</code> is set to <code>UserAssigned</code> or <code>SystemAssigned, UserAssigned</code>.</p><p>~&gt; <strong>NOTE:</strong> Currently you can't use a managed identity in a container group deployed to a virtual network.</p><hr /><p>An <code>init_container</code> block supports:</p><ul><li><p><code>name</code> - (Required) Specifies the name of the Container. Changing this forces a new resource to be created.</p></li><li><p><code>image</code> - (Required) The container image name. Changing this forces a new resource to be created.</p></li><li><p><code>environment_variables</code> - (Optional) A list of environment variables to be set on the container. Specified as a map of name/value pairs. Changing this forces a new resource to be created.</p></li><li><p><code>secure_environment_variables</code> - (Optional) A list of sensitive environment variables to be set on the container. Specified as a map of name/value pairs. Changing this forces a new resource to be created.</p></li><li><p><code>commands</code> - (Optional) A list of commands which should be run on the container. Changing this forces a new resource to be created.</p></li><li><p><code>volume</code> - (Optional) The definition of a volume mount for this container as documented in the <code>volume</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>security</code> - (Optional) The definition of the security context for this container as documented in the <code>security</code> block below. Changing this forces a new resource to be created.</p></li></ul><hr /><p>A <code>container</code> block supports:</p><ul><li><p><code>name</code> - (Required) Specifies the name of the Container. Changing this forces a new resource to be created.</p></li><li><p><code>image</code> - (Required) The container image name. Changing this forces a new resource to be created.</p></li><li><p><code>cpu</code> - (Required) The required number of CPU cores of the containers. Changing this forces a new resource to be created.</p></li><li><p><code>memory</code> - (Required) The required memory of the containers in GB. Changing this forces a new resource to be created.</p></li><li><p><code>gpu</code> - (Optional) A <code>gpu</code> block as defined below. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>Note:</strong> Gpu resources are currently only supported in Linux containers.</p><ul><li><p><code>cpu_limit</code> - (Optional) The upper limit of the number of CPU cores of the containers.</p></li><li><p><code>memory_limit</code> - (Optional) The the upper limit of the memory of the containers in GB.</p></li><li><p><code>gpu_limit</code> - (Optional) A <code>gpu_limit</code> block as defined below.</p></li><li><p><code>ports</code> - (Optional) A set of public ports for the container. Changing this forces a new resource to be created. Set as documented in the <code>ports</code> block below.</p></li><li><p><code>environment_variables</code> - (Optional) A list of environment variables to be set on the container. Specified as a map of name/value pairs. Changing this forces a new resource to be created.</p></li><li><p><code>secure_environment_variables</code> - (Optional) A list of sensitive environment variables to be set on the container. Specified as a map of name/value pairs. Changing this forces a new resource to be created.</p></li><li><p><code>readiness_probe</code> - (Optional) The definition of a readiness probe for this container as documented in the <code>readiness_probe</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>liveness_probe</code> - (Optional) The definition of a readiness probe for this container as documented in the <code>liveness_probe</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>commands</code> - (Optional) A list of commands which should be run on the container. Changing this forces a new resource to be created.</p></li><li><p><code>volume</code> - (Optional) The definition of a volume mount for this container as documented in the <code>volume</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>security</code> - (Optional) The definition of the security context for this container as documented in the <code>security</code> block below. Changing this forces a new resource to be created.</p></li></ul><hr /><p>An <code>exposed_port</code> block supports:</p><ul><li><p><code>port</code> - (Optional) The port number the container will expose. Changing this forces a new resource to be created.</p></li><li><p><code>protocol</code> - (Optional) The network protocol associated with port. Possible values are <code>TCP</code> &amp; <code>UDP</code>. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>Note:</strong> Removing all <code>exposed_port</code> blocks requires setting <code>exposed_port = []</code>.</p><hr /><p>A <code>diagnostics</code> block supports:</p><ul><li><code>log_analytics</code> - (Required) A <code>log_analytics</code> block as defined below. Changing this forces a new resource to be created.</li></ul><hr /><p>An <code>image_registry_credential</code> block supports:</p><ul><li><p><code>user_assigned_identity_id</code> - (Optional) The identity ID for the private registry. Changing this forces a new resource to be created.</p></li><li><p><code>username</code> - (Optional) The username with which to connect to the registry. Changing this forces a new resource to be created.</p></li><li><p><code>password</code> - (Optional) The password with which to connect to the registry. Changing this forces a new resource to be created.</p></li><li><p><code>server</code> - (Required) The address to use to connect to the registry without protocol (\"https\"/\"http\"). For example: \"myacr.acr.io\". Changing this forces a new resource to be created.</p></li></ul><hr /><p>A <code>log_analytics</code> block supports:</p><ul><li><p><code>log_type</code> - (Optional) The log type which should be used. Possible values are <code>ContainerInsights</code> and <code>ContainerInstanceLogs</code>. Changing this forces a new resource to be created.</p></li><li><p><code>workspace_id</code> - (Required) The Workspace ID of the Log Analytics Workspace. Changing this forces a new resource to be created.</p></li><li><p><code>workspace_key</code> - (Required) The Workspace Key of the Log Analytics Workspace. Changing this forces a new resource to be created.</p></li><li><p><code>metadata</code> - (Optional) Any metadata required for Log Analytics. Changing this forces a new resource to be created.</p></li></ul><hr /><p>A <code>ports</code> block supports:</p><ul><li><p><code>port</code> - (Optional) The port number the container will expose. Changing this forces a new resource to be created.</p></li><li><p><code>protocol</code> - (Optional) The network protocol associated with port. Possible values are <code>TCP</code> &amp; <code>UDP</code>. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>Note:</strong> Omitting these blocks will default the exposed ports on the group to all ports on all containers defined in the <code>container</code> blocks of this group.</p><hr /><p>A <code>gpu</code> block supports:</p><ul><li><p><code>count</code> - (Optional) The number of GPUs which should be assigned to this container. Allowed values are <code>1</code>, <code>2</code>, or <code>4</code>. Changing this forces a new resource to be created.</p></li><li><p><code>sku</code> - (Optional) The SKU which should be used for the GPU. Possible values are <code>K80</code>, <code>P100</code>, or <code>V100</code>. Changing this forces a new resource to be created.</p></li></ul><hr /><p>A <code>gpu_limit</code> block supports:</p><ul><li><p><code>count</code> - (Optional) The upper limit of the number of GPUs which should be assigned to this container.</p></li><li><p><code>sku</code> - (Optional) The allowed SKU which should be used for the GPU. Possible values are <code>K80</code>, <code>P100</code>, or <code>V100</code>.</p></li></ul><hr /><p>A <code>volume</code> block supports:</p><ul><li><p><code>name</code> - (Required) The name of the volume mount. Changing this forces a new resource to be created.</p></li><li><p><code>mount_path</code> - (Required) The path on which this volume is to be mounted. Changing this forces a new resource to be created.</p></li><li><p><code>read_only</code> - (Optional) Specify if the volume is to be mounted as read only or not. The default value is <code>false</code>. Changing this forces a new resource to be created.</p></li><li><p><code>empty_dir</code> - (Optional) Boolean as to whether the mounted volume should be an empty directory. Defaults to <code>false</code>. Changing this forces a new resource to be created.</p></li><li><p><code>storage_account_name</code> - (Optional) The Azure storage account from which the volume is to be mounted. Changing this forces a new resource to be created.</p></li><li><p><code>storage_account_key</code> - (Optional) The access key for the Azure Storage account specified as above. Changing this forces a new resource to be created.</p></li><li><p><code>share_name</code> - (Optional) The Azure storage share that is to be mounted as a volume. This must be created on the storage account specified as above. Changing this forces a new resource to be created.</p></li><li><p><code>git_repo</code> - (Optional) A <code>git_repo</code> block as defined below. Changing this forces a new resource to be created.</p></li><li><p><code>secret</code> - (Optional) A map of secrets that will be mounted as files in the volume. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>Note:</strong> Exactly one of <code>empty_dir</code> volume, <code>git_repo</code> volume, <code>secret</code> volume or storage account volume (<code>share_name</code>, <code>storage_account_name</code>, and <code>storage_account_key</code>) must be specified.</p><p>~&gt; <strong>Note</strong> when using a storage account volume, all of <code>share_name</code>, <code>storage_account_name</code>, and <code>storage_account_key</code> must be specified.</p><p>~&gt; <strong>Note:</strong> The secret values must be supplied as Base64 encoded strings, such as by using the Terraform <a href=\"https://www.terraform.io/docs/configuration/functions/base64encode.html\">base64encode function</a>. The secret values are decoded to their original values when mounted in the volume on the container.</p><hr /><p>The <code>git_repo</code> block supports:</p><ul><li><p><code>url</code> - (Required) Specifies the Git repository to be cloned. Changing this forces a new resource to be created.</p></li><li><p><code>directory</code> - (Optional) Specifies the directory into which the repository should be cloned. Changing this forces a new resource to be created.</p></li><li><p><code>revision</code> - (Optional) Specifies the commit hash of the revision to be cloned. If unspecified, the HEAD revision is cloned. Changing this forces a new resource to be created.</p></li></ul><hr /><p>The <code>readiness_probe</code> block supports:</p><ul><li><p><code>exec</code> - (Optional) Commands to be run to validate container readiness. Changing this forces a new resource to be created.</p></li><li><p><code>http_get</code> - (Optional) The definition of the http_get for this container as documented in the <code>http_get</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>initial_delay_seconds</code> - (Optional) Number of seconds after the container has started before liveness or readiness probes are initiated. Changing this forces a new resource to be created.</p></li><li><p><code>period_seconds</code> - (Optional) How often (in seconds) to perform the probe. The default value is <code>10</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li><li><p><code>failure_threshold</code> - (Optional) How many times to try the probe before restarting the container (liveness probe) or marking the container as unhealthy (readiness probe). The default value is <code>3</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li><li><p><code>success_threshold</code> - (Optional) Minimum consecutive successes for the probe to be considered successful after having failed. The default value is <code>1</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li><li><p><code>timeout_seconds</code> - (Optional) Number of seconds after which the probe times out. The default value is <code>1</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li></ul><hr /><p>The <code>liveness_probe</code> block supports:</p><ul><li><p><code>exec</code> - (Optional) Commands to be run to validate container readiness. Changing this forces a new resource to be created.</p></li><li><p><code>http_get</code> - (Optional) The definition of the http_get for this container as documented in the <code>http_get</code> block below. Changing this forces a new resource to be created.</p></li><li><p><code>initial_delay_seconds</code> - (Optional) Number of seconds after the container has started before liveness or readiness probes are initiated. Changing this forces a new resource to be created.</p></li><li><p><code>period_seconds</code> - (Optional) How often (in seconds) to perform the probe. The default value is <code>10</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li><li><p><code>failure_threshold</code> - (Optional) How many times to try the probe before restarting the container (liveness probe) or marking the container as unhealthy (readiness probe). The default value is <code>3</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li><li><p><code>success_threshold</code> - (Optional) Minimum consecutive successes for the probe to be considered successful after having failed. The default value is <code>1</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li><li><p><code>timeout_seconds</code> - (Optional) Number of seconds after which the probe times out. The default value is <code>1</code> and the minimum value is <code>1</code>. Changing this forces a new resource to be created.</p></li></ul><hr /><p>The <code>http_get</code> block supports:</p><ul><li><p><code>path</code> - (Optional) Path to access on the HTTP server. Changing this forces a new resource to be created.</p></li><li><p><code>port</code> - (Optional) Number of the port to access on the container. Changing this forces a new resource to be created.</p></li><li><p><code>scheme</code> - (Optional) Scheme to use for connecting to the host. Possible values are <code>Http</code> and <code>Https</code>. Changing this forces a new resource to be created.</p></li><li><p><code>http_headers</code> - (Optional) A map of HTTP headers used to access on the container. Changing this forces a new resource to be created.</p></li></ul><hr /><p>The <code>dns_config</code> block supports:</p><ul><li><p><code>nameservers</code> - (Required) A list of nameservers the containers will search out to resolve requests. Changing this forces a new resource to be created.</p></li><li><p><code>search_domains</code> - (Optional) A list of search domains that DNS requests will search along. Changing this forces a new resource to be created.</p></li><li><p><code>options</code> - (Optional) A list of <a href=\"https://man7.org/linux/man-pages/man5/resolv.conf.5.html\">resolver configuration options</a>. Changing this forces a new resource to be created.</p></li></ul><hr /><p>The <code>security</code> block supports:</p><ul><li><code>privilege_enabled</code> - (Required) Whether the container's permission is elevated to privileged? Changing this forces a new resource to be created.</li></ul><p>~&gt; <strong>NOTE:</strong> Currently, this only applies when the <code>os_type</code> is <code>Linux</code> and the <code>sku</code> is <code>Confidential</code>. </p>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><p><code>id</code> - The ID of the Container Group.</p></li><li><p><code>identity</code> - An <code>identity</code> block as defined below.</p></li><li><p><code>ip_address</code> - The IP address allocated to the container group.</p></li><li><p><code>fqdn</code> - The FQDN of the container group derived from <code>dns_name_label</code>.</p></li></ul><hr /><p>An <code>identity</code> block exports the following:</p><ul><li><p><code>principal_id</code> - The Principal ID associated with this Managed Service Identity.</p></li><li><p><code>tenant_id</code> - The Tenant ID associated with this Managed Service Identity.</p></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><p><code>create</code> - (Defaults to 30 minutes) Used when creating the Container Group.</p></li><li><p><code>update</code> - (Defaults to 30 minutes) Used when updating the Container Group.</p></li><li><p><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Container Group.</p></li><li><p><code>delete</code> - (Defaults to 30 minutes) Used when deleting the Container Group.</p></li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Container Group's can be imported using the <code>resource id</code>, e.g.</p><p><code>shellterraform import azurerm_container_group.containerGroup1 /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mygroup1/providers/Microsoft.ContainerInstance/containerGroups/myContainerGroup1</code></p>", "description": "<h1 id=\"azurerm_container_group\">azurerm_container_group</h1><p>Manages as an Azure Container Group instance.</p><p>~&gt; <strong>Note</strong> <code>network_profile_id</code> is <a href=\"https://docs.microsoft.com/en-us/azure/container-instances/container-instances-vnet\">deprecated</a> by Azure. For users who want to continue to manage existing <code>azurerm_container_group</code> that rely on <code>network_profile_id</code>, please stay on provider versions prior to v3.16.0. Otherwise, use <code>subnet_ids</code> instead.</p>"}