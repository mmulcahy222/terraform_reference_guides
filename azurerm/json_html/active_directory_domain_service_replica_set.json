{"azurerm-active-directory-domain-service-replica-set": "<h1 id=\"azurerm_active_directory_domain_service_replica_set\">azurerm_active_directory_domain_service_replica_set</h1><p>Manages a Replica Set for an Active Directory Domain Service.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>provider \"azurerm\" {<br />  features {}<br />}</p><br /><p>resource \"azurerm_resource_group\" \"primary\" {<br />  name     = \"aadds-primary-rg\"<br />  location = \"West Europe\"<br />}</p><br /><p>resource \"azurerm_virtual_network\" \"primary\" {<br />  name                = \"aadds-primary-vnet\"<br />  location            = azurerm_resource_group.primary.location<br />  resource_group_name = azurerm_resource_group.primary.name<br />  address_space       = [\"10.0.1.0/16\"]<br />}</p><br /><p>resource \"azurerm_subnet\" \"primary\" {<br />  name                 = \"aadds-primary-subnet\"<br />  resource_group_name  = azurerm_resource_group.primary.name<br />  virtual_network_name = azurerm_virtual_network.primary.name<br />  address_prefixes     = [\"10.0.1.0/24\"]<br />}</p><br /><p>resource \"azurerm_network_security_group\" \"primary\" {<br />  name                = \"aadds-primary-nsg\"<br />  location            = azurerm_resource_group.primary.location<br />  resource_group_name = azurerm_resource_group.primary.name</p><br /><p>security_rule {<br />    name                       = \"AllowSyncWithAzureAD\"<br />    priority                   = 101<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"443\"<br />    source_address_prefix      = \"AzureActiveDirectoryDomainServices\"<br />    destination_address_prefix = \"</em>\"<br />  }</p><br /><p>security_rule {<br />    name                       = \"AllowRD\"<br />    priority                   = 201<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"3389\"<br />    source_address_prefix      = \"CorpNetSaw\"<br />    destination_address_prefix = \"</em>\"<br />  }</p><br /><p>security_rule {<br />    name                       = \"AllowPSRemoting\"<br />    priority                   = 301<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"5986\"<br />    source_address_prefix      = \"AzureActiveDirectoryDomainServices\"<br />    destination_address_prefix = \"</em>\"<br />  }</p><br /><p>security_rule {<br />    name                       = \"AllowLDAPS\"<br />    priority                   = 401<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"636\"<br />    source_address_prefix      = \"</em>\"<br />    destination_address_prefix = \"*\"<br />  }<br />}</p><br /><p>resource \"azurerm_subnet_network_security_group_association\" \"primary\" {<br />  subnet_id                 = azurerm_subnet.primary.id<br />  network_security_group_id = azurerm_network_security_group.primary.id<br />}</p><br /><p>resource \"azuread_group\" \"dc_admins\" {<br />  display_name     = \"aad-dc-administrators\"<br />  security_enabled = true<br />}</p><br /><p>resource \"azuread_user\" \"admin\" {<br />  user_principal_name = \"dc-admin@hashicorp-example.net\"<br />  display_name        = \"DC Administrator\"<br />  password            = \"Pa55w0Rd!!1\"<br />}</p><br /><p>resource \"azuread_group_member\" \"admin\" {<br />  group_object_id  = azuread_group.dc_admins.object_id<br />  member_object_id = azuread_user.admin.object_id<br />}</p><br /><p>resource \"azuread_service_principal\" \"example\" {<br />  application_id = \"2565bd9d-da50-47d4-8b85-4c97f669dc36\" // published app for domain services<br />}</p><br /><p>resource \"azurerm_resource_group\" \"aadds\" {<br />  name     = \"aadds-rg\"<br />  location = \"westeurope\"<br />}</p><br /><p>resource \"azurerm_active_directory_domain_service\" \"example\" {<br />  name                = \"example-aadds\"<br />  location            = azurerm_resource_group.aadds.location<br />  resource_group_name = azurerm_resource_group.aadds.name</p><br /><p>domain_name           = \"widgetslogin.net\"<br />  sku                   = \"Enterprise\"<br />  filtered_sync_enabled = false</p><br /><p>initial_replica_set {<br />    location  = azurerm_virtual_network.primary.location<br />    subnet_id = azurerm_subnet.primary.id<br />  }</p><br /><p>notifications {<br />    additional_recipients = [\"notifyA@example.net\", \"notifyB@example.org\"]<br />    notify_dc_admins      = true<br />    notify_global_admins  = true<br />  }</p><br /><p>security {<br />    sync_kerberos_passwords = true<br />    sync_ntlm_passwords     = true<br />    sync_on_prem_passwords  = true<br />  }</p><br /><p>tags = {<br />    Environment = \"prod\"<br />  }</p><br /><p>depends_on = [<br />    azuread_service_principal.example,<br />    azurerm_subnet_network_security_group_association.primary,<br />  ]<br />}</p><br /><p>resource \"azurerm_resource_group\" \"replica\" {<br />  name     = \"aadds-replica-rg\"<br />  location = \"North Europe\"<br />}</p><br /><p>resource \"azurerm_virtual_network\" \"replica\" {<br />  name                = \"aadds-replica-vnet\"<br />  location            = azurerm_resource_group.replica.location<br />  resource_group_name = azurerm_resource_group.replica.name<br />  address_space       = [\"10.20.0.0/16\"]<br />}</p><br /><p>resource \"azurerm_subnet\" \"aadds_replica\" {<br />  name                 = \"aadds-replica-subnet\"<br />  resource_group_name  = azurerm_resource_group.replica.name<br />  virtual_network_name = azurerm_virtual_network.replica.name<br />  address_prefixes     = [\"10.20.0.0/24\"]<br />}</p><br /><p>resource \"azurerm_network_security_group\" \"aadds_replica\" {<br />  name                = \"aadds-replica-nsg\"<br />  location            = azurerm_resource_group.replica.location<br />  resource_group_name = azurerm_resource_group.replica.name</p><br /><p>security_rule {<br />    name                       = \"AllowSyncWithAzureAD\"<br />    priority                   = 101<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"443\"<br />    source_address_prefix      = \"AzureActiveDirectoryDomainServices\"<br />    destination_address_prefix = \"</em>\"<br />  }</p><br /><p>security_rule {<br />    name                       = \"AllowRD\"<br />    priority                   = 201<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"3389\"<br />    source_address_prefix      = \"CorpNetSaw\"<br />    destination_address_prefix = \"</em>\"<br />  }</p><br /><p>security_rule {<br />    name                       = \"AllowPSRemoting\"<br />    priority                   = 301<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"5986\"<br />    source_address_prefix      = \"AzureActiveDirectoryDomainServices\"<br />    destination_address_prefix = \"</em>\"<br />  }</p><br /><p>security_rule {<br />    name                       = \"AllowLDAPS\"<br />    priority                   = 401<br />    direction                  = \"Inbound\"<br />    access                     = \"Allow\"<br />    protocol                   = \"Tcp\"<br />    source_port_range          = \"<em>\"<br />    destination_port_range     = \"636\"<br />    source_address_prefix      = \"</em>\"<br />    destination_address_prefix = \"*\"<br />  }<br />}</p><br /><p>resource \"azurerm_subnet_network_security_group_association\" \"replica\" {<br />  subnet_id                 = azurerm_subnet.aadds_replica.id<br />  network_security_group_id = azurerm_network_security_group.aadds_replica.id<br />}</p><br /><p>resource \"azurerm_virtual_network_peering\" \"primary_replica\" {<br />  name                      = \"aadds-primary-replica\"<br />  resource_group_name       = azurerm_virtual_network.primary.resource_group_name<br />  virtual_network_name      = azurerm_virtual_network.primary.name<br />  remote_virtual_network_id = azurerm_virtual_network.replica.id</p><br /><p>allow_forwarded_traffic      = true<br />  allow_gateway_transit        = false<br />  allow_virtual_network_access = true<br />  use_remote_gateways          = false<br />}</p><br /><p>resource \"azurerm_virtual_network_peering\" \"replica_primary\" {<br />  name                      = \"aadds-replica-primary\"<br />  resource_group_name       = azurerm_virtual_network.replica.resource_group_name<br />  virtual_network_name      = azurerm_virtual_network.replica.name<br />  remote_virtual_network_id = azurerm_virtual_network.primary.id</p><br /><p>allow_forwarded_traffic      = true<br />  allow_gateway_transit        = false<br />  allow_virtual_network_access = true<br />  use_remote_gateways          = false<br />}</p><br /><p>resource \"azurerm_virtual_network_dns_servers\" \"replica\" {<br />  virtual_network_id = azurerm_virtual_network.replica.id<br />  dns_servers        = azurerm_active_directory_domain_service.example.initial_replica_set.0.domain_controller_ip_addresses<br />}</p><br /><p>resource \"azurerm_active_directory_domain_service_replica_set\" \"replica\" {<br />  domain_service_id = azurerm_active_directory_domain_service.example.id<br />  location          = azurerm_resource_group.replica.location<br />  subnet_id         = azurerm_subnet.aadds_replica.id</p><br /><p>depends_on = [<br />    azurerm_subnet_network_security_group_association.replica,<br />    azurerm_virtual_network_peering.primary_replica,<br />    azurerm_virtual_network_peering.replica_primary,<br />  ]<br />}</p><br />", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>domain_service_id</code> - (Required) The ID of the Domain Service for which to create this Replica Set. Changing this forces a new resource to be created.</p></li><li><p><code>location</code> - (Required) The Azure location where this Replica Set should exist. Changing this forces a new resource to be created.</p></li><li><p><code>subnet_id</code> - (Required) The ID of the subnet in which to place this Replica Set. Changing this forces a new resource to be created.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><p><code>id</code> - The ID of the Domain Service Replica Set.</p></li><li><p><code>domain_controller_ip_addresses</code> - A list of subnet IP addresses for the domain controllers in this Replica Set, typically two.</p></li><li><p><code>external_access_ip_address</code> - The publicly routable IP address for the domain controllers in this Replica Set.</p></li><li><p><code>service_status</code> - The current service status for the replica set.</p></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 3 hours) Used when creating the Domain Service.</li><li><code>update</code> - (Defaults to 2 hours) Used when updating the Domain Service.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Domain Service.</li><li><code>delete</code> - (Defaults to 60 minutes) Used when deleting the Domain Service.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Domain Service Replica Sets can be imported using the resource ID of the parent Domain Service and the Replica Set ID, e.g.</p><p>shell<br />terraform import azurerm_active_directory_domain_service_replica_set.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mygroup1/providers/Microsoft.AAD/domainServices/instance1/replicaSets/00000000-0000-0000-0000-000000000000</p>", "description": "<h1 id=\"azurerm_active_directory_domain_service_replica_set\">azurerm_active_directory_domain_service_replica_set</h1><p>Manages a Replica Set for an Active Directory Domain Service.</p>"}