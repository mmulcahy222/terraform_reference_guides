{"azurerm-api-management-custom-domain": "<h1 id=\"azurerm_api_management_custom_domain\">azurerm_api_management_custom_domain</h1><p>Manages a API Management Custom Domain.</p>", "disclaimers": "<h2 id=\"disclaimers\">Disclaimers</h2><p>~&gt; <strong>Note:</strong> It's possible to define Custom Domains both within <a href=\"api_management.html\">the <code>azurerm_api_management</code> resource</a> via the <code>hostname_configurations</code> block and by using this resource. However it's not possible to use both methods to manage Custom Domains within an API Management Service, since there will be conflicts.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p><br />provider \"azurerm\" {<br />  features {}<br />}</p><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><p>data \"azurerm_key_vault\" \"example\" {<br />  name                = \"mykeyvault\"<br />  resource_group_name = \"some-resource-group\"<br />}</p><p>resource \"azurerm_api_management\" \"example\" {<br />  name                = \"example-apim\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  publisher_name      = \"pub1\"<br />  publisher_email     = \"pub1@email.com\"<br />  sku_name            = \"Developer_1\"<br />}</p><p>resource \"azurerm_key_vault_certificate\" \"example\" {<br />  name         = \"example-certificate\"<br />  key_vault_id = data.azurerm_key_vault.example.id</p><p>certificate_policy {<br />    issuer_parameters {<br />      name = \"Self\"<br />    }</p><pre><code>key_properties {  exportable = true  key_size   = 2048  key_type   = \"RSA\"  reuse_key  = true}lifetime_action {  action {    action_type = \"AutoRenew\"  }  trigger {    days_before_expiry = 30  }}secret_properties {  content_type = \"application/x-pkcs12\"}x509_certificate_properties {  key_usage = [    \"cRLSign\",    \"dataEncipherment\",    \"digitalSignature\",    \"keyAgreement\",    \"keyCertSign\",    \"keyEncipherment\",  ]  subject            = \"CN=api.example.com\"  validity_in_months = 12  subject_alternative_names {    dns_names = [      \"api.example.com\",      \"portal.example.com\",    ]  }}</code></pre><p>}<br />}</p><p>resource \"azurerm_api_management_custom_domain\" \"example\" {<br />  api_management_id = azurerm_api_management.example.id</p><p>gateway {<br />    host_name    = \"api.example.com\"<br />    key_vault_id = azurerm_key_vault_certificate.example.versionless_secret_id<br />  }</p><p>developer_portal {<br />    host_name    = \"portal.example.com\"<br />    key_vault_id = azurerm_key_vault_certificate.example.versionless_secret_id<br />  }<br />}<br /></p>", "arguments-reference": "<h2 id=\"arguments-reference\">Arguments Reference</h2><p>The following arguments are supported:</p><ul><li><code>api_management_id</code> - (Required) The ID of the API Management service for which to configure Custom Domains. Changing this forces a new API Management Custom Domain resource to be created.</li></ul><hr /><ul><li><p><code>developer_portal</code> - (Optional) One or more <code>developer_portal</code> blocks as defined below.</p></li><li><p><code>management</code> - (Optional) One or more <code>management</code> blocks as defined below.</p></li><li><p><code>portal</code> - (Optional) One or more <code>portal</code> blocks as defined below.</p></li><li><p><code>gateway</code> - (Optional) One or more <code>gateway</code> blocks as defined below.</p></li><li><p><code>scm</code> - (Optional) One or more <code>scm</code> blocks as defined below.</p></li></ul><hr /><p>A <code>developer_portal</code>, <code>management</code>, <code>portal</code> or <code>scm</code> block supports the following:</p><ul><li><p><code>host_name</code> - (Required) The Hostname to use for the corresponding endpoint.</p></li><li><p><code>certificate</code> - (Optional) The Base64 Encoded Certificate. (Mutually exclusive with <code>key_vault_id</code>.)</p></li><li><p><code>certificate_password</code> - (Optional) The password associated with the certificate provided above.</p></li><li><p><code>key_vault_id</code> - (Optional) The ID of the Key Vault Secret containing the SSL Certificate, which must be should be of the type application/x-pkcs12.</p></li><li><p><code>negotiate_client_certificate</code> - (Optional) Should Client Certificate Negotiation be enabled for this Hostname? Defaults to <code>false</code>.</p></li><li><p><code>ssl_keyvault_identity_client_id</code> - (Optional) System or User Assigned Managed identity clientId as generated by Azure AD, which has <code>GET</code> access to the keyVault containing the SSL certificate.</p></li></ul><p>-&gt; <strong>NOTE:</strong> If a User Assigned Managed identity is specified for <code>ssl_keyvault_identity_client_id</code> then this identity must be associated to the <code>azurerm_api_management</code> within an <code>identity</code> block.</p><hr /><p>A <code>gateway</code> block supports the following:</p><p>-&gt; <strong>Tip:</strong> The default gateway hostname ending with <code>.azure-api.net</code> must not be added as it will be automatically created by Azure and ignored by Terraform.</p><ul><li><p><code>host_name</code> - (Required) The Hostname to use for the API Proxy Endpoint.</p></li><li><p><code>certificate</code> - (Optional) The Base64 Encoded Certificate. (Mutually exclusive with <code>key_vault_id</code>.)</p></li><li><p><code>certificate_password</code> - (Optional) The password associated with the certificate provided above.</p></li><li><p><code>default_ssl_binding</code> - (Optional) Is the certificate associated with this Hostname the Default SSL Certificate? This is used when an SNI header isn't specified by a client. Defaults to <code>false</code>.</p></li><li><p><code>key_vault_id</code> - (Optional) The ID of the Key Vault Secret containing the SSL Certificate, which must be should be of the type application/x-pkcs12.</p></li><li><p><code>negotiate_client_certificate</code> - (Optional) Should Client Certificate Negotiation be enabled for this Hostname? Defaults to <code>false</code>.</p></li><li><p><code>ssl_keyvault_identity_client_id</code> - (Optional) System or User Assigned Managed identity clientId as generated by Azure AD, which has <code>GET</code> access to the keyVault containing the SSL certificate.</p></li></ul><p>-&gt; <strong>NOTE:</strong> If a User Assigned Managed identity is specified for <code>ssl_keyvault_identity_client_id</code> then this identity must be associated to the <code>azurerm_api_management</code> within an <code>identity</code> block.</p>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><code>id</code> - The ID of the API Management Custom Domain.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 60 minutes) Used when creating the API Management Custom Domain.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the API Management Custom Domain.</li><li><code>update</code> - (Defaults to 60 minutes) Used when updating the API Management Custom Domain.</li><li><code>delete</code> - (Defaults to 60 minutes) Used when deleting the API Management Custom Domain.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>API Management Custom Domains can be imported using the <code>resource id</code>, e.g.</p><p><code>shellterraform import azurerm_api_management_custom_domain.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mygroup1/providers/Microsoft.ApiManagement/service/instance1/customDomains/default</code></p>", "description": "<h1 id=\"azurerm_api_management_custom_domain\">azurerm_api_management_custom_domain</h1><p>Manages a API Management Custom Domain.</p>"}