{"azurerm-eventhub-namespace-customer-managed-key": "<h1 id=\"azurerm_eventhub_namespace_customer_managed_key\">azurerm_eventhub_namespace_customer_managed_key</h1><p>Manages a Customer Managed Key for a EventHub Namespace.</p><p>!&gt; <strong>Note:</strong> In 2.x versions of the Azure Provider during deletion this resource will <strong>delete and recreate the parent EventHub Namespace which may involve data loss</strong> as it's not possible to remove the Customer Managed Key from the EventHub Namespace once it's been added. Version 3.0 of the Azure Provider will change this so that the Delete operation is a noop, requiring the parent EventHub Namespace is deleted/recreated to remove the Customer Managed Key.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p><br />resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><p>resource \"azurerm_eventhub_cluster\" \"example\" {<br />  name                = \"example-cluster\"<br />  resource_group_name = azurerm_resource_group.example.name<br />  location            = azurerm_resource_group.example.location<br />  sku_name            = \"Dedicated_1\"<br />}</p><p>resource \"azurerm_eventhub_namespace\" \"example\" {<br />  name                 = \"example-namespace\"<br />  location             = azurerm_resource_group.example.location<br />  resource_group_name  = azurerm_resource_group.example.name<br />  sku                  = \"Standard\"<br />  dedicated_cluster_id = azurerm_eventhub_cluster.example.id</p><p>identity {<br />    type = \"SystemAssigned\"<br />  }<br />}</p><p>data \"azurerm_client_config\" \"current\" {}</p><p>resource \"azurerm_key_vault\" \"example\" {<br />  name                     = \"examplekv\"<br />  location                 = azurerm_resource_group.example.location<br />  resource_group_name      = azurerm_resource_group.example.name<br />  tenant_id                = data.azurerm_client_config.current.tenant_id<br />  sku_name                 = \"standard\"<br />  purge_protection_enabled = true<br />}</p><p>resource \"azurerm_key_vault_access_policy\" \"example\" {<br />  key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = azurerm_eventhub_namespace.example.identity.0.tenant_id<br />  object_id    = azurerm_eventhub_namespace.example.identity.0.principal_id</p><p>key_permissions = [\"Get\", \"UnwrapKey\", \"WrapKey\"]<br />}</p><p>resource \"azurerm_key_vault_access_policy\" \"example2\" {<br />  key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = data.azurerm_client_config.current.tenant_id<br />  object_id    = data.azurerm_client_config.current.object_id</p><p>key_permissions = [<br />    \"Create\",<br />    \"Delete\",<br />    \"Get\",<br />    \"List\",<br />    \"Purge\",<br />    \"Recover\",<br />    \"GetRotationPolicy\",<br />  ]<br />}</p><p>resource \"azurerm_key_vault_key\" \"example\" {<br />  name         = \"examplekvkey\"<br />  key_vault_id = azurerm_key_vault.example.id<br />  key_type     = \"RSA\"<br />  key_size     = 2048<br />  key_opts     = [\"decrypt\", \"encrypt\", \"sign\", \"unwrapKey\", \"verify\", \"wrapKey\"]</p><p>depends_on = [<br />    azurerm_key_vault_access_policy.example,<br />    azurerm_key_vault_access_policy.example2,<br />  ]<br />}</p><p>resource \"azurerm_eventhub_namespace_customer_managed_key\" \"example\" {<br />  eventhub_namespace_id = azurerm_eventhub_namespace.example.id<br />  key_vault_key_ids     = [azurerm_key_vault_key.example.id]<br />}<br /></p>", "arguments-reference": "<h2 id=\"arguments-reference\">Arguments Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>eventhub_namespace_id</code> - (Required) The ID of the EventHub Namespace. Changing this forces a new resource to be created.</p></li><li><p><code>key_vault_key_ids</code> - (Required) The list of keys of Key Vault.</p></li><li><p><code>infrastructure_encryption_enabled</code> - (Optional) Whether to enable Infrastructure Encryption (Double Encryption). Changing this forces a new resource to be created.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><code>id</code> - The ID of the EventHub Namespace.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 30 minutes) Used when creating the EventHub Namespace Customer Managed Key.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the EventHub Namespace Customer Managed Key.</li><li><code>update</code> - (Defaults to 30 minutes) Used when updating the EventHub Namespace Customer Managed Key.</li><li><code>delete</code> - (Defaults to 30 minutes) Used when deleting the EventHub Namespace Customer Managed Key.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Customer Managed Keys for a EventHub Namespace can be imported using the <code>resource id</code>, e.g.</p><p><code>shellterraform import azurerm_eventhub_namespace_customer_managed_key.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.EventHub/namespaces/namespace1</code></p>", "description": "<h1 id=\"azurerm_eventhub_namespace_customer_managed_key\">azurerm_eventhub_namespace_customer_managed_key</h1><p>Manages a Customer Managed Key for a EventHub Namespace.</p><p>!&gt; <strong>Note:</strong> In 2.x versions of the Azure Provider during deletion this resource will <strong>delete and recreate the parent EventHub Namespace which may involve data loss</strong> as it's not possible to remove the Customer Managed Key from the EventHub Namespace once it's been added. Version 3.0 of the Azure Provider will change this so that the Delete operation is a noop, requiring the parent EventHub Namespace is deleted/recreated to remove the Customer Managed Key.</p>"}