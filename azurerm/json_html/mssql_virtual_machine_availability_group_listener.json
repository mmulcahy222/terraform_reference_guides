{"azurerm-mssql-virtual-machine-availability-group-listener": "<h1 id=\"azurerm_mssql_virtual_machine_availability_group_listener\">azurerm_mssql_virtual_machine_availability_group_listener</h1><p>Manages a Microsoft SQL Virtual Machine Availability Group Listener.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p><br />data \"azurerm_subnet\" \"example\" {<br />  name                 = \"examplesubnet\"<br />  virtual_network_name = \"examplevnet\"<br />  resource_group_name  = \"example-resources\"<br />}</p><p>data \"azurerm_lb\" \"example\" {<br />  name                = \"example-lb\"<br />  resource_group_name = \"example-resources\"<br />}</p><p>data \"azurerm_virtual_machine\" \"example\" {<br />  count = 2</p><p>name                = \"example-vm\"<br />  resource_group_name = \"example-resources\"<br />}</p><p>resource \"azurerm_mssql_virtual_machine_group\" \"example\" {<br />  name                = \"examplegroup\"<br />  resource_group_name = \"example-resources\"<br />  location            = \"West Europe\"</p><p>sql_image_offer = \"SQL2017-WS2016\"<br />  sql_image_sku   = \"Developer\"</p><p>wsfc_domain_profile {<br />    fqdn                = \"testdomain.com\"<br />    cluster_subnet_type = \"SingleSubnet\"<br />  }<br />}</p><p>resource \"azurerm_mssql_virtual_machine\" \"example\" {<br />  count = 2</p><p>virtual_machine_id           = data.azurerm_virtual_machine.example[count.index].id<br />  sql_license_type             = \"PAYG\"<br />  sql_virtual_machine_group_id = azurerm_mssql_virtual_machine_group.example.id</p><p>wsfc_domain_credential {<br />    cluster_bootstrap_account_password = \"P@ssw0rd1234!\"<br />    cluster_operator_account_password  = \"P@ssw0rd1234!\"<br />    sql_service_account_password       = \"P@ssw0rd1234!\"<br />  }<br />}</p><p>resource \"azurerm_mssql_virtual_machine_availability_group_listener\" \"example\" {<br />  name                         = \"listener1\"<br />  availability_group_name      = \"availabilitygroup1\"<br />  port                         = 1433<br />  sql_virtual_machine_group_id = azurerm_mssql_virtual_machine_group.example.id</p><p>load_balancer_configuration {<br />    load_balancer_id   = data.azurerm_lb.example.id<br />    private_ip_address = \"10.0.2.11\"<br />    probe_port         = 51572<br />    subnet_id          = data.azurerm_subnet.example.id</p><pre><code>sql_virtual_machine_ids = [  azurerm_mssql_virtual_machine.example[0].id,  azurerm_mssql_virtual_machine.example[1].id]</code></pre><p>}</p><p>replica {<br />    sql_virtual_machine_id = azurerm_mssql_virtual_machine.example[0].id<br />    role                   = \"Primary\"<br />    commit                 = \"Synchronous_Commit\"<br />    failover               = \"Automatic\"<br />    readable_secondary     = \"All\"<br />  }</p><p>replica {<br />    sql_virtual_machine_id = azurerm_mssql_virtual_machine.example[1].id<br />    role                   = \"Secondary\"<br />    commit                 = \"Asynchronous_Commit\"<br />    failover               = \"Manual\"<br />    readable_secondary     = \"No\"<br />  }<br />}<br /></p>", "arguments-reference": "<h2 id=\"arguments-reference\">Arguments Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) The name which should be used for the Microsoft SQL Virtual Machine Availability Group Listener. Changing this forces a new resource to be created.</p></li><li><p><code>sql_virtual_machine_group_id</code> - (Required) The ID of the SQL Virtual Machine Group to create the listener. Changing this forces a new resource to be created.</p></li><li><p><code>availability_group_name</code> - (Optional) The name of the Availability Group. Changing this forces a new resource to be created.</p></li><li><p><code>load_balancer_configuration</code> - (Optional) A <code>load_balancer_configuration</code> block as defined below. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>NOTE:</strong> Either one of <code>load_balancer_configuration</code> or <code>multi_subnet_ip_configuration</code> must be specified.</p><ul><li><p><code>multi_subnet_ip_configuration</code> - (Optional) One or more <code>multi_subnet_ip_configuration</code> blocks as defined below. Changing this forces a new resource to be created.</p></li><li><p><code>port</code> - (Optional) The port of the listener. Changing this forces a new resource to be created.</p></li><li><p><code>replica</code> - (Optional) One or more <code>replica</code> blocks as defined below. Changing this forces a new resource to be created.</p></li></ul><hr /><p>A <code>load_balancer_configuration</code> block supports the following:</p><ul><li><p><code>load_balancer_id</code> - (Required) The ID of the Load Balancer. Changing this forces a new resource to be created.</p></li><li><p><code>private_ip_address</code> - (Required) The private IP Address of the listener. Changing this forces a new resource to be created.</p></li><li><p><code>probe_port</code> - (Required) The probe port of the listener. Changing this forces a new resource to be created.</p></li><li><p><code>sql_virtual_machine_ids</code> - (Required) Specifies a list of SQL Virtual Machine IDs. Changing this forces a new resource to be created.</p></li><li><p><code>subnet_id</code> - (Required) The ID of the Subnet to create the listener. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>NOTE:</strong> <code>sql_virtual_machine_ids</code> should match with the SQL Virtual Machines specified in <code>replica</code>.</p><hr /><p>A <code>multi_subnet_ip_configuration</code> block supports the following:</p><ul><li><p><code>private_ip_address</code> - (Required) The private IP Address of the listener. Changing this forces a new resource to be created.</p></li><li><p><code>sql_virtual_machine_id</code> - (Required) The ID of the Sql Virtual Machine. Changing this forces a new resource to be created.</p></li><li><p><code>subnet_id</code> - (Required) The ID of the Subnet to create the listener. Changing this forces a new resource to be created.</p></li></ul><p>~&gt; <strong>NOTE:</strong> <code>sql_virtual_machine_id</code> should match with the SQL Virtual Machines specified in <code>replica</code>.</p><hr /><p>A <code>replica</code> block supports the following:</p><ul><li><p><code>commit</code> - (Required) The replica commit mode for the availability group. Possible values are <code>Synchronous_Commit</code> and <code>Asynchronous_Commit</code>. Changing this forces a new resource to be created.</p></li><li><p><code>failover_mode</code> - (Required) The replica failover mode for the availability group. Possible values are <code>Manual</code> and <code>Automatic</code>. Changing this forces a new resource to be created.</p></li><li><p><code>readable_secondary</code> - (Required) The replica readable secondary mode for the availability group. Possible values are <code>No</code>, <code>Read_Only</code> and <code>All</code>. Changing this forces a new resource to be created.</p></li><li><p><code>role</code> - (Required) The replica role for the availability group. Possible values are <code>Primary</code> and <code>Secondary</code>. Changing this forces a new resource to be created.</p></li><li><p><code>sql_virtual_machine_id</code> - (Required) The ID of the SQL Virtual Machine. Changing this forces a new resource to be created.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported: </p><ul><li><code>id</code> - The ID of the Microsoft SQL Virtual Machine Availability Group Listener.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 30 minutes) Used when creating the Microsoft SQL Virtual Machine Availability Group Listener.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Microsoft SQL Virtual Machine Availability Group Listener.</li><li><code>delete</code> - (Defaults to 30 minutes) Used when deleting the Microsoft SQL Virtual Machine Availability Group Listener.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Microsoft SQL Virtual Machine Availability Group Listeners can be imported using the <code>resource id</code>, e.g.</p><p><code>shellterraform import azurerm_mssql_virtual_machine_availability_group_listener.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.SqlVirtualMachine/sqlVirtualMachineGroups/vmgroup1/availabilityGroupListeners/listener1</code></p>", "description": "<h1 id=\"azurerm_mssql_virtual_machine_availability_group_listener\">azurerm_mssql_virtual_machine_availability_group_listener</h1><p>Manages a Microsoft SQL Virtual Machine Availability Group Listener.</p>"}