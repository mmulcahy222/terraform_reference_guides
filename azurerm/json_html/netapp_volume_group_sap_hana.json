{"azurerm-netapp-volume-group-sap-hana": "<h1 id=\"azurerm_netapp_volume_group_sap_hana\">azurerm_netapp_volume_group_sap_hana</h1><p>Manages a Application Volume Group for SAP HANA application.</p><blockquote><p>Note: This feature is intended to be used for SAP-HANA workloads only, with several requirements, please refer to <a href=\"https://learn.microsoft.com/en-us/azure/azure-netapp-files/application-volume-group-introduction\">Understand Azure NetApp Files application volume group for SAP HANA</a> document as the starting point to understand this feature before using it with Terraform.</p></blockquote>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>provider \"azurerm\" {<br />  features {<br />    resource_group {<br />      prevent_deletion_if_contains_resources = false<br />    }<br />  }<br />}</p><br /><p>resource \"random_string\" \"example\" {<br />  length  = 12<br />  special = true<br />}</p><br /><p>locals {<br />  admin_username = \"exampleadmin\"<br />  admin_password = random_string.example.result<br />}</p><br /><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"${var.prefix}-resources\"<br />  location = var.location<br />}</p><br /><p>resource \"azurerm_virtual_network\" \"example\" {<br />  name                = \"${var.prefix}-vnet\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  address_space       = [\"10.6.0.0/16\"]<br />}</p><br /><p>resource \"azurerm_subnet\" \"example\" {<br />  name                 = \"${var.prefix}-delegated-subnet\"<br />  resource_group_name  = azurerm_resource_group.example.name<br />  virtual_network_name = azurerm_virtual_network.example.name<br />  address_prefixes     = [\"10.6.2.0/24\"]</p><br /><p>delegation {<br />    name = \"testdelegation\"</p><br /><pre><code>service_delegation {<br />  name    = \"Microsoft.Netapp/volumes\"<br />  actions = [\"Microsoft.Network/networkinterfaces/*\", \"Microsoft.Network/virtualNetworks/subnets/join/action\"]<br />}<br /></code></pre><br /><p>}<br />}</p><br /><p>resource \"azurerm_subnet\" \"example1\" {<br />  name                 = \"${var.prefix}-hosts-subnet\"<br />  resource_group_name  = azurerm_resource_group.example.name<br />  virtual_network_name = azurerm_virtual_network.example.name<br />  address_prefixes     = [\"10.6.1.0/24\"]<br />}</p><br /><p>resource \"azurerm_proximity_placement_group\" \"example\" {<br />  name                = \"${var.prefix}-ppg\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />}</p><br /><p>resource \"azurerm_availability_set\" \"example\" {<br />  name                = \"${var.prefix}-avset\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name</p><br /><p>proximity_placement_group_id = azurerm_proximity_placement_group.example.id<br />}</p><br /><p>resource \"azurerm_network_interface\" \"example\" {<br />  name                = \"${var.prefix}-nic\"<br />  resource_group_name = azurerm_resource_group.example.name<br />  location            = azurerm_resource_group.example.location</p><br /><p>ip_configuration {<br />    name                          = \"internal\"<br />    subnet_id                     = azurerm_subnet.example1.id<br />    private_ip_address_allocation = \"Dynamic\"<br />  }<br />}</p><br /><p>resource \"azurerm_linux_virtual_machine\" \"example\" {<br />  name                            = \"${var.prefix}-vm\"<br />  resource_group_name             = azurerm_resource_group.example.name<br />  location                        = azurerm_resource_group.example.location<br />  size                            = \"Standard_M8ms\"<br />  admin_username                  = local.admin_username<br />  admin_password                  = local.admin_password<br />  disable_password_authentication = false<br />  proximity_placement_group_id    = azurerm_proximity_placement_group.example.id<br />  availability_set_id             = azurerm_availability_set.example.id<br />  network_interface_ids = [<br />    azurerm_network_interface.example.id<br />  ]</p><br /><p>source_image_reference {<br />    publisher = \"Canonical\"<br />    offer     = \"UbuntuServer\"<br />    sku       = \"18.04-LTS\"<br />    version   = \"latest\"<br />  }</p><br /><p>os_disk {<br />    storage_account_type = \"Standard_LRS\"<br />    caching              = \"ReadWrite\"<br />  }<br />}</p><br /><p>resource \"azurerm_netapp_account\" \"example\" {<br />  name                = \"${var.prefix}-netapp-account\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name</p><br /><p>depends_on = [<br />    azurerm_subnet.example,<br />    azurerm_subnet.example1<br />  ]<br />}</p><br /><p>resource \"azurerm_netapp_pool\" \"example\" {<br />  name                = \"${var.prefix}-netapp-pool\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  account_name        = azurerm_netapp_account.example.name<br />  service_level       = \"Standard\"<br />  size_in_tb          = 8<br />  qos_type            = \"Manual\"<br />}</p><br /><p>resource \"azurerm_netapp_volume_group_sap_hana\" \"example\" {<br />  name                   = \"${var.prefix}-netapp-volumegroup\"<br />  location               = azurerm_resource_group.example.location<br />  resource_group_name    = azurerm_resource_group.example.name<br />  account_name           = azurerm_netapp_account.example.name<br />  group_description      = \"Test volume group\"<br />  application_identifier = \"TST\"</p><br /><p>volume {<br />    name                         = \"${var.prefix}-netapp-volume-1\"<br />    volume_path                  = \"my-unique-file-path-1\"<br />    service_level                = \"Standard\"<br />    capacity_pool_id             = azurerm_netapp_pool.example.id<br />    subnet_id                    = azurerm_subnet.example.id<br />    proximity_placement_group_id = azurerm_proximity_placement_group.example.id<br />    volume_spec_name             = \"data\"<br />    storage_quota_in_gb          = 1024<br />    throughput_in_mibps          = 24<br />    protocols                    = [\"NFSv4.1\"]<br />    security_style               = \"unix\"<br />    snapshot_directory_visible   = false</p><br /><pre><code>export_policy_rule {<br />  rule_index          = 1<br />  allowed_clients     = \"0.0.0.0/0\"<br />  nfsv3_enabled       = false<br />  nfsv41_enabled      = true<br />  unix_read_only      = false<br />  unix_read_write     = true<br />  root_access_enabled = false<br />}<br /><br />tags = {<br />  \"foo\" = \"bar\"<br />}<br /></code></pre><br /><p>}</p><br /><p>volume {<br />    name                         = \"${var.prefix}-netapp-volume-2\"<br />    volume_path                  = \"my-unique-file-path-2\"<br />    service_level                = \"Standard\"<br />    capacity_pool_id             = azurerm_netapp_pool.example.id<br />    subnet_id                    = azurerm_subnet.example.id<br />    proximity_placement_group_id = azurerm_proximity_placement_group.example.id<br />    volume_spec_name             = \"log\"<br />    storage_quota_in_gb          = 1024<br />    throughput_in_mibps          = 24<br />    protocols                    = [\"NFSv4.1\"]<br />    security_style               = \"unix\"<br />    snapshot_directory_visible   = false</p><br /><pre><code>export_policy_rule {<br />  rule_index          = 1<br />  allowed_clients     = \"0.0.0.0/0\"<br />  nfsv3_enabled       = false<br />  nfsv41_enabled      = true<br />  unix_read_only      = false<br />  unix_read_write     = true<br />  root_access_enabled = false<br />}<br /><br />tags = {<br />  \"foo\" = \"bar\"<br />}<br /></code></pre><br /><p>}</p><br /><p>volume {<br />    name                         = \"${var.prefix}-netapp-volume-3\"<br />    volume_path                  = \"my-unique-file-path-3\"<br />    service_level                = \"Standard\"<br />    capacity_pool_id             = azurerm_netapp_pool.example.id<br />    subnet_id                    = azurerm_subnet.example.id<br />    proximity_placement_group_id = azurerm_proximity_placement_group.example.id<br />    volume_spec_name             = \"shared\"<br />    storage_quota_in_gb          = 1024<br />    throughput_in_mibps          = 24<br />    protocols                    = [\"NFSv4.1\"]<br />    security_style               = \"unix\"<br />    snapshot_directory_visible   = false</p><br /><pre><code>export_policy_rule {<br />  rule_index          = 1<br />  allowed_clients     = \"0.0.0.0/0\"<br />  nfsv3_enabled       = false<br />  nfsv41_enabled      = true<br />  unix_read_only      = false<br />  unix_read_write     = true<br />  root_access_enabled = false<br />}<br /></code></pre><br /><p>}</p><br /><p>depends_on = [<br />    azurerm_linux_virtual_machine.example,<br />    azurerm_proximity_placement_group.example<br />  ]<br />}</p><br />", "arguments-reference": "<h2 id=\"arguments-reference\">Arguments Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>account_name</code> - (Required) Name of the account where the application volume group belong to. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>application_identifier</code> - (Required) The SAP System ID, maximum 3 characters, e.g. <code>SH9</code>. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>group_description</code> - (Required) Volume group description. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>location</code> - (Required) The Azure Region where the Application Volume Group should exist. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>name</code> - (Required) The name which should be used for this Application Volume Group. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>resource_group_name</code> - (Required) The name of the Resource Group where the Application Volume Group should exist. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>volume</code> - (Required) One or more <code>volume</code> blocks as defined below.</p></li></ul><hr /><p>A <code>volume</code> block supports the following:</p><ul><li><p><code>capacity_pool_id</code> - (Required) The ID of the Capacity Pool. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>name</code> - (Required) The name which should be used for this volume. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>protocols</code> - (Required) The target volume protocol expressed as a list. Changing this forces a new Application Volume Group to be created and data will be lost. Supported values for Application Volume Group include <code>NFSv3</code> or <code>NFSv4.1</code>, multi-protocol is not supported and there are certain rules on which protocol is supporteed per volume spec, please check <a href=\"https://learn.microsoft.com/en-us/azure/azure-netapp-files/configure-application-volume-group-sap-hana-api\">Configure application volume groups for the SAP HANA REST API</a> document for details.</p></li><li><p><code>proximity_placement_group_id</code> - (Required) The ID of the proximity placement group. Changing this forces a new Application Volume Group to be created and data will be lost. For SAP-HANA application, it is required to have PPG enabled so Azure NetApp Files can pin the volumes next to your compute resources, please check <a href=\"https://learn.microsoft.com/en-us/azure/azure-netapp-files/application-volume-group-considerations\">Requirements and considerations for application volume group for SAP HANA</a> for details and other requirements.</p></li><li><p><code>security_style</code> - (Required) Volume security style. Possible value is <code>unix</code>. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>service_level</code> - (Required) Volume security style. Possible values are <code>Premium</code>, <code>Standard</code> and <code>Ultra</code>. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>snapshot_directory_visible</code> - (Required) Specifies whether the .snapshot (NFS clients) path of a volume is visible. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>storage_quota_in_gb</code> - (Required) The maximum Storage Quota allowed for a file system in Gigabytes.</p></li><li><p><code>subnet_id</code> - (Required) The ID of the Subnet the NetApp Volume resides in, which must have the <code>Microsoft.NetApp/volumes</code> delegation. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>throughput_in_mibps</code> - (Required) Throughput of this volume in Mibps.</p></li><li><p><code>volume_path</code> - (Required) A unique file path for the volume. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>volume_spec_name</code> - (Required) Volume specification name. Possible values are <code>data</code>, <code>log</code>, <code>shared</code>, <code>data-backup</code> and <code>log-backup</code>. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>tags</code> - (Optional) A mapping of tags which should be assigned to the Application Volume Group.</p></li><li><p><code>export_policy_rule</code> - (Required) One or more <code>export_policy_rule</code> blocks as defined below.</p></li><li><p><code>data_protection_replication</code> - (Optional) A <code>data_protection_replication</code> block as defined below. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>data_protection_snapshot_policy</code> - (Optional) A <code>data_protection_snapshot_policy</code> block as defined below.</p></li></ul><hr /><p>A <code>data_protection_replication</code> block is used when enabling the Cross-Region Replication (CRR) data protection option by deploying two Azure NetApp Files Volumes, one to be a primary volume and the other one will be the secondary, the secondary will have this block and will reference the primary volume, not all volume spec types are supported, please refer to  <a href=\"https://learn.microsoft.com/en-us/azure/azure-netapp-files/configure-application-volume-group-sap-hana-api\">Configure application volume groups for the SAP HANA REST API</a> for detauls. Each volume must be in a supported <a href=\"https://docs.microsoft.com/azure/azure-netapp-files/cross-region-replication-introduction#supported-region-pairs\">region pair</a>.</p><p>This block supports the following:</p><ul><li><p><code>remote_volume_location</code> - (Required) Location of the primary volume. Changing this forces a new Application Volume Group to be created and data will be lost.</p></li><li><p><code>remote_volume_resource_id</code> - (Required) Resource ID of the primary volume.</p></li><li><p><code>replication_frequency</code> - (Required) eplication frequency. Possible values are <code>10minutes</code>, <code>daily</code> and <code>hourly</code>.</p></li><li><p><code>endpoint_type</code> - (Optional) The endpoint type. Possible values are <code>dst</code> and <code>src</code>. Defaults to <code>dst</code>.</p></li></ul><hr /><p>A <code>data_protection_snapshot_policy</code> block supports the following:</p><ul><li><code>snapshot_policy_id</code> - (Required) Resource ID of the snapshot policy to apply to the volume.</li></ul><hr /><p>A <code>export_policy_rule</code> block supports the following:</p><ul><li><p><code>allowed_clients</code> - (Required) A comma-sperated list of allowed client IPv4 addresses.</p></li><li><p><code>nfsv3_enabled</code> - (Required) Enables NFSv3. Please note that this cannot be enabled if volume has NFSv4.1 as its protocol.</p></li><li><p><code>nfsv41_enabled</code> - (Required) Enables NFSv4.1. Please note that this cannot be enabled if volume has NFSv3 as its protocol.</p></li><li><p><code>root_access_enabled</code> - (Optional) Is root access permitted to this volume? Defaults to <code>true</code>.</p></li><li><p><code>rule_index</code> - (Required) The index number of the rule, must start at 1 and maximum 5.</p></li><li><p><code>unix_read_only</code> - (Optional) Is the file system on unix read only? Defaults to `false.</p></li><li><p><code>unix_read_write</code> - (Optional) Is the file system on unix read and write? Defaults to <code>true</code>.</p></li></ul><hr />", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported: </p><ul><li><code>id</code> - The ID of the Application Volume Group.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 1 hour and 30 minutes) Used when creating the Application Volume Group.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Application Volume Group.</li><li><code>update</code> - (Defaults to 2 hours) Used when updating the Application Volume Group.</li><li><code>delete</code> - (Defaults to 2 hours) Used when deleting the Application Volume Group.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Application Volume Groups can be imported using the <code>resource id</code>, e.g.</p><p>shell<br />terraform import azurerm_netapp_volume_group_sap_hana.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mytest-rg/providers/Microsoft.NetApp/netAppAccounts/netapp-account-test/volumeGroups/netapp-volumegroup-test</p>", "description": "<h1 id=\"azurerm_netapp_volume_group_sap_hana\">azurerm_netapp_volume_group_sap_hana</h1><p>Manages a Application Volume Group for SAP HANA application.</p><blockquote><p>Note: This feature is intended to be used for SAP-HANA workloads only, with several requirements, please refer to <a href=\"https://learn.microsoft.com/en-us/azure/azure-netapp-files/application-volume-group-introduction\">Understand Azure NetApp Files application volume group for SAP HANA</a> document as the starting point to understand this feature before using it with Terraform.</p></blockquote>"}