{"azurerm-eventgrid-system-topic-event-subscription": "<h1 id=\"azurerm_eventgrid_system_topic_event_subscription\">azurerm_eventgrid_system_topic_event_subscription</h1><p>Manages an EventGrid System Topic Event Subscription.</p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-rg\"<br />  location = \"West Europe\"<br />}</p><br /><p>resource \"azurerm_storage_account\" \"example\" {<br />  name                     = \"examplestorageaccount\"<br />  resource_group_name      = azurerm_resource_group.example.name<br />  location                 = azurerm_resource_group.example.location<br />  account_tier             = \"Standard\"<br />  account_replication_type = \"LRS\"</p><br /><p>tags = {<br />    environment = \"staging\"<br />  }<br />}</p><br /><p>resource \"azurerm_storage_queue\" \"example\" {<br />  name                 = \"examplestoragequeue\"<br />  storage_account_name = azurerm_storage_account.example.name<br />}</p><br /><p>resource \"azurerm_eventgrid_system_topic\" \"example\" {<br />  name                   = \"example-system-topic\"<br />  location               = \"Global\"<br />  resource_group_name    = azurerm_resource_group.example.name<br />  source_arm_resource_id = azurerm_resource_group.example.id<br />  topic_type             = \"Microsoft.Resources.ResourceGroups\"<br />}</p><br /><p>resource \"azurerm_eventgrid_system_topic_event_subscription\" \"example\" {<br />  name                = \"example-event-subscription\"<br />  system_topic        = azurerm_eventgrid_system_topic.example.name<br />  resource_group_name = azurerm_resource_group.example.name</p><br /><p>storage_queue_endpoint {<br />    storage_account_id = azurerm_storage_account.example.id<br />    queue_name         = azurerm_storage_queue.example.name<br />  }<br />}</p><br />", "arguments-reference": "<h2 id=\"arguments-reference\">Arguments Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) The name which should be used for this Event Subscription. Changing this forces a new Event Subscription to be created.</p></li><li><p><code>system_topic</code> - (Required) The System Topic where the Event Subscription should be created in. Changing this forces a new Event Subscription to be created.</p></li><li><p><code>resource_group_name</code> - (Required) The name of the Resource Group where the System Topic exists. Changing this forces a new Event Subscription to be created.</p></li><li><p><code>expiration_time_utc</code> - (Optional) Specifies the expiration time of the event subscription (Datetime Format <code>RFC 3339</code>).</p></li><li><p><code>event_delivery_schema</code> - (Optional) Specifies the event delivery schema for the event subscription. Possible values include: <code>EventGridSchema</code>, <code>CloudEventSchemaV1_0</code>, <code>CustomInputSchema</code>. Defaults to <code>EventGridSchema</code>. Changing this forces a new resource to be created.</p></li><li><p><code>azure_function_endpoint</code> - (Optional) An <code>azure_function_endpoint</code> block as defined below.</p></li><li><p><code>eventhub_endpoint_id</code> - (Optional) Specifies the id where the Event Hub is located.</p></li><li><p><code>hybrid_connection_endpoint_id</code> - (Optional) Specifies the id where the Hybrid Connection is located.</p></li><li><p><code>service_bus_queue_endpoint_id</code> - (Optional) Specifies the id where the Service Bus Queue is located.</p></li><li><p><code>service_bus_topic_endpoint_id</code> - (Optional) Specifies the id where the Service Bus Topic is located.</p></li><li><p><code>storage_queue_endpoint</code> - (Optional) A <code>storage_queue_endpoint</code> block as defined below.</p></li><li><p><code>webhook_endpoint</code> - (Optional) A <code>webhook_endpoint</code> block as defined below.</p></li></ul><p>~&gt; <strong>NOTE:</strong> One of <code>azure_function_endpoint</code>, <code>eventhub_endpoint_id</code>, <code>hybrid_connection_endpoint</code>, <code>hybrid_connection_endpoint_id</code>, <code>service_bus_queue_endpoint_id</code>, <code>service_bus_topic_endpoint_id</code>, <code>storage_queue_endpoint</code> or <code>webhook_endpoint</code> must be specified.</p><ul><li><p><code>included_event_types</code> - (Optional) A list of applicable event types that need to be part of the event subscription.</p></li><li><p><code>subject_filter</code> - (Optional) A <code>subject_filter</code> block as defined below.</p></li><li><p><code>advanced_filter</code> - (Optional) A <code>advanced_filter</code> block as defined below.</p></li><li><p><code>delivery_identity</code> - (Optional) A <code>delivery_identity</code> block as defined below.</p></li><li><p><code>delivery_property</code> - (Optional) One or more <code>delivery_property</code> blocks as defined below.</p></li><li><p><code>dead_letter_identity</code> - (Optional) A <code>dead_letter_identity</code> block as defined below.</p></li></ul><p>-&gt; <strong>Note:</strong> <code>storage_blob_dead_letter_destination</code> must be specified when a <code>dead_letter_identity</code> is specified</p><ul><li><p><code>storage_blob_dead_letter_destination</code> - (Optional) A <code>storage_blob_dead_letter_destination</code> block as defined below.</p></li><li><p><code>retry_policy</code> - (Optional) A <code>retry_policy</code> block as defined below.</p></li><li><p><code>labels</code> - (Optional) A list of labels to assign to the event subscription.</p></li><li><p><code>advanced_filtering_on_arrays_enabled</code> - (Optional) Specifies whether advanced filters should be evaluated against an array of values instead of expecting a singular value. Defaults to <code>false</code>.</p></li></ul><hr /><p>A <code>storage_queue_endpoint</code> block supports the following:</p><ul><li><p><code>storage_account_id</code> - (Required) Specifies the id of the storage account id where the storage queue is located.</p></li><li><p><code>queue_name</code> - (Required) Specifies the name of the storage queue where the Event Subscription will receive events.</p></li><li><p><code>queue_message_time_to_live_in_seconds</code> - (Optional) Storage queue message time to live in seconds.</p></li></ul><hr /><p>An <code>azure_function_endpoint</code> block supports the following:</p><ul><li><p><code>function_id</code> - (Required) Specifies the ID of the Function where the Event Subscription will receive events. This must be the functions ID in format {function_app.id}/functions/{name}.</p></li><li><p><code>max_events_per_batch</code> - (Optional) Maximum number of events per batch.</p></li><li><p><code>preferred_batch_size_in_kilobytes</code> - (Optional) Preferred batch size in Kilobytes.</p></li></ul><hr /><p>A <code>webhook_endpoint</code> block supports the following:</p><ul><li><p><code>url</code> - (Required) Specifies the url of the webhook where the Event Subscription will receive events.</p></li><li><p><code>base_url</code> - (Computed) The base url of the webhook where the Event Subscription will receive events.</p></li><li><p><code>max_events_per_batch</code> - (Optional) Maximum number of events per batch.</p></li><li><p><code>preferred_batch_size_in_kilobytes</code> - (Optional) Preferred batch size in Kilobytes.</p></li><li><p><code>active_directory_tenant_id</code> - (Optional) The Azure Active Directory Tenant ID to get the access token that will be included as the bearer token in delivery requests.</p></li><li><p><code>active_directory_app_id_or_uri</code> - (Optional) The Azure Active Directory Application ID or URI to get the access token that will be included as the bearer token in delivery requests.</p></li></ul><hr /><p>A <code>subject_filter</code> block supports the following:</p><ul><li><p><code>subject_begins_with</code> - (Optional) A string to filter events for an event subscription based on a resource path prefix.</p></li><li><p><code>subject_ends_with</code> - (Optional) A string to filter events for an event subscription based on a resource path suffix.</p></li><li><p><code>case_sensitive</code> - (Optional) Specifies if <code>subject_begins_with</code> and <code>subject_ends_with</code> case sensitive. This value </p></li></ul><hr /><p>A <code>advanced_filter</code> supports the following nested blocks:</p><ul><li><code>bool_equals</code> - (Optional) Compares a value of an event using a single boolean value.</li><li><code>number_greater_than</code> - (Optional) Compares a value of an event using a single floating point number.</li><li><code>number_greater_than_or_equals</code> - (Optional) Compares a value of an event using a single floating point number.</li><li><code>number_less_than</code> - (Optional) Compares a value of an event using a single floating point number.</li><li><code>number_less_than_or_equals</code> - (Optional) Compares a value of an event using a single floating point number.</li><li><code>number_in</code> - (Optional) Compares a value of an event using multiple floating point numbers.</li><li><code>number_not_in</code> - (Optional) Compares a value of an event using multiple floating point numbers.</li><li><code>number_in_range</code> - (Optional) Compares a value of an event using multiple floating point number ranges.</li><li><code>number_not_in_range</code> - (Optional) Compares a value of an event using multiple floating point number ranges.</li><li><code>string_begins_with</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>string_not_begins_with</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>string_ends_with</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>string_not_ends_with</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>string_contains</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>string_not_contains</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>string_in</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>string_not_in</code> - (Optional) Compares a value of an event using multiple string values.</li><li><code>is_not_null</code> - (Optional) Evaluates if a value of an event isn't NULL or undefined.</li><li><code>is_null_or_undefined</code> - (Optional) Evaluates if a value of an event is NULL or undefined.</li></ul><p>Each nested block consists of a key and a value(s) element.</p><ul><li><p><code>key</code> - (Required) Specifies the field within the event data that you want to use for filtering. Type of the field can be a number, boolean, or string.</p></li><li><p><code>value</code> - (Required) Specifies a single value to compare to when using a single value operator.</p></li></ul><p>OR</p><ul><li><code>values</code> - (Required) Specifies an array of values to compare to when using a multiple values operator.</li></ul><p>~&gt; <strong>NOTE:</strong> A maximum of total number of advanced filter values allowed on event subscription is 25.</p><hr /><p>A <code>delivery_identity</code> block supports the following:</p><ul><li><p><code>type</code> - (Required) Specifies the type of Managed Service Identity that is used for event delivery. Allowed value is <code>SystemAssigned</code>, <code>UserAssigned</code>.</p></li><li><p><code>user_assigned_identity</code> - (Optional) The user identity associated with the resource.</p></li></ul><hr /><p>A <code>delivery_property</code> block supports the following:</p><p>~&gt; <strong>NOTE:</strong> <code>delivery_property</code> blocks are only effective when using an <code>azure_function_endpoint</code>, <code>eventhub_endpoint_id</code>, <code>hybrid_connection_endpoint_id</code>, <code>service_bus_topic_endpoint_id</code>, or <code>webhook_endpoint</code> endpoint specification.</p><ul><li><p><code>header_name</code> - (Required) The name of the header to send on to the destination.</p></li><li><p><code>type</code> - (Required) Either <code>Static</code> or <code>Dynamic</code>.</p></li><li><p><code>value</code> - (Optional) If the <code>type</code> is <code>Static</code>, then provide the value to use.</p></li><li><p><code>source_field</code> - (Optional) If the <code>type</code> is <code>Dynamic</code>, then provide the payload field to be used as the value. Valid source fields differ by subscription type.</p></li><li><p><code>secret</code> - (Optional) Set to <code>true</code> if the <code>value</code> is a secret and should be protected, otherwise <code>false</code>. If <code>true</code> then this value won't be returned from Azure API calls.</p></li></ul><hr /><p>A <code>dead_letter_identity</code> block supports the following:</p><ul><li><p><code>type</code> - (Required) Specifies the type of Managed Service Identity that is used for dead lettering. Allowed value is <code>SystemAssigned</code>, <code>UserAssigned</code>.</p></li><li><p><code>user_assigned_identity</code> - (Optional) The user identity associated with the resource.</p></li></ul><hr /><p>A <code>storage_blob_dead_letter_destination</code> block supports the following:</p><ul><li><p><code>storage_account_id</code> - (Required) Specifies the id of the storage account id where the storage blob is located.</p></li><li><p><code>storage_blob_container_name</code> - (Required) Specifies the name of the Storage blob container that is the destination of the deadletter events.</p></li></ul><hr /><p>A <code>retry_policy</code> block supports the following:</p><ul><li><p><code>max_delivery_attempts</code> - (Required) Specifies the maximum number of delivery retry attempts for events.</p></li><li><p><code>event_time_to_live</code> - (Required) Specifies the time to live (in minutes) for events. Supported range is <code>1</code> to <code>1440</code>. See <a href=\"https://docs.microsoft.com/azure/event-grid/manage-event-delivery#set-retry-policy\">official documentation</a> for more details.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><code>id</code> - The ID of the EventGrid System Topic.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 30 minutes) Used when creating the Messaging.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Messaging.</li><li><code>update</code> - (Defaults to 30 minutes) Used when updating the Messaging.</li><li><code>delete</code> - (Defaults to 30 minutes) Used when deleting the Messaging.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>EventGrid System Topic Event Subscriptions can be imported using the <code>resource id</code>, e.g.</p><p>shell<br />terraform import azurerm_eventgrid_system_topic_event_subscription.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.EventGrid/systemTopics/topic1/eventSubscriptions/subscription1</p>", "description": "<h1 id=\"azurerm_eventgrid_system_topic_event_subscription\">azurerm_eventgrid_system_topic_event_subscription</h1><p>Manages an EventGrid System Topic Event Subscription.</p>"}