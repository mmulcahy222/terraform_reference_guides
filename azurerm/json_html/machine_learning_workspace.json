{"azurerm-machine-learning-workspace": "<h1 id=\"azurerm_machine_learning_workspace\">azurerm_machine_learning_workspace</h1><p>Manages a Azure Machine Learning Workspace</p><p>~&gt; <strong>NOTE:</strong> For examples on how to set up the Azure Machine Learning workspace, together with compute and integrated services, see <a href=\"https://github.com/Azure/terraform/tree/master/quickstart\">Terraform Quickstart</a></p>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p><br />provider \"azurerm\" {<br />  features {}<br />}</p><p>data \"azurerm_client_config\" \"current\" {}</p><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><p>resource \"azurerm_application_insights\" \"example\" {<br />  name                = \"workspace-example-ai\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  application_type    = \"web\"<br />}</p><p>resource \"azurerm_key_vault\" \"example\" {<br />  name                = \"workspaceexamplekeyvault\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  tenant_id           = data.azurerm_client_config.current.tenant_id<br />  sku_name            = \"premium\"<br />}</p><p>resource \"azurerm_storage_account\" \"example\" {<br />  name                     = \"workspacestorageaccount\"<br />  location                 = azurerm_resource_group.example.location<br />  resource_group_name      = azurerm_resource_group.example.name<br />  account_tier             = \"Standard\"<br />  account_replication_type = \"GRS\"<br />}</p><p>resource \"azurerm_machine_learning_workspace\" \"example\" {<br />  name                    = \"example-workspace\"<br />  location                = azurerm_resource_group.example.location<br />  resource_group_name     = azurerm_resource_group.example.name<br />  application_insights_id = azurerm_application_insights.example.id<br />  key_vault_id            = azurerm_key_vault.example.id<br />  storage_account_id      = azurerm_storage_account.example.id</p><p>identity {<br />    type = \"SystemAssigned\"<br />  }<br />}<br /></p>", "example-usage-with-data-encryption": "<h2 id=\"example-usage-with-data-encryption\">Example Usage with Data encryption</h2><p>~&gt; <strong>NOTE:</strong> The Key Vault must enable purge protection.</p><p><br />provider \"azurerm\" {<br />  features {<br />    key_vault {<br />      purge_soft_delete_on_destroy = false<br />    }<br />  }<br />}</p><p>data \"azurerm_client_config\" \"current\" {}</p><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><p>resource \"azurerm_application_insights\" \"example\" {<br />  name                = \"workspace-example-ai\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  application_type    = \"web\"<br />}</p><p>resource \"azurerm_key_vault\" \"example\" {<br />  name                     = \"workspaceexamplekeyvault\"<br />  location                 = azurerm_resource_group.example.location<br />  resource_group_name      = azurerm_resource_group.example.name<br />  tenant_id                = data.azurerm_client_config.current.tenant_id<br />  sku_name                 = \"premium\"<br />  purge_protection_enabled = true<br />}<br />resource \"azurerm_key_vault_access_policy\" \"example\" {<br />  key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = data.azurerm_client_config.current.tenant_id<br />  object_id    = data.azurerm_client_config.current.object_id</p><p>key_permissions = [<br />    \"Create\",<br />    \"Get\",<br />    \"Delete\",<br />    \"Purge\",<br />    \"GetRotationPolicy\",<br />  ]<br />}</p><p>resource \"azurerm_storage_account\" \"example\" {<br />  name                     = \"workspacestorageaccount\"<br />  location                 = azurerm_resource_group.example.location<br />  resource_group_name      = azurerm_resource_group.example.name<br />  account_tier             = \"Standard\"<br />  account_replication_type = \"GRS\"<br />}</p><p>resource \"azurerm_key_vault_key\" \"example\" {<br />  name         = \"workspaceexamplekeyvaultkey\"<br />  key_vault_id = azurerm_key_vault.example.id<br />  key_type     = \"RSA\"<br />  key_size     = 2048</p><p>key_opts = [<br />    \"decrypt\",<br />    \"encrypt\",<br />    \"sign\",<br />    \"unwrapKey\",<br />    \"verify\",<br />    \"wrapKey\",<br />  ]</p><p>depends_on = [azurerm_key_vault.example, azurerm_key_vault_access_policy.example]<br />}</p><p>resource \"azurerm_machine_learning_workspace\" \"example\" {<br />  name                    = \"example-workspace\"<br />  location                = azurerm_resource_group.example.location<br />  resource_group_name     = azurerm_resource_group.example.name<br />  application_insights_id = azurerm_application_insights.example.id<br />  key_vault_id            = azurerm_key_vault.example.id<br />  storage_account_id      = azurerm_storage_account.example.id</p><p>identity {<br />    type = \"SystemAssigned\"<br />  }</p><p>encryption {<br />    key_vault_id = azurerm_key_vault.example.id<br />    key_id       = azurerm_key_vault_key.example.id<br />  }<br />}<br /></p>", "example-usage-with-user-assigned-identity-and-data-encryption": "<h2 id=\"example-usage-with-user-assigned-identity-and-data-encryption\">Example Usage with User Assigned Identity and Data Encryption</h2><p>~&gt; <strong>NOTE:</strong> The Key Vault must enable purge protection.</p><p><br />provider \"azurerm\" {<br />  features {<br />    key_vault {<br />      purge_soft_delete_on_destroy = false<br />    }<br />  }<br />}</p><p>data \"azurerm_client_config\" \"current\" {}</p><p>resource \"azurerm_resource_group\" \"example\" {<br />  name     = \"example-resources\"<br />  location = \"West Europe\"<br />}</p><p>resource \"azurerm_application_insights\" \"example\" {<br />  name                = \"example-ai\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />  application_type    = \"web\"<br />}</p><p>resource \"azurerm_storage_account\" \"example\" {<br />  name                     = \"examplestorageaccount\"<br />  location                 = azurerm_resource_group.example.location<br />  resource_group_name      = azurerm_resource_group.example.name<br />  account_tier             = \"Standard\"<br />  account_replication_type = \"GRS\"<br />}</p><p>resource \"azurerm_key_vault\" \"example\" {<br />  name                     = \"example-keyvalut\"<br />  location                 = azurerm_resource_group.example.location<br />  resource_group_name      = azurerm_resource_group.example.name<br />  tenant_id                = data.azurerm_client_config.current.tenant_id<br />  sku_name                 = \"premium\"<br />  purge_protection_enabled = true<br />}</p><p>resource \"azurerm_user_assigned_identity\" \"example\" {<br />  name                = \"example-identity\"<br />  location            = azurerm_resource_group.example.location<br />  resource_group_name = azurerm_resource_group.example.name<br />}</p><p>resource \"azurerm_key_vault_access_policy\" \"example-identity\" {<br />  key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = data.azurerm_client_config.current.tenant_id<br />  object_id    = azurerm_user_assigned_identity.example.principal_id</p><p>// default set by service<br />  key_permissions = [<br />    \"WrapKey\",<br />    \"UnwrapKey\",<br />    \"Get\",<br />    \"Recover\",<br />  ]</p><p>secret_permissions = [<br />    \"Get\",<br />    \"List\",<br />    \"Set\",<br />    \"Delete\",<br />    \"Recover\",<br />    \"Backup\",<br />    \"Restore\"<br />  ]<br />}</p><p>resource \"azurerm_key_vault_access_policy\" \"example-sp\" {<br />  key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = data.azurerm_client_config.current.tenant_id<br />  object_id    = data.azurerm_client_config.current.object_id</p><p>key_permissions = [<br />    \"Get\",<br />    \"Create\",<br />    \"Recover\",<br />    \"Delete\",<br />    \"Purge\",<br />    \"GetRotationPolicy\",<br />  ]<br />}</p><p>data \"azuread_service_principal\" \"test\" {<br />  display_name = \"Azure Cosmos DB\"<br />}</p><p>resource \"azurerm_key_vault_access_policy\" \"example-cosmosdb\" {<br />  key_vault_id = azurerm_key_vault.example.id<br />  tenant_id    = data.azurerm_client_config.current.tenant_id<br />  object_id    = data.azuread_service_principal.test.object_id</p><p>key_permissions = [<br />    \"Get\",<br />    \"Recover\",<br />    \"UnwrapKey\",<br />    \"WrapKey\",<br />  ]<br />  depends_on = [data.azuread_service_principal.test, data.azurerm_client_config.current]<br />}</p><p>resource \"azurerm_key_vault_key\" \"example\" {<br />  name         = \"example-keyvaultkey\"<br />  key_vault_id = azurerm_key_vault.example.id<br />  key_type     = \"RSA\"<br />  key_size     = 2048</p><p>key_opts = [<br />    \"decrypt\",<br />    \"encrypt\",<br />    \"sign\",<br />    \"unwrapKey\",<br />    \"verify\",<br />    \"wrapKey\",<br />  ]<br />  depends_on = [azurerm_key_vault.example, azurerm_key_vault_access_policy.example-sp]<br />}</p><p>resource \"azurerm_role_assignment\" \"example-role1\" {<br />  scope                = azurerm_key_vault.example.id<br />  role_definition_name = \"Contributor\"<br />  principal_id         = azurerm_user_assigned_identity.example.principal_id<br />}</p><p>resource \"azurerm_role_assignment\" \"example-role2\" {<br />  scope                = azurerm_storage_account.example.id<br />  role_definition_name = \"Storage Blob Data Contributor\"<br />  principal_id         = azurerm_user_assigned_identity.example.principal_id<br />}</p><p>resource \"azurerm_role_assignment\" \"example-role3\" {<br />  scope                = azurerm_storage_account.example.id<br />  role_definition_name = \"Contributor\"<br />  principal_id         = azurerm_user_assigned_identity.example.principal_id<br />}</p><p>resource \"azurerm_role_assignment\" \"example-role4\" {<br />  scope                = azurerm_application_insights.example.id<br />  role_definition_name = \"Contributor\"<br />  principal_id         = azurerm_user_assigned_identity.example.principal_id<br />}</p><p>resource \"azurerm_machine_learning_workspace\" \"example\" {<br />  name                    = \"example-workspace\"<br />  location                = azurerm_resource_group.example.location<br />  resource_group_name     = azurerm_resource_group.example.name<br />  application_insights_id = azurerm_application_insights.example.id<br />  key_vault_id            = azurerm_key_vault.example.id<br />  storage_account_id      = azurerm_storage_account.example.id</p><p>high_business_impact = true</p><p>primary_user_assigned_identity = azurerm_user_assigned_identity.example.id<br />  identity {<br />    type = \"UserAssigned\"<br />    identity_ids = [<br />      azurerm_user_assigned_identity.example.id,<br />    ]<br />  }</p><p>encryption {<br />    user_assigned_identity_id = azurerm_user_assigned_identity.example.id<br />    key_vault_id              = azurerm_key_vault.example.id<br />    key_id                    = azurerm_key_vault_key.example.id<br />  }</p><p>depends_on = [<br />    azurerm_role_assignment.example-role1, azurerm_role_assignment.example-role2, azurerm_role_assignment.example-role3,<br />    azurerm_role_assignment.example-role4,<br />    azurerm_key_vault_access_policy.example-cosmosdb,<br />  ]<br />}<br /></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) Specifies the name of the Machine Learning Workspace. Changing this forces a new resource to be created.</p></li><li><p><code>resource_group_name</code> - (Required) Specifies the name of the Resource Group in which the Machine Learning Workspace should exist. Changing this forces a new resource to be created.</p></li><li><p><code>location</code> - (Required) Specifies the supported Azure location where the Machine Learning Workspace should exist. Changing this forces a new resource to be created.</p></li><li><p><code>application_insights_id</code> - (Required) The ID of the Application Insights associated with this Machine Learning Workspace. Changing this forces a new resource to be created.</p></li><li><p><code>key_vault_id</code> - (Required) The ID of key vault associated with this Machine Learning Workspace. Changing this forces a new resource to be created.</p></li><li><p><code>storage_account_id</code> - (Required) The ID of the Storage Account associated with this Machine Learning Workspace. Changing this forces a new resource to be created.</p></li></ul><p>-&gt; <strong>NOTE:</strong> The <code>account_tier</code> cannot be <code>Premium</code> in order to associate the Storage Account to this Machine Learning Workspace.</p><ul><li><p><code>identity</code> - (Required) An <code>identity</code> block as defined below.</p></li><li><p><code>container_registry_id</code> - (Optional) The ID of the container registry associated with this Machine Learning Workspace. Changing this forces a new resource to be created.</p></li></ul><p>-&gt; <strong>NOTE:</strong> The <code>admin_enabled</code> should be <code>true</code> in order to associate the Container Registry to this Machine Learning Workspace.</p><ul><li><p><code>public_access_behind_virtual_network_enabled</code> - (Optional) Enable public access when this Machine Learning Workspace is behind a VNet. Changing this forces a new resource to be created.</p></li><li><p><code>public_network_access_enabled</code> - (Optional) Enable public access when this Machine Learning Workspace is behind VNet.</p></li></ul><p>~&gt; <strong>NOTE:</strong> <code>public_access_behind_virtual_network_enabled</code> is deprecated and will be removed in favour of the property <code>public_network_access_enabled</code>.</p><ul><li><p><code>image_build_compute_name</code> - (Optional) The compute name for image build of the Machine Learning Workspace.</p></li><li><p><code>description</code> - (Optional) The description of this Machine Learning Workspace.</p></li><li><p><code>encryption</code> - (Optional) An <code>encryption</code> block as defined below. Changing this forces a new resource to be created.</p></li><li><p><code>friendly_name</code> - (Optional) Display name for this Machine Learning Workspace.</p></li><li><p><code>high_business_impact</code> - (Optional) Flag to signal High Business Impact (HBI) data in the workspace and reduce diagnostic data collected by the service</p></li><li><p><code>primary_user_assigned_identity</code> - (Optional) The user assigned identity id that represents the workspace identity.</p></li><li><p><code>v1_legacy_mode_enabled</code> - (Optional) Enable V1 API features, enabling <code>v1_legacy_mode</code> may prevent you from using features provided by the v2 API. Defaults to <code>false</code>.</p></li><li><p><code>sku_name</code> - (Optional) SKU/edition of the Machine Learning Workspace, possible values are <code>Basic</code>. Defaults to <code>Basic</code>.</p></li><li><p><code>tags</code> - (Optional) A mapping of tags to assign to the resource.</p></li></ul><hr /><p>An <code>identity</code> block supports the following:</p><ul><li><p><code>type</code> - (Required) Specifies the type of Managed Service Identity that should be configured on this Machine Learning Workspace. Possible values are <code>SystemAssigned</code>, <code>UserAssigned</code>, <code>SystemAssigned, UserAssigned</code> (to enable both).</p></li><li><p><code>identity_ids</code> - (Optional) Specifies a list of User Assigned Managed Identity IDs to be assigned to this Machine Learning Workspace.</p></li></ul><p>~&gt; <strong>NOTE:</strong> This is required when <code>type</code> is set to <code>UserAssigned</code> or <code>SystemAssigned, UserAssigned</code>.</p><hr /><p>An <code>encryption</code> block supports the following:</p><ul><li><p><code>key_vault_id</code> - (Required) The ID of the keyVault where the customer owned encryption key is present.</p></li><li><p><code>key_id</code> - (Required) The Key Vault URI to access the encryption key.</p></li><li><p><code>user_assigned_identity_id</code> - (Optional) The Key Vault URI to access the encryption key.</p></li></ul><p>~&gt; <strong>Note</strong>: <code>user_assigned_identity_id</code> must set when<code>identity.type</code> is <code>UserAssigned</code> or service won't be able to find the assigned permissions.</p>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the Arguments listed above - the following Attributes are exported:</p><ul><li><p><code>id</code> - The ID of the Machine Learning Workspace.</p></li><li><p><code>discovery_url</code> - The url for the discovery service to identify regional endpoints for machine learning experimentation services.</p></li><li><p><code>workspace_id</code> - The immutable id associated with this workspace.</p></li></ul><hr /><p>An <code>identity</code> block exports the following:</p><ul><li><p><code>principal_id</code> - The Principal ID associated with this Managed Service Identity.</p></li><li><p><code>tenant_id</code> - The Tenant ID associated with this Managed Service Identity.</p></li></ul><h3 id=\"timeouts\">Timeouts</h3><p>The <code>timeouts</code> block allows you to specify <a href=\"https://www.terraform.io/language/resources/syntax#operation-timeouts\">timeouts</a> for certain actions:</p><ul><li><code>create</code> - (Defaults to 30 minutes) Used when creating the Machine Learning Workspace.</li><li><code>update</code> - (Defaults to 30 minutes) Used when updating the Machine Learning Workspace.</li><li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Machine Learning Workspace.</li><li><code>delete</code> - (Defaults to 30 minutes) Used when deleting the Machine Learning Workspace.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Machine Learning Workspace can be imported using the <code>resource id</code>, e.g.</p><p><code>shellterraform import azurerm_machine_learning_workspace.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.MachineLearningServices/workspaces/workspace1</code></p>", "description": "<h1 id=\"azurerm_machine_learning_workspace\">azurerm_machine_learning_workspace</h1><p>Manages a Azure Machine Learning Workspace</p><p>~&gt; <strong>NOTE:</strong> For examples on how to set up the Azure Machine Learning workspace, together with compute and integrated services, see <a href=\"https://github.com/Azure/terraform/tree/master/quickstart\">Terraform Quickstart</a></p>"}