{"ibm-kms-key-policies": "<h1 id=\"ibm_kms_key_policies\">ibm_kms_key_policies</h1><p>Provides a resource to manage key policies for Key Protect and Hyper Protect Crypto Service (HPCS) services. This allows key policies to be created and updated. Key policies can be created for an existing kms key resource.</p><p><strong>NOTE</strong><br />: <code>terraform destroy</code> does not remove the policies of the Key but only clears the state file. Key Policies get deleted when the associated key resource is destroyed.</p>", "example-usage-to-create-a-key-and-associate-a-key-policy": "<h2 id=\"example-usage-to-create-a-key-and-associate-a-key-policy\">Example usage to create a Key and associate a key policy.</h2><p>terraform<br />resource \"ibm_resource_instance\" \"kms_instance\" {<br />  name     = \"instance-name\"<br />  service  = \"kms\"<br />  plan     = \"tiered-pricing\"<br />  location = \"us-south\"<br />}</p><p>resource \"ibm_kms_key\" \"key\" {<br />  instance_id = ibm_resource_instance.kp_instance.guid<br />  key_name       = \"key\"<br />  standard_key   = false<br />}</p><p>resource \"ibm_kms_key_alias\" \"key_alias\" {<br />    instance_id = ibm_kms_key.test.instance_id<br />    alias  = \"alias\"<br />    key_id = \"ibm_kms_key.test.key_id\"<br />}</p><p>resource \"ibm_kms_key_policies\" \"key_policy\" {<br />  instance_id = ibm_resource_instance.kms_instance.guid<br />  key_id = ibm_kms_key.key.key_id<br />  rotation {<br />       interval_month = 3<br />    }<br />    dual_auth_delete {<br />       enabled = false<br />    }<br />}<br />OR<br />resource \"ibm_kms_key_policies\" \"key_policy\" {<br />  instance_id = ibm_resource_instance.kms_instance.guid<br />  alias= ibm_kms_key_alias.key_alias.alias<br />  rotation {<br />       interval_month = 3<br />    }<br />    dual_auth_delete {<br />       enabled = false<br />    }<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument reference</h2><p>The following arguments are supported:</p><ul><li><code>endpoint_type</code> - (Optional, String) The type of the public or private endpoint to be used for fetching policies.</li><li><code>key_id</code> - (Required - if the alias is not provided, String) The ID of the key.</li><li><code>alias</code> - (Required - if the key_id is not provided, String) The alias created for the key.</li><li><code>instance_id</code> - (Required, String) The key-protect instance ID for creating policies.</li><li><code>rotation</code> - (Optional,list) The key rotation time interval in months, with a minimum of 1, and a maximum of 12. Atleast one of <code>rotation</code> and <code>dual_auth_delete</code> is required</li></ul><p>Nested scheme for <code>rotation</code>:<br />    - <code>enabled</code> - (Optional, Bool) If set to <strong>true</strong>, Key Protect enables a rotation policy on a single key.<br />    - <code>interval_month</code>- (Optional, Required if enabled = true, Integer) Specifies the key rotation time interval in months. CONSTRAINTS: 1 \u2264 value \u2264 12 <strong>Note</strong> Rotation policy cannot be set for standard key and imported key. Once the rotation policy is set, it cannot be unset or removed by using Terraform.<br />- <code>dual_auth_delete</code> - (Optional, List) Data associated with the dual authorization delete policy. Atleast one of <code>rotation</code> and <code>dual_auth_delete</code> is required.</p><pre><code>Nested scheme for `dual_auth_delete`:- `enabled`- (Required, Bool) If set to **true**, Key Protect enables a dual authorization policy on a single key. **Note:** Once the dual authorization policy is set on the key, it cannot be reverted. A key with dual authorization policy enabled cannot be destroyed by using  Terraform.</code></pre>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute reference</h2><p>In addition to all arguments above, the following attributes are exported:</p><ul><li><code>id</code> - (String) The CRN of the key.</li><li><code>key_id</code> - (String) The ID of the key.</li><li><code>alias</code>  - (String) The alias of the key.</li><li><p><code>rotation</code> - (List) The key rotation time interval in months, with a minimum of 1, and a maximum of 12.</p><p>Nested scheme for <code>rotation</code>:<br />- <code>enabled</code> - (Bool) If set to <strong>true</strong>, Key Protect enables a rotation policy on the key.<br />- <code>interval_month</code> - (Int) The key rotation time interval in months.<br />- <code>created_by</code> - (String) The unique ID for the resource that created the policy.<br />- <code>creation_date</code> - (Timestamp) The date the policy was created. The date format follows RFC 3339.<br />- <code>crn</code> - (String) The Cloud Resource Name (CRN) that uniquely identifies your cloud resources.<br />- <code>id</code> - (String) The v4 UUID used to uniquely identify the policy resource, as specified by RFC 4122.<br />- <code>last_update_date</code> - (Timestamp)  The date when the policy last replaced or modified. The date format follows RFC 3339.<br />- <code>updated_by</code> - (String) The unique ID for the resource that updated the policy.</p></li><li><p><code>dual_auth_delete</code> - (List) The data associated with the dual authorization delete policy.</p><p>Nested scheme for <code>dual_auth_delete</code>:<br /> - <code>enabled</code> - (Bool) If set to <strong>true</strong>, Key Protect enables a dual authorization policy on the key.<br /> - <code>created_by</code> - (String) The unique ID for the resource that created the policy.<br /> - <code>creation_date</code> - (Timestamp) The date the policy was created. The date format follows RFC 3339.<br /> - <code>crn</code> - (String) The Cloud Resource Name (CRN) that uniquely identifies your cloud resources.<br /> - <code>id</code> - (String) The v4 UUID used to uniquely identify the policy resource, as specified by RFC 4122.<br /> - <code>last_update_date</code> - (Timestamp)  The date when the policy last replaced or modified. The date format follows RFC 3339.<br /> - <code>updated_by</code> - (String) The unique ID for the resource that updated the policy.</p></li></ul>", "import": "<h2 id=\"import\">Import</h2><p>ibm_kms_key_policies can be imported using id and crn, eg ibm_kms_key_policies.crn</p><p>$ terraform import ibm_kms_key_policies.crn crn:v1:bluemix:public:kms:us-south:a/faf6addbf6bf4768hhhhe342a5bdd702:05f5bf91-ec66-462f-80eb-8yyui138a315:key:52448f62-9272-4d29-a515-15019e3e5asd</p>", "description": "<h1 id=\"ibm_kms_key_policies\">ibm_kms_key_policies</h1><p>Provides a resource to manage key policies for Key Protect and Hyper Protect Crypto Service (HPCS) services. This allows key policies to be created and updated. Key policies can be created for an existing kms key resource.</p><p><strong>NOTE</strong><br />: <code>terraform destroy</code> does not remove the policies of the Key but only clears the state file. Key Policies get deleted when the associated key resource is destroyed.</p>"}