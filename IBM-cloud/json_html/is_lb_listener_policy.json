{"ibm-is-lb-listener-policy": "<h1 id=\"ibm_is_lb_listener_policy\">ibm_is_lb_listener_policy</h1><p>Create, update, or delete a load balancer listener policy. For more information, about VPC load balance listener policy, see <a href=\"https://cloud.ibm.com/docs/vpc?topic=vpc-monitoring-metrics-alb\">monitoring application Load Balancer for VPC metrics</a>.</p><p><strong>Note:</strong> <br />VPC infrastructure services are a regional specific based endpoint, by default targets to <code>us-south</code>. Please make sure to target right region in the provider block as shown in the <code>provider.tf</code> file, if VPC service is created in region other than <code>us-south</code>.</p><p><strong>provider.tf</strong></p><p>terraform<br />provider \"ibm\" {<br />  region = \"eu-gb\"<br />}</p>", "example-usage": "<h2 id=\"example-usage\">Example usage</h2><h3 id=\"sample-to-create-a-load-balancer-listener-policy-for-a-redirect-action\">Sample to create a load balancer listener policy for a <code>redirect</code> action.</h3><br /><p>terraform<br />resource \"ibm_is_lb\" \"example\" {<br />  name    = \"example-lb\"<br />  subnets = [ibm_is_subnet.example.id]<br />}</p><br /><p>resource \"ibm_is_lb_listener\" \"example\" {<br />  lb       = ibm_is_lb.example.id<br />  port     = \"9086\"<br />  protocol = \"http\"<br />}<br />resource \"ibm_is_lb_listener_policy\" \"example\" {<br />  lb                      = ibm_is_lb.example.id<br />  listener                = ibm_is_lb_listener.example.listener_id<br />  action                  = \"redirect\"<br />  priority                = 2<br />  name                    = \"example-listener-policy\"<br />  target_http_status_code = 302<br />  target_url              = \"https://www.redirect.com\"<br />  rules {<br />    condition = \"contains\"<br />    type      = \"header\"<br />    field     = \"1\"<br />    value     = \"2\"<br />  }<br />}</p><br /><h3 id=\"sample-to-create-a-load-balancer-listener-policy-for-a-https_redirect-action\">Sample to create a load balancer listener policy for a <code>https_redirect</code> action.</h3><br /><p>terraform<br />resource \"ibm_is_lb\" \"example\" {<br />  name    = \"example-lb\"<br />  subnets = [ibm_is_subnet.example.id]<br />}</p><br /><p>resource \"ibm_is_lb_listener\" \"example_http_source\" {<br />  lb       = ibm_is_lb.example.id<br />  port     = \"9080\"<br />  protocol = \"http\"<br />}</p><br /><p>resource \"ibm_is_lb_listener\" \"example_https_target\" {<br />  lb                   = ibm_is_lb.example.id<br />  port                 = \"9086\"<br />  protocol             = \"https\"<br />  certificate_instance = \"crn:v1:staging:public:cloudcerts:us-south:a2d1bace7b46e4815a81e52c6ffeba5cf:af925157-b125-4db2-b642-adacb8b9c7f5:certificate:c81627a1bf6f766379cc4b98fd2a44ed\"<br />}</p><br /><p>resource \"ibm_is_lb_listener_policy\" \"example\" {<br />  lb                                = ibm_is_lb.example.id<br />  listener                          = ibm_is_lb_listener.example_http_source.listener_id<br />  action                            = \"https_redirect\"<br />  priority                          = 2<br />  name                              = \"example-listener\"<br />  target_https_redirect_listener    = ibm_is_lb_listener.example_https_target.listener_id<br />  target_https_redirect_status_code = 301<br />  target_https_redirect_uri         = \"/example?doc=geta\"<br />  rules {<br />    condition = \"contains\"<br />    type      = \"header\"<br />    field     = \"1\"<br />    value     = \"2\"<br />  }<br />}</p><br /><h3 id=\"creating-a-load-balancer-listener-policy-for-a-forward-action-by-using-lb-and-lb-listener\">Creating a load balancer listener policy for a <code>forward</code> action by using <code>lb</code> and <code>lb listener</code>.</h3><br /><p>terraform<br />resource \"ibm_is_lb\" \"example\" {<br />  name    = \"example-lb\"<br />  subnets = [ibm_is_subnet.example.id]<br />}</p><br /><p>resource \"ibm_is_lb_listener\" \"example\" {<br />  lb       = ibm_is_lb.example.id<br />  port     = \"9086\"<br />  protocol = \"http\"<br />}</p><br /><p>resource \"ibm_is_lb_pool\" \"example\" {<br />  name           = \"example-lb-pool\"<br />  lb             = ibm_is_lb.example.id<br />  algorithm      = \"round_robin\"<br />  protocol       = \"http\"<br />  health_delay   = 60<br />  health_retries = 5<br />  health_timeout = 30<br />  health_type    = \"http\"<br />}</p><br /><p>resource \"ibm_is_lb_listener_policy\" \"example\" {<br />  lb        = ibm_is_lb.example.id<br />  listener  = ibm_is_lb_listener.example.listener_id<br />  action    = \"forward\"<br />  priority  = 2<br />  name      = \"example-listener\"<br />  target_id = ibm_is_lb_pool.example.pool_id<br />  rules {<br />    condition = \"contains\"<br />    type      = \"header\"<br />    field     = \"1\"<br />    value     = \"2\"<br />  }<br />}</p><br />", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>ibm_is_lb_listener_policy</code> resource provides the following <a href=\"https://www.terraform.io/docs/language/resources/syntax.html\">Timeouts</a> configuration options:</p><ul><li><strong>create</strong>: The creation of the load balancer listener policy is considered <code>failed</code> if no response is received for 10 minutes. </li><li><strong>delete</strong>: The deletion of the load balancer listener policy is considered <code>failed</code> if no response is received for 10 minutes.</li><li><strong>update</strong>: The creation of the load balancer listener policy is considered <code>failed</code> if no response is received for 10 minutes. </li></ul>", "argument-reference": "<h2 id=\"argument-reference\">Argument reference</h2><p>Review the argument references that you can specify for your resource. </p><ul><li><code>action</code> - (Required, Forces new resource, String) The action that you want to specify for your policy. Supported values are <code>forward</code>, <code>redirect</code>, <code>reject</code>, and <code>https_redirect</code>.</li><li><code>lb</code> - (Required, Forces new resource, String) The ID of the load balancer for which you want to create a load balancer listener policy. </li><li><code>listener</code> - (Required, Forces new resource, String) The ID of the load balancer listener.</li><li><code>name</code> - (Optional, String) The name for the load balancer policy. Names must be unique within a load balancer listener.</li><li><code>priority</code>- (Required, Integer) The priority of the load balancer policy. Low values indicate a high priority. The value must be between 1 and 10.Yes.</li><li><code>rules</code>- (Required, List) A list of rules that you want to apply to your load balancer policy. Note that rules can be created only. You cannot update the rules for a load balancer policy.</li></ul><p>Nested scheme for <code>rules</code>:<br />  - <code>condition</code> - (Required, String) The condition that you want to apply to your rule. Supported values are <code>contains</code>, <code>equals</code>, and <code>matches_regex</code>.<br />  - <code>type</code> - (Required, String) The data type where you want to apply the rule condition. Supported values are <code>header</code>, <code>hostname</code>,  and <code>path</code>.<br />  - <code>value</code>- (Required, Integer) The value that must be found in the HTTP header, hostname or path to apply the load balancer listener rule. The value that you define can be between 1 and 128 characters long.<br />  - <code>field</code>- (Required, Integer) If you selected <code>header</code> as the data type where you want to apply the rule condition, enter the name of the HTTP header that you want to check. The name of the header can be between 1 and 128 characters long.<br />- <code>target_id</code> - (Optional, Integer) When <code>action</code> is set to <strong>forward</strong>, specify the ID of the load balancer pool that the load balancer forwards network traffic to.<br />- <code>target_http_status_code</code> - (Optional, Integer) When <code>action</code> is set to <strong>redirect</strong>, specify the HTTP response code that must be returned in the redirect response. Supported values are <code>301</code>, <code>302</code>, <code>303</code>, <code>307</code>, and <code>308</code>. <br />- <code>target_url</code> - (Optional, Integer) When <code>action</code> is set to <strong>redirect</strong>, specify the URL that is used in the redirect response.<br />- <code>target_https_redirect_listener</code> - (Optional, String) When <code>action</code> is set to <strong>https_redirect</strong>, specify the ID of the listener that will be set as http redirect target.<br />- <code>target_https_redirect_status_code</code> - (Optional, Integer) When <code>action</code> is set to <strong>https_redirect</strong>, specify the HTTP status code to be returned in the redirect response. Supported values are <code>301</code>, <code>302</code>, <code>303</code>, <code>307</code>, <code>308</code>.<br />- <code>target_https_redirect_uri</code> - (Optional, String) When <code>action</code> is set to <strong>https_redirect</strong>, specify the target URI where traffic will be redirected.</p><p>~&gt; <strong>Note:</strong> When\u00a0action\u00a0is\u00a0<code>forward</code>,\u00a0<code>target_id</code>\u00a0should specify which pool the load balancer forwards the traffic to.<br />When\u00a0action\u00a0is\u00a0<code>redirect</code>, <code>target_url</code>\u00a0should specify the <code>url</code> and <code>target_http_status_code</code> to specify the code used in the redirect response.<br />When\u00a0action\u00a0is\u00a0<code>https_redirect</code>, <code>target_https_redirect_listener</code>\u00a0should specify the ID of the listener, <code>target_https_redirect_status_code</code> to specify the code used in the redirect response and <code>target_https_redirect_uri</code> to specify the target URI where traffic will be redirected.<br />Network load balancer does not support <code>ibm_is_lb_listener_policy</code>.</p>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute reference</h2><p>In addition to all argument reference list, you can access the following attribute reference after your resource is created.</p><ul><li><code>id</code> - (String) The ID of the load balancer listener policy. The ID is composed of <code>&lt;lb_ID&gt;/&lt;listener_ID&gt;/&lt;policy_ID&gt;</code>.</li><li><code>policy_id</code> - (String) The ID of the load balancer listener policy.</li><li><code>status</code> - (String) The status of the load balancer listener policy.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>The resource can be imported by using the ID. The ID is composed of <code>&lt;lb_ID&gt;/&lt;listener_ID&gt;/&lt;policy_ID&gt;</code>.</p><p><strong>Synatx</strong></p><p>$ terraform import ibm_is_lb_listener_policy.example <lb_ID>/<listener_ID>/<policy_ID></p><p><strong>Example</strong></p><p>$ terraform import ibm_is_lb_listener_policy.example c1e3d5d3-8836-4328-b473-a90e0c9ba941/3ea13dc7-25b4-4c62-8cc7-0f7e092e7a8f/2161a3fb-123c-4a33-9a3d-b3154ef42009</p>", "description": "<h1 id=\"ibm_is_lb_listener_policy\">ibm_is_lb_listener_policy</h1><p>Create, update, or delete a load balancer listener policy. For more information, about VPC load balance listener policy, see <a href=\"https://cloud.ibm.com/docs/vpc?topic=vpc-monitoring-metrics-alb\">monitoring application Load Balancer for VPC metrics</a>.</p><p><strong>Note:</strong> <br />VPC infrastructure services are a regional specific based endpoint, by default targets to <code>us-south</code>. Please make sure to target right region in the provider block as shown in the <code>provider.tf</code> file, if VPC service is created in region other than <code>us-south</code>.</p><p><strong>provider.tf</strong></p><p>terraform<br />provider \"ibm\" {<br />  region = \"eu-gb\"<br />}</p>"}