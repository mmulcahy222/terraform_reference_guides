{"ibm-iam-access-group-policy": "<h1 id=\"ibm_iam_access_group_policy\">ibm_iam_access_group_policy</h1><p>Create, update, or delete an IAM policy for an IAM access group. For more information, about IBM access group policy, see <a href=\"https://cloud.ibm.com/docs/account?topic=account-account-services#account-management-access\">creating policies for account management service access</a>.</p>", "example-usage": "<h2 id=\"example-usage\">Example usage</h2><h3 id=\"access-group-policy-for-all-identity-and-access-enabled-services\">Access group policy for all Identity and Access enabled services</h3><p>The following example creates an IAM policy that grants members of the access group the IAM <code>Viewer</code> platform role to all IAM-enabled services. </p><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Viewer\"]<br />  resource_tags {<br />    name = \"env\"<br />    value = \"dev\"<br />  }<br />  transaction_id     = \"terraformUserPolicy\"<br />}</p><p></p><h3 id=\"access-group-policy-for-all-identity-and-access-enabled-services-within-a-resource-group\">Access group policy for all Identity and Access enabled services within a resource group</h3><p>The following example creates an IAM policy that grants members of the access group the IAM <code>Operator</code> platform role and the <code>Writer</code> service access role to all IAM-enabled services within a resource group. </p><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Operator\", \"Writer\"]</p><p>resources {<br />    resource_group_id = data.ibm_resource_group.group.id<br />  }<br />}<br /></p><h3 id=\"access-group-policy-using-service-with-region\">Access group policy using service with region</h3><p>The following example creates an IAM policy that grants members of the access group the IAM <code>Viewer</code> platform role to all service instances of cloudantnosqldb in us-south region</p><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Viewer\"]</p><p>resources {<br />    service = \"cloudantnosqldb\"<br />    region  = \"us-south\"<br />  }<br />}<br /></p><h3 id=\"access-group-policy-using-service_type-with-region\">Access group policy using service_type with region</h3><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Viewer\"]</p><p>resources {<br />    service_type = \"service\"<br />    region = \"us-south\"<br />  }<br />}</p><p></p><h3 id=\"access-group-policy-using-resource-instance\">Access group policy using resource instance</h3><p>The following example creates an IAM policy that grants members of the access group the IAM <code>Viewer</code> and <code>Administrator</code> platform role, and the <code>Manager</code> service access role to a single service instance. </p><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_resource_instance\" \"instance\" {<br />  name     = \"test\"<br />  service  = \"kms\"<br />  plan     = \"tiered-pricing\"<br />  location = \"us-south\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Manager\", \"Viewer\", \"Administrator\"]</p><p>resources {<br />    service              = \"kms\"<br />    resource_instance_id = element(split(\":\", ibm_resource_instance.instance.id), 7)<br />  }<br />}</p><p></p><h3 id=\"create-a-policy-to-all-instances-of-an-ibm-cloud-service-within-a-resource-group\">Create a policy to all instances of an IBM Cloud service within a resource group</h3><p>The following example creates an IAM policy that grants members of the access group the IAM <code>Viewer</code> platform role to all instances of IBM Cloud Kubernetes Service that are created within a specific resource group. </p><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Viewer\"]</p><p>resources {<br />    service           = \"containers-kubernetes\"<br />    resource_group_id = data.ibm_resource_group.group.id<br />  }<br />}</p><p></p><h3 id=\"access-group-policy-by-using-resource-and-resource-type\">Access group policy by using resource and resource type</h3><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Administrator\"]</p><p>resources {<br />    resource_type = \"resource-group\"<br />    resource      = data.ibm_resource_group.group.id<br />  }<br />}</p><p></p><h3 id=\"access-group-policy-by-using-attributes\">Access group policy by using attributes</h3><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"test\"<br />}</p><p>data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  access_group_id = ibm_iam_access_group.accgrp.id<br />  roles           = [\"Viewer\"]</p><p>resources {<br />    service = \"is\"</p><pre><code>attributes = {  \"vpcId\" = \"*\"}resource_group_id = data.ibm_resource_group.group.id</code></pre><p>}<br />}</p><p></p><h3 id=\"access-group-policy-by-using-resource_attributes\">Access Group Policy by using resource_attributes</h3><p><code>terraformresource \"ibm_iam_access_group\" \"accgrp\" {  name = \"access_group\"}resource \"ibm_iam_access_group_policy\" \"policy\" {  access_group_id = ibm_iam_access_group.accgrp.id  roles           = [\"Viewer\"]  resource_attributes {    name  = \"resource\"    value = \"test123*\"    operator = \"stringMatch\"  }  resource_attributes {    name  = \"serviceName\"    value = \"messagehub\"  }}</code></p><h3 id=\"access-group-policy-by-using-service-and-rule_conditions\">Access Group Policy by using service and rule_conditions</h3><p><code>rule_conditions</code> can be used in conjunction with <code>pattern</code> and <code>rule_operator</code> to implement access group policies with time-based conditions. For information see <a href=\"https://cloud.ibm.com/docs/account?topic=account-iam-time-based&amp;interface=ui\">Limiting access with time-based conditions</a>. <strong>Note</strong> Currently, a policy resource created without <code>rule_conditions</code>, <code>pattern</code>, and <code>rule_operator</code> cannot be updated including those conditions on update.</p><p><code>terraformresource \"ibm_iam_access_group\" \"accgrp\" {  name = \"access_group\"}resource \"ibm_iam_access_group_policy\" \"policy\" {  access_group_id = ibm_iam_access_group.accgrp.id  roles           = [\"Viewer\"]  resources {    service = \"kms\"  }  rule_conditions {    key = \"{{environment.attributes.day_of_week}}\"    operator = \"dayOfWeekAnyOf\"    value = [\"1+00:00\",\"2+00:00\",\"3+00:00\",\"4+00:00\"]  }  rule_conditions {    key = \"{{environment.attributes.current_time}}\"    operator = \"timeGreaterThanOrEquals\"    value = [\"09:00:00+00:00\"]  }  rule_conditions {    key = \"{{environment.attributes.current_time}}\"    operator = \"timeLessThanOrEquals\"    value = [\"17:00:00+00:00\"]  }  rule_operator = \"and\"  pattern = \"time-based-conditions:weekly:custom-hours\"}</code></p><h3 id=\"access-group-policy-by-using-service_group_id-resource-attribute\">Access Group Policy by using service_group_id resource attribute</h3><p>terraform<br />resource \"ibm_iam_access_group\" \"accgrp\" {<br />  name = \"access_group\"<br />}</p><p>resource \"ibm_iam_access_group_policy\" \"policy\" {<br />  roles  = [\"Service ID creator\", \"User API key creator\", \"Administrator\"]<br />  resource_attributes {<br />    name     = \"service_group_id\"<br />    operator = \"stringEquals\"<br />    value    = \"IAM\"<br />  }<br />}<br /></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument reference</h2><p>Review the argument references that you can specify for your resource. </p><ul><li><code>access_group_id</code> - (Required, Forces new resource, String) The ID of the access group.</li><li><code>account_management</code> - (Optional, Bool) Gives access to all account management services if set to <strong>true</strong>. Default value <strong>false</strong>. If you set this option, do not specify <code>resources</code> at the same time. <strong>Note</strong> Conflicts with <code>resources</code> and <code>resource_attributes</code>.</li><li><code>roles</code> - (Required, List)  A comma separated list of roles. Valid roles are <code>Writer</code>, <code>Reader</code>, <code>Manager</code>, <code>Administrator</code>, <code>Operator</code>, <code>Viewer</code>, and <code>Editor</code>. For more information, about supported service specific roles, see  <a href=\"https://cloud.ibm.com/docs/account?topic=account-iam-service-roles-actions\">IAM roles and actions</a></li><li><code>resources</code>  (List , Optional) A nested block describes the resource of this policy. <strong>Note</strong> Conflicts with <code>account_management</code> and <code>resource_attributes</code>.</li></ul><p>Nested scheme for <code>resources</code>:<br />  - <code>attributes</code> (Optional, Map) Set resource attributes in the form of <code>name=value,name=value</code>.  If you set this option, do not specify <code>account_management</code> at the same time.<br />  - <code>resource_instance_id</code> - (Optional, String) The ID of resource instance of the policy definition.<br />  - <code>region</code>  (Optional, String) The region of the policy definition.<br />  - <code>resource_type</code>  (Optional, String) The resource type of the policy definition.<br />  - <code>resource</code>  (Optional, String) The resource of the policy definition.<br />  - <code>resources.resource_group_id</code> - (Optional, String) The ID of the resource group. To retrieve the ID, run <code>ibmcloud resource groups</code> or use the <code>ibm_resource_group</code> data source.<br />  - <code>service</code> - (Optional, String) The service name that you want to include in your policy definition. For account management services, you can find supported values in the <a href=\"https://cloud.ibm.com/docs/account?topic=account-account-services#api-acct-mgmt\">documentation</a>. For other services, run the <code>ibmcloud catalog service-marketplace</code> command and retrieve the value from the <strong>Name</strong> column of your command line output. Attributes service, service_type are mutually exclusive.<br />  - <code>service_type</code>  (Optional, String) The service type of the policy definition. <strong>Note</strong> Attributes service, service_type are mutually exclusive.<br />  - <code>service_group_id</code> (Optional, String) The service group id of the policy definition. <strong>Note</strong> Attributes service, service_group_id are mutually exclusive.<br />- <code>resource_attributes</code> - (Optional, List) A nested block describing the resource of this policy. <strong>Note</strong> Conflicts with <code>account_management</code> and <code>resources</code>.</p><p>Nested scheme for <code>resource_attributes</code>:<br />  - <code>name</code> - (Required, String) Name of an attribute. Supported values are <code>serviceName</code>, <code>serviceInstance</code>, <code>region</code>,<code>resourceType</code>, <code>resource</code>, <code>resourceGroupId</code>, <code>service_group_id</code>, and other service specific resource attributes.<br />  - <code>value</code> - (Required, String) Value of an attribute.<br />  - <code>operator</code> - (Optional, string) Operator of an attribute. Default value is <code>stringEquals</code>. <strong>Note</strong> Conflicts with <code>account_management</code> and <code>resources</code>.</p><ul><li><code>resource_tags</code>  (Optional, List)  A nested block describing the access management tags.  <strong>Note</strong> <code>resource_tags</code> are only allowed in policy with resource attribute serviceType, where value is equal to service.</li></ul><p>Nested scheme for <code>resource_tags</code>:<br />  - <code>name</code> - (Required, String) The key of an access management tag. <br />  - <code>value</code> - (Required, String) The value of an access management tag.<br />  - <code>operator</code> - (Optional, String) Operator of an attribute. The default value is <code>stringEquals</code>.</p><ul><li><p><code>transaction_id</code>- (Optional, String) The TransactionID can be passed to your request for tracking the calls.</p></li><li><p><code>rule_conditions</code> - (Optional, List) A nested block describing the rule conditions of this policy.</p></li></ul><p>Nested schema for <code>rule_conditions</code>:<br />  - <code>key</code> - (Required, String) The key of a rule condition.<br />  - <code>operator</code> - (Required, String) The operator of a rule condition.<br />  - <code>value</code> - (Required, List) The valjue of a rule condition.</p><ul><li><p><code>rule_operator</code> - (Optional, String) The operator used to evaluate multiple rule conditions, e.g., all must be satisfied with <code>and</code>.</p></li><li><p><code>pattern</code> - (Optional, String) The pattern that the rule follows, e.g., <code>time-based-conditions:weekly:all-day</code>.</p></li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute reference</h2><p>In addition to all argument reference list, you can access the following attribute reference after your resource is created.</p><ul><li><code>id</code> - (String) The unique identifier of the access group policy. The ID is composed of <code>&lt;access_group_id&gt;/&lt;access_group_policy_id&gt;</code>.</li><li><code>version</code> - (String) The version of the access group policy.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>The <code>ibm_iam_access_group_policy</code> resource can be imported by using access group ID and access group policy ID.</p><p><strong>Syntax</strong></p><p><code>$ terraform import ibm_iam_access_group_policy.example &lt;access_group_ID&gt;/&lt;access_group_policy_ID&gt;</code></p><p><strong>Example</strong></p><p><code>$ terraform import ibm_iam_access_group_policy.example AccessGroupId-1148204e-6ef2-4ce1-9fd2-05e82a390fcf/bf5d6807-371e-4755-a282-64ebf575b80a</code></p>", "description": "<h1 id=\"ibm_iam_access_group_policy\">ibm_iam_access_group_policy</h1><p>Create, update, or delete an IAM policy for an IAM access group. For more information, about IBM access group policy, see <a href=\"https://cloud.ibm.com/docs/account?topic=account-account-services#account-management-access\">creating policies for account management service access</a>.</p>"}