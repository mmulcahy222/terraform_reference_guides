{"ibm-iam-user-policy": "<h1 id=\"ibm_iam_user_policy\">ibm_iam_user_policy</h1><p>Create, update, or delete an IAM user policy. To assign a policy to one user, the user must exist in the account to which you assign the policy. For more information, about IAM role action, see <a href=\"https://cloud.ibm.com/docs/account?topic=account-assign-access-resources\">managing access to resources</a>.</p>", "example-usage": "<h2 id=\"example-usage\">Example usage</h2><h3 id=\"user-policy-for-all-identity-and-access-enabled-services\">User policy for all Identity and Access enabled services</h3><p>terraform<br />resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Viewer\"]<br />  description = \"IAM User Policy\"</p><p>resource_tags {<br />    name = \"env\"<br />    value = \"dev\"<br />  }</p><p>}</p><p></p><h3 id=\"user-policy-using-service-with-region\">User policy using service with region</h3><p>terraform<br />resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Viewer\", \"Manager\"]</p><p>resources {<br />    service = \"cloudantnosqldb\"<br />    region  = \"us-south\"<br />  }<br />}</p><p></p><h3 id=\"user-policy-using-resource-instance\">User policy using resource instance</h3><p>terraform<br />resource \"ibm_resource_instance\" \"instance\" {<br />  name     = \"test\"<br />  service  = \"kms\"<br />  plan     = \"tiered-pricing\"<br />  location = \"us-south\"<br />}</p><p>resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Manager\", \"Viewer\", \"Administrator\"]</p><p>resources {<br />    service              = \"kms\"<br />    resource_instance_id = element(split(\":\", ibm_resource_instance.instance.id), 7)<br />  }<br />}</p><p></p><h3 id=\"user-policy-using-resource-group\">User policy using resource group</h3><p>terraform<br />data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Viewer\"]</p><p>resources {<br />    service           = \"containers-kubernetes\"<br />    resource_group_id = data.ibm_resource_group.group.id<br />  }<br />}</p><p></p><h3 id=\"user-policy-using-resource-and-resource-type\">User policy using resource and resource type</h3><p>terraform<br />data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Administrator\"]</p><p>resources {<br />    resource_type = \"resource-group\"<br />    resource      = data.ibm_resource_group.group.id<br />  }<br />}</p><p></p><h3 id=\"user-policy-using-attributes\">User policy using attributes</h3><p>terraform<br />data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Administrator\"]</p><p>resources {<br />    service = \"is\"</p><pre><code>attributes = {  \"vpcId\" = \"*\"}</code></pre><p>}<br />}</p><p></p><h3 id=\"user-policy-using-resource_attributes\">User policy using resource_attributes</h3><p><code>terraformresource \"ibm_iam_user_policy\" \"policy\" {  ibm_id = \"test@in.ibm.com\"  roles           = [\"Viewer\"]  resource_attributes {    name  = \"resource\"    value = \"test123*\"    operator = \"stringMatch\"  }  resource_attributes {    name  = \"serviceName\"    value = \"messagehub\"  }}</code></p><h3 id=\"user-policy-using-service_type-with-region\">User policy using service_type with region</h3><p>terraform<br />resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Viewer\"]</p><p>resources {<br />    service_type = \"service\"<br />    region = \"us-south\"<br />  }<br />}</p><p></p><h3 id=\"user-policy-by-using-service-and-rule_conditions\">User policy by using service and rule_conditions</h3><p><code>rule_conditions</code> can be used in conjunction with <code>pattern</code> and <code>rule_operator</code> to implement user policies with time-based conditions. For information see <a href=\"https://cloud.ibm.com/docs/account?topic=account-iam-time-based&amp;interface=ui\">Limiting access with time-based conditions</a>. <strong>Note</strong> Currently, a policy resource created without <code>rule_conditions</code>, <code>pattern</code>, and <code>rule_operator</code> cannot be updated including those conditions on update.</p><p><code>terraformresource \"ibm_iam_user_policy\" \"policy\" {  ibm_id = \"test@in.ibm.com\"  roles      = [\"Viewer\"]  resources {    service = \"kms\"  }  rule_conditions {    key = \"{{environment.attributes.day_of_week}}\"    operator = \"dayOfWeekAnyOf\"    value = [\"1+00:00\",\"2+00:00\",\"3+00:00\",\"4+00:00\"]  }  rule_conditions {    key = \"{{environment.attributes.current_time}}\"    operator = \"timeGreaterThanOrEquals\"    value = [\"09:00:00+00:00\"]  }  rule_conditions {    key = \"{{environment.attributes.current_time}}\"    operator = \"timeLessThanOrEquals\"    value = [\"17:00:00+00:00\"]  }  rule_operator = \"and\"  pattern = \"time-based-conditions:weekly:custom-hours\"}</code></p><h3 id=\"user-policy-using-service_group_id-resource-attribute\">User policy using service_group_id resource attribute</h3><p>terraform<br />resource \"ibm_iam_user_policy\" \"policy\" {<br />  ibm_id = \"test@in.ibm.com\"<br />  roles  = [\"Service ID creator\", \"User API key creator\", \"Administrator\"]</p><p>resource_attributes {<br />    name     = \"service_group_id\"<br />    operator = \"stringEquals\"<br />    value    = \"IAM\"<br />  }<br />}</p><p></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument reference</h2><p>Review the argument references that you can specify for your resource. </p><ul><li><code>account_management</code> - (Optional, Bool) Gives access to all account management services if set to <strong>true</strong>. Default value <strong>false</strong>. If you set this option, do not set <code>resources</code> at the same time. <strong>Note</strong> Conflicts with <code>resources</code> and <code>resource_attributes</code>.</li><li><code>description</code>  (Optional, String) The description of the IAM User Policy.</li><li><code>ibm_id</code> - (Required, Forces new resource, String) The IBM ID or Email address of the user.</li><li><code>roles</code> - (Required, List)  A comma separated list of roles. Valid roles are <code>Writer</code>, <code>Reader</code>, <code>Manager</code>, <code>Administrator</code>, <code>Operator</code>, <code>Viewer</code>, and <code>Editor</code>. For more information, about supported service specific roles, see  <a href=\"https://cloud.ibm.com/docs/account?topic=account-iam-service-roles-actions\">IAM roles and actions</a></li><li><code>resources</code> - (Optional, List) A nested block describes the resource of this policy. <strong>Note</strong> Conflicts with <code>account_management</code> and <code>resource_attributes</code>.</li></ul><p>Nested scheme for <code>resources</code>:<br />  - <code>attributes</code> (Optional, Map)  A set of resource attributes in the format <code>name=value,name=value</code>. If you set this option, do not specify <code>account_management</code>  and <code>resource_attributes</code> at the same time.<br />  - <code>resource_instance_id</code> - (Optional, String) The ID of the resource instance of the policy definition.<br />  - <code>region</code>  (Optional, String) The region of the policy definition.<br />  - <code>resource_type</code> - (Optional, String) The resource type of the policy definition.<br />  - <code>resource</code> - (Optional, String) The resource of the policy definition.<br />  - <code>resource_group_id</code> - (Optional, String) The ID of the resource group. To retrieve the value, run <code>ibmcloud resource groups</code> or use the <code>ibm_resource_group</code> data source.<br />  - <code>service</code> - (Optional, String) The service name of the policy definition. You can retrieve the value by running the <code>ibmcloud catalog service-marketplace</code> or <code>ibmcloud catalog search</code> command in the <a href=\"https://cloud.ibm.com/docs/cli?topic=cloud-cli-getting-started\">IBM Cloud CLI</a>. Attributes service, service_type are mutually exclusive.<br />  - <code>service_type</code>  (Optional, String) The service type of the policy definition. <strong>Note</strong> Attributes service, service_type are mutually exclusive.<br />  - <code>service_group_id</code> (Optional, String) The service group id of the policy definition. <strong>Note</strong> Attributes service, service_group_id are mutually exclusive.<br />- <code>resource_attributes</code> - (Optional, List) A nested block describing the resource of this policy. - <code>resource_attributes</code> - (Optional, List) A nested block describing the resource of this policy. <strong>Note</strong> Conflicts with <code>account_management</code> and <code>resources</code>.</p><p>Nested scheme for <code>resource_attributes</code>:<br />  - <code>name</code> - (Required, String) The name of an Attribute. Supported values are <code>serviceName</code>, <code>serviceInstance</code>, <code>region</code>,<code>resourceType</code>, <code>resource</code>, <code>resourceGroupId</code>, <code>service_group_id</code> and other service specific resource attributes.<br />  - <code>value</code> - (Required, String) The value of an attribute.<br />  - <code>operator</code> - (Optional, String) Operator of an attribute. The default value is <code>stringEquals</code>. <strong>Note</strong>: Conflicts with <code>account_management</code> and <code>resources</code>.</p><ul><li><code>resource_tags</code>  (Optional, List)  A nested block describing the access management tags.  <strong>Note</strong> <code>resource_tags</code> are only allowed in policy with resource attribute serviceType, where value is equal to service.</li></ul><p>Nested scheme for <code>resource_tags</code>:<br />  - <code>name</code> - (Required, String) The key of an access management tag. <br />  - <code>value</code> - (Required, String) The value of an access management tag.<br />  - <code>operator</code> - (Optional, String) Operator of an attribute. The default value is <code>stringEquals</code>.</p><ul><li><p><code>transaction_id</code>- (Optional, String) The TransactionID can be passed to your request for tracking the calls.</p></li><li><p><code>rule_conditions</code> - (Optional, List) A nested block describing the rule conditions of this policy.</p></li></ul><p>Nested schema for <code>rule_conditions</code>:<br />  - <code>key</code> - (Required, String) The key of a rule condition.<br />  - <code>operator</code> - (Required, String) The operator of a rule condition.<br />  - <code>value</code> - (Required, List) The valjue of a rule condition.</p><ul><li><p><code>rule_operator</code> - (Optional, String) The operator used to evaluate multiple rule conditions, e.g., all must be satisfied with <code>and</code>.</p></li><li><p><code>pattern</code> - (Optional, String) The pattern that the rule follows, e.g., <code>time-based-conditions:weekly:all-day</code>.</p></li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute reference</h2><p>In addition to all argument reference list, you can access the following attribute reference after your resource is created.</p><ul><li><code>id</code>  - (String) The unique identifier of the user policy. The ID is composed of <code>&lt;ibm_id&gt;/&lt;user_policy_id&gt;</code>.</li><li><code>version</code> - (String) The version of the user policy.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>The user policy can be imported by using the IBMID and user policy ID.</p><p><strong>Syntax</strong></p><p><code>$ terraform import ibm_iam_user_policy.example &lt;ibm_id&gt;/&lt;user_policy_ID&gt;</code></p><p><strong>Example</strong></p><p><code>$ terraform import ibm_iam_user_policy.example test@in.ibm.com/9ebf7018-3d0c-4965-9976-ef8e0c38a7e2</code></p>", "description": "<h1 id=\"ibm_iam_user_policy\">ibm_iam_user_policy</h1><p>Create, update, or delete an IAM user policy. To assign a policy to one user, the user must exist in the account to which you assign the policy. For more information, about IAM role action, see <a href=\"https://cloud.ibm.com/docs/account?topic=account-assign-access-resources\">managing access to resources</a>.</p>"}