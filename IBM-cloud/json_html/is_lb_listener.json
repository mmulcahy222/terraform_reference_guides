{"ibm-is-lb-listener": "<h1 id=\"ibm_is_lb_listener\">ibm_is_lb_listener</h1><p>Create, update, or delete a listener for a VPC load balancer. For more information, about load balancer listener, see <a href=\"https://cloud.ibm.com/docs/vpc?topic=vpc-nlb-listeners\">working with listeners</a>.</p><p><strong>Note</strong><br />- When provisioning the load balancer listener along with load balancer pool or pool member, Use explicit depends on the resources or perform the terraform apply with parallelism. For more information, about explicit dependencies, see <a href=\"https://learn.hashicorp.com/terraform/getting-started/dependencies#implicit-and-explicit-dependencies\">create resource dependencies</a>.<br />- VPC infrastructure services are a regional specific based endpoint, by default targets to <code>us-south</code>. Please make sure to target right region in the provider block as shown in the <code>provider.tf</code> file, if VPC service is created in region other than <code>us-south</code>.</p><p><strong>provider.tf</strong></p><p><code>terraform  provider \"ibm\" {    region = \"eu-gb\"  }</code></p>", "example-usage": "<h2 id=\"example-usage\">Example usage</h2><p>An example, to create a load balancer listener along with the pool and pool member.</p><p>terraform</p><p>resource \"ibm_is_lb_listener\" \"example\" {<br />  lb                         = ibm_is_lb.example.id<br />  port                       = \"9080\"<br />  protocol                   = \"http\"<br />  https_redirect_listener    = ibm_is_lb_listener.example.listener_id<br />  https_redirect_status_code = 301<br />  https_redirect_uri         = \"/example?doc=get\"<br />}</p><p>resource \"ibm_is_lb_pool\" \"example\" {<br />  lb                 = ibm_is_lb.example.id<br />  name               = \"example-lb-pool\"<br />  protocol           = \"http\"<br />  algorithm          = \"round_robin\"<br />  health_delay       = \"5\"<br />  health_retries     = \"2\"<br />  health_timeout     = \"2\"<br />  health_type        = \"http\"<br />  health_monitor_url = \"/\"<br />  depends_on         = [ibm_is_lb_listener.example]<br />}</p><p>resource \"ibm_is_lb_pool_member\" \"example\" {<br />  count          = \"2\"<br />  lb             = ibm_is_lb.example.id<br />  pool           = element(split(\"/\", ibm_is_lb_pool.example.id), 1)<br />  port           = \"80\"<br />  target_address = \"192.168.0.1\"<br />  depends_on     = [ibm_is_lb_listener.example]<br />}<br /></p><h3 id=\"sample-to-create-a-load-balancer-listener-policy-for-a-https_redirect-action\">Sample to create a load balancer listener policy for a <code>https_redirect</code> action.</h3><p>terraform<br />resource \"ibm_is_lb\" \"example2\" {<br />  name    = \"example-lb\"<br />  subnets = [ibm_is_subnet.example.id]<br />}</p><p>resource \"ibm_is_lb_listener\" \"example1\" {<br />  lb                   = ibm_is_lb.example2.id<br />  port                 = \"9086\"<br />  protocol             = \"https\"<br />  certificate_instance = \"crn:v1:bluemix:public:cloudcerts:us-south:a2d1bace7b46e4815a81e52c6ffeba5cf:af925157-b125-4db2-b642-adacb8b9c7f5:certificate:c81627a1bf6f766379cc4b98fd2a44ed\"<br />}</p><p>resource \"ibm_is_lb_listener\" \"example2\" {<br />  lb                         = ibm_is_lb.example2.id<br />  port                       = \"9087\"<br />  protocol                   = \"http\"<br />  https_redirect_listener    = ibm_is_lb_listener.example1.listener_id<br />  https_redirect_status_code = 301<br />  https_redirect_uri         = \"/example?doc=geta\"<br />}<br /></p><h3 id=\"sample-to-create-a-load-balancer-listener-for-a-route-mode-enabled-private-network-load-balancer\">Sample to create a load balancer listener for a route mode enabled private network load balancer.</h3><p>terraform</p><p>resource \"ibm_is_vpc\" \"example\" {<br />  name = \"example-vpc\"<br />}</p><p>resource \"ibm_is_subnet\" \"example\" {<br />  name            = \"example-subnet\"<br />  vpc             = ibm_is_vpc.example.id<br />  zone            = \"us-south-2\"<br />  ipv4_cidr_block = \"10.240.68.0/24\"<br />}</p><p>resource \"ibm_is_lb\" \"example\" {<br />  name       = \"example-lb\"<br />  subnets    = [ibm_is_subnet.example.id]<br />  profile    = \"network-fixed\"<br />  type       = \"private\"<br />  route_mode = \"true\"<br />}</p><p>resource \"ibm_is_lb_listener\" \"example\" {<br />  lb       = ibm_is_lb.example.id<br />  protocol = \"tcp\"<br />  default_pool = ibm_is_lb_pool.example.id<br />}<br /></p><h3 id=\"sample-to-create-a-public-load-balancer-listener-with-range-of-ports\">Sample to create a public load balancer listener with range of ports.</h3><p>terraform<br />resource \"ibm_is_vpc\" \"example\" {<br />  name = \"example-vpc\"<br />}</p><p>resource \"ibm_is_subnet\" \"example\" {<br />  name            = \"example-subnet\"<br />  vpc             = ibm_is_vpc.example.id<br />  zone            = \"us-south-2\"<br />  ipv4_cidr_block = \"10.240.68.0/24\"<br />}</p><p>resource \"ibm_is_lb\" \"example\" {<br />  name       = \"example-lb\"<br />  subnets    = [ibm_is_subnet.example.id]<br />  profile    = \"network-fixed\"<br />  type       = \"public\"<br />}</p><p>resource \"ibm_is_lb_listener\" \"example1\" {<br />  lb        = ibm_is_lb.example.id<br />  protocol  = \"tcp\"<br />  port_min  = 100<br />  port_max  = 200<br />}<br />resource \"ibm_is_lb_listener\" \"example2\" {<br />  lb        = ibm_is_lb.example.id<br />  protocol  = \"tcp\"<br />  port_min  = 300<br />  port_max  = 400<br />}<br /></p>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The <code>ibm_is_lb_listener</code> resource provides the following <a href=\"https://www.terraform.io/docs/language/resources/syntax.html\">Timeouts</a> configuration options:</p><ul><li><strong>create</strong> - (Default 10 minutes) Used for creating Instance.</li><li><strong>update</strong> - (Default 10 minutes) Used for updating Instance.</li><li><strong>delete</strong> - (Default 10 minutes) Used for deleting Instance.</li></ul>", "argument-reference": "<h2 id=\"argument-reference\">Argument reference</h2><p>Review the argument references that you can specify for your resource. </p><ul><li><code>accept_proxy_protocol</code>- (Optional, Bool)  If set to <strong>true</strong>, listener forwards proxy protocol information that are supported by load balancers in the application family. Default value is <strong>false</strong>.</li><li><p><code>lb</code> - (Required, Forces new resource, String) The load balancer unique identifier.</p></li><li><p><code>port</code>- (Optional, Integer) The listener port number. Valid range <code>1</code> to <code>65535</code>.</p></li></ul><p>~&gt; <strong>NOTE</strong><br />    Private network load balancers with <code>route_mode</code> enabled don't support <code>port</code>, they support only one port range from <code>port_min (1)</code> - <code>port_max (65535)</code>. Only accepted value of <code>port</code> for <code>route_mode</code> enabled private network load balancer is <code>1</code>. Any other value will show change or update-in-place and returns an error.</p><p>~&gt; <strong>NOTE</strong><br />    Either use <code>port</code> or (<code>port_min</code>-<code>port_max</code>) for public network load balancers <br />- <code>port_min</code>- (Optional, Integer) The inclusive lower bound of the range of ports used by this listener.</p><p>~&gt; <strong>NOTE</strong><br />    Only load balancers in the <code>network</code> family support more than one port per listener. When route mode is enabled, only a value of <code>1</code> is supported for <code>port_min</code>.</p><ul><li><code>port_max</code>- (Optional, Integer) The inclusive upper bound of the range of ports used by this listener.</li></ul><p>~&gt; <strong>NOTE</strong><br />    Only load balancers in the <code>network</code> family support more than one port per listener. When <code>route mode</code> is enabled, only a value of <code>65535</code> is supported for port_max.</p><ul><li><code>protocol</code> - (Required, String) The listener protocol. Enumeration type are <code>http</code>, <code>tcp</code>, <code>https</code> and <code>udp</code>. Network load balancer supports only <code>tcp</code> and <code>udp</code> protocol.</li><li><p><code>default_pool</code> - (Optional, String) The load balancer pool unique identifier.</p><p>~&gt; <strong>The specified pool must</strong><br />  </br>&#x2022; Belong to this load balancer<br />  </br>&#x2022; Have the  same protocol as this listener, or have a compatible protocol. At present, the compatible protocols are http and https.<br />  </br>&#x2022; Not already be the default_pool for another listener </p></li><li><p><code>certificate_instance</code> - (Optional, String) The CRN of the certificate instance, it is applicable(mandatory) only to https protocol.</p></li></ul><p>!&gt; <strong>Removal Notification</strong> Certificate Manager support is removed, please use Secrets Manager.</p><ul><li><code>connection_limit</code> - (Optional, Integer) The connection limit of the listener. Valid range is <strong>1 to 15000</strong>. Network load balancer do not support <code>connection_limit</code> argument.</li><li><code>https_redirect_listener</code> - (Optional, String) ID of the listener that will be set as http redirect target.</li><li><code>https_redirect_status_code</code> - (Optional, Integer) The HTTP status code to be returned in the redirect response, one of [301, 302, 303, 307, 308].</li><li><code>https_redirect_uri</code> - (Optional, String) Target URI where traffic will be redirected.</li><li><code>idle_connection_timeout</code> - (Optional, Integer) The idle connection timeout of the listener in seconds. Supported for load balancers in the <code>application</code> family. Default value is <code>50</code>, allowed value is between <code>50</code> - <code>7200</code>.</li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute reference</h2><p>In addition to all argument reference list, you can access the following attribute reference after your resource is created.</p><ul><li><code>id</code> - (String) The unique identifier of the load balancer listener.</li><li><code>status</code> - (String) The status of load balancer listener.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>The <code>ibm_is_lb_listener</code> resource can be imported by using the load balancer ID and listener ID.</p><p><strong>Syntax</strong></p><p><code>$ terraform import ibm_is_lb_listener.example &lt;loadbalancer_ID&gt;/&lt;listener_ID&gt;</code></p><p><strong>Example</strong></p><p><code>$ terraform import ibm_is_lb_listener.example d7bec597-4726-451f-8a63-e61212c32c/cea6651a-bc0a-4438-9f8a-44444f3ebb</code></p>", "description": "<h1 id=\"ibm_is_lb_listener\">ibm_is_lb_listener</h1><p>Create, update, or delete a listener for a VPC load balancer. For more information, about load balancer listener, see <a href=\"https://cloud.ibm.com/docs/vpc?topic=vpc-nlb-listeners\">working with listeners</a>.</p><p><strong>Note</strong><br />- When provisioning the load balancer listener along with load balancer pool or pool member, Use explicit depends on the resources or perform the terraform apply with parallelism. For more information, about explicit dependencies, see <a href=\"https://learn.hashicorp.com/terraform/getting-started/dependencies#implicit-and-explicit-dependencies\">create resource dependencies</a>.<br />- VPC infrastructure services are a regional specific based endpoint, by default targets to <code>us-south</code>. Please make sure to target right region in the provider block as shown in the <code>provider.tf</code> file, if VPC service is created in region other than <code>us-south</code>.</p><p><strong>provider.tf</strong></p><p><code>terraform  provider \"ibm\" {    region = \"eu-gb\"  }</code></p>"}