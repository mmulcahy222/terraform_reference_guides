{"ibm-iam-trusted-profile-policy": "<h1 id=\"ibm_iam_trusted_profile_policy\">ibm_iam_trusted_profile_policy</h1><p>Create, update, or delete an IAM trusted profile policy. For more information, about IAM role action, see <a href=\"https://cloud.ibm.com/docs/account?topic=account-assign-access-resources\">managing access to resources</a>.</p>", "example-usage": "<h2 id=\"example-usage\">Example usage</h2><h3 id=\"trusted-profile-policy-for-all-identity-and-access-enabled-services\">Trusted Profile Policy for all Identity and Access enabled services</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id  = ibm_iam_trusted_profile.profile_id.id<br />  roles       = [\"Viewer\"]<br />  description = \"IAM Trusted Profile Policy\"</p><p>resource_tags {<br />    name = \"env\"<br />    value = \"dev\"<br />  }<br />  transaction_id     = \"terraformTrustedPolicy\"<br />}</p><p></p><h3 id=\"trusted-profile-policy-using-service-with-region\">Trusted Profile Policy using service with region</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Viewer\", \"Manager\"]</p><p>resources {<br />    service = \"cloudantnosqldb\"<br />    region  = \"us-south\"<br />  }<br />}</p><p></p><h3 id=\"trusted-profile-policy-by-using-resource-instance\">Trusted Profile Policy by using resource instance</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_resource_instance\" \"instance\" {<br />  name     = \"test\"<br />  service  = \"kms\"<br />  plan     = \"tiered-pricing\"<br />  location = \"us-south\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Manager\", \"Viewer\", \"Administrator\"]</p><p>resources {<br />    service              = \"kms\"<br />    resource_instance_id = element(split(\":\", ibm_resource_instance.instance.id), 7)<br />  }<br />}</p><p></p><h3 id=\"trusted-profile-policy-by-using-resource-group\">Trusted Profile Policy by using resource group</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Viewer\"]</p><p>resources {<br />    service           = \"containers-kubernetes\"<br />    resource_group_id = data.ibm_resource_group.group.id<br />  }<br />}</p><p></p><h3 id=\"trusted-profile-policy-by-using-resource-and-resource-type\">Trusted Profile Policy by using resource and resource type</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Administrator\"]</p><p>resources {<br />    resource_type = \"resource-group\"<br />    resource      = data.ibm_resource_group.group.id<br />  }<br />}</p><p></p><h3 id=\"trusted-profile-policy-by-using-attributes\">Trusted Profile Policy by using attributes</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>data \"ibm_resource_group\" \"group\" {<br />  name = \"default\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Administrator\"]</p><p>resources {<br />    service = \"is\"</p><pre><code>attributes = {  \"vpcId\" = \"*\"}</code></pre><p>}<br />}</p><p></p><h3 id=\"trusted-profile-policy-by-using-resource_attributes\">Trusted Profile Policy by using resource_attributes</h3><p><code>terraformresource \"ibm_iam_trusted_profile\" \"profile_id\" {  name = \"test\"}resource \"ibm_iam_trusted_profile_policy\" \"policy\" {  profile_id = ibm_iam_trusted_profile.profile_id.id  roles      = [\"Viewer\"]  resource_attributes {    name     = \"resource\"    value    = \"test123*\"    operator = \"stringMatch\"  }  resource_attributes {    name  = \"serviceName\"    value = \"messagehub\"  }}</code></p><h3 id=\"trusted-profile-policy-by-using-resource_attributes-servicenameserviceinstance\">Trusted Profile Policy by using resource_attributes (serviceName,serviceInstance)</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}<br />resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Viewer\"]</p><p>resource_attributes {<br />    name  = \"serviceName\"<br />    value = \"databases-for-redis\"<br />  }</p><p>resource_attributes {<br />    name  = \"serviceInstance\"<br />    value = var.redis_guid<br />  }<br />}<br /></p><h3 id=\"trusted-profile-policy-using-service_type-with-region\">Trusted Profile Policy using service_type with region</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Viewer\"]</p><p>resources {<br />    service_type = \"service\"<br />    region = \"us-south\"<br />  }<br />}</p><p></p><h3 id=\"trusted-profile-policy-by-using-service-and-rule_conditions\">Trusted Profile Policy by using service and rule_conditions</h3><p><code>rule_conditions</code> can be used in conjunction with <code>pattern</code> and <code>rule_operator</code> to implement trusted profile policies with time-based conditions. For information see <a href=\"https://cloud.ibm.com/docs/account?topic=account-iam-time-based&amp;interface=ui\">Limiting access with time-based conditions</a>. <strong>Note</strong> Currently, a policy resource created without <code>rule_conditions</code>, <code>pattern</code>, and <code>rule_operator</code> cannot be updated including those conditions on update.</p><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  profile_id = ibm_iam_trusted_profile.profile_id.id<br />  roles      = [\"Viewer\"]<br />  resources {<br />    service = \"kms\"<br />  }<br />  rule_conditions {<br />    key = \"{{environment.attributes.day_of_week}}\"<br />    operator = \"dayOfWeekAnyOf\"<br />    value = [\"1+00:00\",\"2+00:00\",\"3+00:00\",\"4+00:00\"]<br />  }<br />  rule_conditions {<br />    key = \"{{environment.attributes.current_time}}\"<br />    operator = \"timeGreaterThanOrEquals\"<br />    value = [\"09:00:00+00:00\"]<br />  }<br />  rule_conditions {<br />    key = \"{{environment.attributes.current_time}}\"<br />    operator = \"timeLessThanOrEquals\"<br />    value = [\"17:00:00+00:00\"]<br />  }<br />  rule_operator = \"and\"<br />  pattern = \"time-based-conditions:weekly:custom-hours\"<br />}<br /></p><h3 id=\"trusted-profile-policy-by-using-service_group_id-resource-attribute\">Trusted Profile Policy by using service_group_id resource attribute</h3><p>terraform<br />resource \"ibm_iam_trusted_profile\" \"profile_id\" {<br />  name = \"test\"<br />}</p><p>resource \"ibm_iam_trusted_profile_policy\" \"policy\" {<br />  roles  = [\"Service ID creator\", \"User API key creator\", \"Administrator\"]<br />  resource_attributes {<br />    name     = \"service_group_id\"<br />    operator = \"stringEquals\"<br />    value    = \"IAM\"<br />  }<br />}</p><p></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument reference</h2><p>Review the argument references that you can specify for your resource. </p><ul><li><code>account_management</code> - (Optional, Bool) Gives access to all account management services if set to <strong>true</strong>. Default value is <strong>false</strong>. If you set this option, do not set <code>resources</code> at the same time.<strong>Note</strong> Conflicts with <code>resources</code> and <code>resource_attributes</code>.</li><li><code>description</code>  (Optional, String) The description of the IAM Trusted Profile Policy.</li><li><code>profile_id</code> - (Optional, Forces new resource, String) The UUID of the trusted profile. Either <code>profile_id</code> or <code>iam_id</code> is required.</li><li><code>iam_id</code> - (Optional,  Forces new resource, String) IAM ID of the truestedprofile. Either <code>profile_id</code> or <code>iam_id</code> is required.</li><li><code>resources</code> - (List of Objects) Optional- A nested block describes the resource of this policy.<strong>Note</strong> Conflicts with <code>account_management</code> and <code>resource_attributes</code>.</li></ul><p>Nested scheme for <code>resources</code>:<br />  - <code>service</code>  (Optional, String) The service name of the policy definition. You can retrieve the value by running the <code>ibmcloud catalog service-marketplace</code> or <code>ibmcloud catalog search</code>. Attributes service, service_type are mutually exclusive.<br />  - <code>service_type</code>  (Optional, String) The service type of the policy definition. <strong>Note</strong> Attributes service, service_type are mutually exclusive.<br />  - <code>resource_instance_id</code> - (Optional, String) The ID of the resource instance of the policy definition.<br />  - <code>region</code> - (Optional, String) The region of the policy definition.<br />  - <code>resource_type</code> - (Optional, String) The resource type of the policy definition.<br />  - <code>resource</code> - (Optional, String) The resource of the policy definition.<br />  - <code>resource_group_id</code> - (Optional, String) The ID of the resource group. To retrieve the value, run <code>ibmcloud resource groups</code> or use the <code>ibm_resource_group</code> data source.<br />  - <code>service_group_id</code> (Optional, String) The service group id of the policy definition. <strong>Note</strong> Attributes service, service_group_id are mutually exclusive.<br />  - <code>attributes</code> (Optional, Map)  A set of resource attributes in the format <code>name=value,name=value</code>. If you set this option, do not specify <code>account_management</code> and <code>resource_attributes</code> at the same time.<br />- <code>resource_attributes</code> - (Optional, list) A nested block describing the resource of this policy. - <code>resource_attributes</code> - (Optional, List) A nested block describing the resource of this policy. <strong>Note</strong> Conflicts with <code>account_management</code> and <code>resources</code>.</p><p>Nested scheme for <code>resource_attributes</code>:<br />  - <code>name</code> - (Required, String) The name of an attribute. Supported values are <code>serviceName</code> , <code>serviceInstance</code> , <code>region</code> ,<code>resourceType</code> , <code>resource</code> , <code>resourceGroupId</code>, <code>service_group_id</code>, and other service specific resource attributes.<br />  - <code>value</code> - (Required, String) The value of an attribute.<br />  - <code>operator</code> - (Optional, String) Operator of an attribute. The default value is <code>stringEquals</code>. <strong>Note</strong> Conflicts with <code>account_management</code> and <code>resources</code>.<br />- <code>roles</code> - (Required, List) A comma separated list of roles. Valid roles are <code>Writer</code>, <code>Reader</code>, <code>Manager</code>, <code>Administrator</code>, <code>Operator</code>, <code>Viewer</code>, and <code>Editor</code>. For more information, about supported service specific roles, see  <a href=\"https://cloud.ibm.com/docs/account?topic=account-iam-service-roles-actions\">IAM roles and actions</a></p><ul><li><code>resource_tags</code>  (Optional, List)  A nested block describing the access management tags.  <strong>Note</strong> <code>resource_tags</code> are only allowed in policy with resource attribute serviceType, where value is equal to service.</li></ul><p>Nested scheme for <code>resource_tags</code>:<br />  - <code>name</code> - (Required, String) The key of an access management tag. <br />  - <code>value</code> - (Required, String) The value of an access management tag.<br />  - <code>operator</code> - (Optional, String) Operator of an attribute. The default value is <code>stringEquals</code>.</p><ul><li><p><code>transaction_id</code>- (Optional, String) The TransactionID can be passed to your request for tracking the calls.</p></li><li><p><code>rule_conditions</code> - (Optional, List) A nested block describing the rule conditions of this policy.</p></li></ul><p>Nested schema for <code>rule_conditions</code>:<br />  - <code>key</code> - (Required, String) The key of a rule condition.<br />  - <code>operator</code> - (Required, String) The operator of a rule condition.<br />  - <code>value</code> - (Required, List) The valjue of a rule condition.</p><ul><li><p><code>rule_operator</code> - (Optional, String) The operator used to evaluate multiple rule conditions, e.g., all must be satisfied with <code>and</code>.</p></li><li><p><code>pattern</code> - (Optional, String) The pattern that the rule follows, e.g., <code>time-based-conditions:weekly:all-day</code>.</p></li></ul>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute reference</h2><p>In addition to all argument reference list, you can access the following attribute reference after your resource is created.</p><ul><li><code>id</code>  - (String) The unique identifier of the trusted profile policy. The ID is composed of <code>&lt;profile_id&gt;/&lt;profile_policy_id&gt;</code>. If policy is created by using <code>&lt;profile_id&gt;</code>. The ID is composed of <code>&lt;iam_id&gt;/&lt;profile_policy_id&gt;</code> if policy is created by using <code>&lt;iam_id&gt;</code>.</li><li><code>version</code>  - (String) The version of the trusted profile policy.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>The  <code>ibm_iam_trusted_profile_policy</code> resource can be imported by using profile ID and trusted profile policy ID or IAM ID and trusted profile policy ID.</p><p><strong>Syntax</strong></p><p><code>$ terraform import ibm_iam_trusted_profile_policy.example &lt;profile_id&gt;/&lt;profile_policy_id&gt;</code></p><p><strong>Example</strong></p><p><br />$ terraform import ibm_iam_trusted_profile_policy.example \"iam-Profile-b75c9be6-17f1-4089-aba8-62065b1c8cfe/dec8ace8-32b4-421c-8e71-f53e6904c2ed\"</p><p></p><p>or </p><p><code>$ terraform import ibm_iam_trusted_profile_policy.example \"Profile-b75c9be6-17f1-4089-aba8-62065b1c8cfe/4e7936c9-b555-4d01-b607-6ae69ccf85c0\"</code></p>", "description": "<h1 id=\"ibm_iam_trusted_profile_policy\">ibm_iam_trusted_profile_policy</h1><p>Create, update, or delete an IAM trusted profile policy. For more information, about IAM role action, see <a href=\"https://cloud.ibm.com/docs/account?topic=account-assign-access-resources\">managing access to resources</a>.</p>"}