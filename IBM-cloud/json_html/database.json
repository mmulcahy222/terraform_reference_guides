{"ibm-database": "<h1 id=\"ibm_database\">ibm_database</h1><p>Create, update, or delete a IBM Cloud Database (ICD) instance. The <code>ibmcloud_api_key</code> that are used by  Terraform should grant IAM rights to create and modify IBM Cloud Databases and have access to the resource group the ICD instance is associated with. For more information, see <a href=\"https://cloud.ibm.com/docs/services/databases-for-postgresql/reference-access-management.html#identity-and-access-management\">documentation</a> to manage ICD instances.</p><p>If <code>resource_group_id</code> is not specified, the ICD instance is created in the default resource group. The <code>API_KEY</code> must be assigned permissions for this group.</p><p>Configuration of an ICD resource requires that the <code>region</code> parameter is set for the IBM provider in the <code>provider.tf</code> to be the same as the target ICD <code>location/region</code>. If not specified it default to <code>us-south</code>. A <code>terraform apply</code>  fails if the ICD <code>location</code> is set differently. If the Terraform configuration needs to deploy resources into multiple regions, provider alias can be used. For more information, see <a href=\"https://www.terraform.io/docs/configuration/providers.html#multiple-provider-instances\">Terraform provider configuration</a>.</p>", "example-usage": "<h2 id=\"example-usage\">Example usage</h2><p>To find an example for configuring a virtual server instance that connects to a PostgreSQL database, see <a href=\"https://github.com/IBM-Cloud/terraform-provider-ibm/tree/master/examples/ibm-database\">here</a>.</p><br /><p>terraform<br />data \"ibm_resource_group\" \"group\" {<br />  name = \"<your_group>\"<br />}</p><br /><p>resource \"ibm_database\" \"<your_database>\" {<br />  name              = \"<your_database_name>\"<br />  plan              = \"standard\"<br />  location          = \"eu-gb\"<br />  service           = \"databases-for-etcd\"<br />  resource_group_id = data.ibm_resource_group.group.id<br />  tags              = [\"tag1\", \"tag2\"]</p><br /><p>adminpassword                = \"password12\"</p><br /><p>group {<br />    group_id = \"member\"</p><br /><pre><code>memory {<br />  allocation_mb = 14336<br />}<br /><br />disk {<br />  allocation_mb = 20480<br />}<br /><br />cpu {<br />  allocation_count = 3<br />}<br /></code></pre><br /><p>}</p><br /><p>users {<br />    name     = \"user123\"<br />    password = \"password12\"<br />    type     = \"database\"<br />  }</p><br /><p>allowlist {<br />    address     = \"172.168.1.1/32\"<br />    description = \"desc\"<br />  }<br />}</p><br /><p>output \"ICD Etcd database connection string\" {<br />  value  = \"http://${ibm_database.test_acc.ibm_database_connection.icd_conn}\"<br />}</p><br /><h3 id=\"deprecated-sample-database-instance-by-using-node_-attributes\"><strong>Deprecated</strong> Sample database instance by using <code>node_</code> attributes</h3><br /><p>Please Note this has been deprecated: Please use the <code>group</code> attribute instead<br />An example to configure and deploy database by using <code>node_</code> attributes instead of <code>memory_</code>.</p><br /><p>terraform<br />data \"ibm_resource_group\" \"group\" {<br />  name = \"<your_group>\"<br />}</p><br /><p>resource \"ibm_database\" \"<your_database>\" {<br />  name              = \"<your_database_name>\"<br />  plan              = \"standard\"<br />  location          = \"eu-gb\"<br />  service           = \"databases-for-etcd\"<br />  resource_group_id = data.ibm_resource_group.group.id<br />  tags              = [\"tag1\", \"tag2\"]</p><br /><p>adminpassword                = \"password12\"<br />  node_count                = 3<br />  node_memory_allocation_mb = 1024<br />  node_disk_allocation_mb   = 20480<br />  users {<br />    name      = \"user123\"<br />    password  = \"password12\"<br />    type      = \"database\"<br />  }</p><br /><p>allowlist {<br />    address     = \"172.168.1.1/32\"<br />    description = \"desc\"<br />  }<br />}</p><br /><p>output \"ICD Etcd database connection string\" {<br />  value = \"http://${ibm_database.test_acc.ibm_database_connection.icd_conn}\"<br />}</p><br /><h3 id=\"sample-database-instance-by-using-group-attributes\">Sample database instance by using <code>group</code> attributes</h3><br /><p>An example to configure and deploy database by using <code>group</code> attributes.</p><br /><p>terraform<br />data \"ibm_resource_group\" \"group\" {<br />  name = \"<your_group>\"<br />}</p><br /><p>resource \"ibm_database\" \"<your_database>\" {<br />  name              = \"<your_database_name>\"<br />  plan              = \"standard\"<br />  location          = \"eu-gb\"<br />  service           = \"databases-for-etcd\"<br />  resource_group_id = data.ibm_resource_group.group.id<br />  tags              = [\"tag1\", \"tag2\"]</p><br /><p>adminpassword                = \"password12\"</p><br /><p>group {<br />    group_id = \"member\"</p><br /><pre><code>memory {<br />  allocation_mb = 10240<br />}<br /><br />disk {<br />  allocation_mb = 256000<br />}<br /><br />cpu {<br />  allocation_count = 3<br />}<br /></code></pre><br /><p>}</p><br /><p>users {<br />    name     = \"user123\"<br />    password = \"password12\"<br />  }</p><br /><p>allowlist {<br />    address     = \"172.168.1.1/32\"<br />    description = \"desc\"<br />  }<br />}</p><br /><p>output \"ICD Etcd database connection string\" {<br />  value = \"http://${ibm_database.test_acc.ibm_database_connection.icd_conn}\"<br />}</p><br /><h3 id=\"sample-database-instance-by-using-point_in_time_recovery\">Sample database instance by using <code>point_in_time_recovery</code></h3><br /><p>An example for configuring <code>point_in_time_recovery</code> time by using <code>ibm_database</code> resource.</p><br /><p>terraform<br />data \"ibm_resource_group\" \"group\" {<br />  name = \"<your_group>\"<br />}</p><br /><p>resource \"ibm_database\" \"test_acc\" {<br />  resource_group_id                    = data.ibm_resource_group.group.id<br />  name                                 = \"<your_database_name>\"<br />  service                              = \"databases-for-postgresql\"<br />  plan                                 = \"standard\"<br />  location                             = \"eu-gb\"<br />  point_in_time_recovery_time          = \"2020-04-20T05:27:36Z\"<br />  point_in_time_recovery_deployment_id = \"crn:v1:bluemix:public:databases-for-postgresql:us-south:a/4448261269a14562b839e0a3019ed980:0b8c37b0-0f01-421a-bb32-056c6565b461::\"<br />}</p><br /><h3 id=\"sample-database-instance-by-using-auto_scaling\">Sample database instance by using auto_scaling</h3><br /><p>terraform<br />resource \"ibm_database\" \"autoscale\" {<br />    resource_group_id            = data.ibm_resource_group.group.id<br />    name                         = \"redis\"<br />    service                      = \"databases-for-redis\"<br />    plan                         = \"standard\"<br />    location                     = \"us-south\"<br />    service_endpoints            = \"private\"<br />    auto_scaling {<br />        disk {<br />            capacity_enabled             = true<br />            free_space_less_than_percent = 15<br />            io_above_percent             = 85<br />            io_enabled                   = true<br />            io_over_period               = \"15m\"<br />            rate_increase_percent        = 15<br />            rate_limit_mb_per_member     = 3670016<br />            rate_period_seconds          = 900<br />            rate_units                   = \"mb\"<br />        }<br />         memory {<br />            io_above_percent         = 90<br />            io_enabled               = true<br />            io_over_period           = \"15m\"<br />            rate_increase_percent    = 10<br />            rate_limit_mb_per_member = 114688<br />            rate_period_seconds      = 900<br />            rate_units               = \"mb\"<br />        }<br />    }<br />}</p><br /><h3 id=\"sample-cassandra-database-instance\">Sample Cassandra database instance</h3><br /><ul><br /><li>Cassandra provisioning may require more time than the default timeout. A longer timeout value can be set with using the <code>timeouts</code> attribute.</li><br /></ul><br /><p>terraform<br />data \"ibm_resource_group\" \"test_acc\" {<br />  is_default = true<br />}</p><br /><p>resource \"ibm_database\" \"cassandra\" {<br />  resource_group_id            = data.ibm_resource_group.test_acc.id<br />  name                         = \"test\"<br />  service                      = \"databases-for-cassandra\"<br />  plan                         = \"enterprise\"<br />  location                     = \"us-south\"<br />  adminpassword                = \"password12\"</p><br /><p>group {<br />    group_id = \"member\"</p><br /><pre><code>memory {<br />  allocation_mb = 24576<br />}<br /><br />disk {<br />  allocation_mb = 368640<br />}<br /><br />cpu {<br />  allocation_count = 6<br />}<br /></code></pre><br /><p>}</p><br /><p>users {<br />    name      = \"user123\"<br />    password  = \"password12\"<br />    type      = \"database\"<br />  }</p><br /><p>allowlist {<br />    address     = \"172.168.1.2/32\"<br />    description = \"desc1\"<br />  }</p><br /><p>timeouts {<br />    create = \"120m\"<br />    update = \"120m\"<br />    delete = \"15m\"<br />  }<br />}</p><br /><h3 id=\"sample-mongodb-enterprise-database-instance\">Sample MongoDB Enterprise database instance</h3><br /><ul><br /><li>MongoDB Enterprise provisioning may require more time than the default timeout. A longer timeout value can be set with using the <code>timeouts</code> attribute.</li><br /><li>Please make sure your resources meet minimum requirements of scaling. Please refer <a href=\"https://cloud.ibm.com/docs/databases-for-mongodb?topic=databases-for-mongodb-pricing#scaling-per-member\">docs</a> for more info.</li><br /><li><code>service_endpoints</code> cannot be updated on this instance.</li><br /></ul><br /><p>terraform<br />data \"ibm_resource_group\" \"test_acc\" {<br />  is_default = true<br />}</p><br /><p>resource \"ibm_database\" \"mongodb\" {<br />  resource_group_id            = data.ibm_resource_group.test_acc.id<br />  name                         = \"test\"<br />  service                      = \"databases-for-mongodb\"<br />  plan                         = \"enterprise\"<br />  location                     = \"us-south\"<br />  adminpassword                = \"password12\"</p><br /><p>group {<br />    group_id = \"member\"</p><br /><pre><code>memory {<br />  allocation_mb = 24576<br />}<br /><br />disk {<br />  allocation_mb = 122880<br />}<br /><br />cpu {<br />  allocation_count = 6<br />}<br /></code></pre><br /><p>}</p><br /><p>tags                         = [\"one:two\"]</p><br /><p>users {<br />    name      = \"dbuser\"<br />    password  = \"password12\"<br />    type      = \"database\"<br />  }</p><br /><p>users {<br />    name     = \"opsmanageruser\"<br />    password = \"$ecurepa$$word12\"<br />    type     = \"ops_manager\"<br />    role     = \"group_read_only\"<br />  }</p><br /><p>allowlist {<br />    address     = \"172.168.1.2/32\"<br />    description = \"desc1\"<br />  }</p><br /><p>timeouts {<br />    create = \"120m\"<br />    update = \"120m\"<br />    delete = \"15m\"<br />  }<br />}</p><br /><h3 id=\"sample-mongodb-enterprise-database-instance-with-bi-connector-and-analytics\">Sample MongoDB Enterprise database instance with BI Connector and Analytics</h3><br /><ul><br /><li>To enable Analytics and/or BI Connector for MongoDB Enterprise, a <code>group</code> attribute must be defined for the <code>analytics</code> and <code>bi_connector</code> group types with <code>members</code> scaled to at exactly <code>1</code>. Read more about Analytics and BI Connector <a href=\"https://cloud.ibm.com/docs/databases-for-mongodb?topic=databases-for-mongodb-mongodbee-analytics\">here</a></li><br /><li>MongoDB Enterprise provisioning may require more time than the default timeout. A longer timeout value can be set with using the <code>timeouts</code> attribute.</li><br /></ul><br /><p>terraform<br />data \"ibm_resource_group\" \"test_acc\" {<br />  is_default = true<br />}</p><br /><p>resource \"ibm_database\" \"mongodb_enterprise\" {<br />  resource_group_id = data.ibm_resource_group.test_acc.id<br />  name              = \"test\"<br />  service           = \"databases-for-mongodb\"<br />  plan              = \"enterprise\"<br />  location          = \"us-south\"<br />  adminpassword     = \"password12\"<br />  tags              = [\"one:two\"]</p><br /><p>group {<br />    group_id = \"member\"</p><br /><pre><code>memory {<br />  allocation_mb = 24576<br />}<br /><br />disk {<br />  allocation_mb = 122880<br />}<br /><br />cpu {<br />  allocation_count = 6<br />}<br /></code></pre><br /><p>}</p><br /><p>group {<br />    group_id = \"analytics\"</p><br /><pre><code>members {<br />  allocation_count = 1<br />}<br /></code></pre><br /><p>}</p><br /><p>group {<br />    group_id = \"bi_connector\"</p><br /><pre><code>members {<br />  allocation_count = 1<br />}<br /></code></pre><br /><p>}</p><br /><p>timeouts {<br />    create = \"120m\"<br />    update = \"120m\"<br />    delete = \"15m\"<br />  }<br />}</p><br /><p>data \"ibm_database_connection\" \"mongodb_conn\" {<br />  deployment_id = ibm_database.mongodb_enterprise.id<br />  user_type     = \"database\"<br />  user_id       = \"admin\"<br />  endpoint_type = \"public\"<br />}</p><br /><p>output \"bi_connector_connection\" {<br />  description = \"BI Connector connection string\"<br />  value       = data.ibm_database_connection.mongodb_conn.bi_connector.0.composed.0<br />}</p><br /><p>output \"analytics_connection\" {<br />  description = \"Analytics Node connection string\"<br />  value       = data.ibm_database_connection.mongodb_conn.analytics.0.composed.0<br />}</p><br /><h3 id=\"sample-edb-instance\">Sample EDB instance</h3><br /><p>EDB takes more time than expected. It is always advisible to extend timeouts using timeouts block</p><br /><p>terraform<br />data \"ibm_resource_group\" \"test_acc\" {<br />  is_default = true<br />}</p><br /><p>resource \"ibm_database\" \"edb\" {<br />  resource_group_id            = data.ibm_resource_group.test_acc.id<br />  name                         = \"test\"<br />  service                      = \"databases-for-enterprisedb\"<br />  plan                         = \"standard\"<br />  location                     = \"us-south\"<br />  adminpassword                = \"password12\"</p><br /><p>group {<br />    group_id = \"member\"</p><br /><pre><code>memory {<br />  allocation_mb = 12288<br />}<br /><br />disk {<br />  allocation_mb = 131072<br />}<br /><br />cpu {<br />  allocation_count = 3<br />}<br /></code></pre><br /><p>}</p><br /><p>tags                         = [\"one:two\"]</p><br /><p>users {<br />    name      = \"user123\"<br />    password  = \"password12\"<br />    type      = \"database\"<br />  }</p><br /><p>allowlist {<br />    address     = \"172.168.1.2/32\"<br />    description = \"desc1\"<br />  }</p><br /><p>timeouts {<br />    create = \"120m\"<br />    update = \"120m\"<br />    delete = \"15m\"<br />  }<br />}</p><br /><h3 id=\"sample-elasticsearch-enterprise-instance\">Sample Elasticsearch Enterprise instance</h3><br /><p>terraform<br />data \"ibm_resource_group\" \"test_acc\" {<br />  is_default = true<br />}</p><br /><p>resource \"ibm_database\" \"es\" {<br />  resource_group_id            = data.ibm_resource_group.test_acc.id<br />  name                         = \"es-enterprise\"<br />  service                      = \"databases-for-elasticsearch\"<br />  plan                         = \"enterprise\"<br />  location                     = \"eu-gb\"<br />  adminpassword                = \"password12\"<br />  version                      = \"7.17\"<br />  group {<br />    group_id = \"member\"<br />    members {<br />      allocation_count = 3<br />    }<br />    memory {<br />      allocation_mb = 1024<br />    }<br />    disk {<br />      allocation_mb = 5120<br />    }<br />    cpu {<br />      allocation_count = 3<br />    }<br />  }<br />  users {<br />    name     = \"user123\"<br />    password = \"password12\"<br />  }<br />  allowlist {<br />    address     = \"172.168.1.2/32\"<br />    description = \"desc1\"<br />  }</p><br /><p>timeouts {<br />    create = \"120m\"<br />    update = \"120m\"<br />    delete = \"15m\"<br />  }<br />}</p><br /><h3 id=\"updating-configuration-for-postgres-database\">Updating configuration for postgres database</h3><br /><p>terraform<br />data \"ibm_resource_group\" \"test_acc\" {<br />  is_default = true<br />}</p><br /><p>resource \"ibm_database\" \"db\" {<br />  location                     = \"us-east\"<br />  group {<br />    group_id = \"member\"</p><br /><pre><code>memory {<br />  allocation_mb = 12288<br />}<br /><br />disk {<br />  allocation_mb = 131072<br />}<br /><br />cpu {<br />  allocation_count = 3<br />}<br /></code></pre><br /><p>}<br />  name                         = \"telus-database\"<br />  service                      = \"databases-for-postgresql\"<br />  plan                         = \"standard\"<br />  configuration                 = &lt;&lt;CONFIGURATION<br />  {<br />    \"max_connections\": 400<br />  }<br />  CONFIGURATION<br />}</p><br /><h3 id=\"creating-logical-replication-slot-for-postgres-database\">Creating logical replication slot for postgres database</h3><br /><p>terraform<br />data \"ibm_resource_group\" \"test_acc\" {<br />  is_default = true<br />}</p><br /><p>resource \"ibm_database\" \"db\" {<br />  name                         = \"example-database\"<br />  service                      = \"databases-for-postgresql\"<br />  plan                         = \"standard\"<br />  location                     = \"us-east\"</p><br /><p>users {<br />    name     = \"repl\"<br />    password = \"repl123456\"<br />  }</p><br /><p>configuration                = &lt;&lt;CONFIGURATION<br />  {<br />    \"wal_level\": \"logical\",<br />    \"max_replication_slots\": 21,<br />    \"max_wal_senders\": 21<br />  }<br />  CONFIGURATION</p><br /><p>logical_replication_slot {<br />    name = \"wj123\"<br />    database_name = \"ibmclouddb\"<br />    plugin_type = \"wal2json\"<br />  }<br />}</p><br /><p><strong>provider.tf</strong><br />Please make sure to target right region in the provider block, If database is created in region other than <code>us-south</code></p><br /><p>terraform<br />provider \"ibm\" {<br />  ibmcloud_api_key = var.ibmcloud_api_key<br />  region           = \"eu-gb\"<br />}</p><br /><p>For more information, about an example that are related to a VSI configuration to connect to a PostgreSQL database, refer to <a href=\"https://github.com/IBM-Cloud/terraform-provider-ibm/tree/master/examples/ibm-database\">VSI configured connection</a>.</p><br />", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>The following timeouts are defined for this resource.</p><ul><li><code>Create</code> The creation of an instance is considered failed when no response is received for 60 minutes.</li><li><code>Update</code> The update of an instance is considered failed when no response is received for 20 minutes.</li><li><code>Delete</code> The deletion of an instance is considered failed when no response is received for 10 minutes.</li></ul><p>ICD create instance typically takes between 30 minutes to 45 minutes. Delete and update takes a minute. Provisioning time are unpredictable, if the apply fails due to a timeout, import the database resource once the create is completed.</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument reference</h2><p>Review the argument reference that you can specify for your resource.</p><ul><li><code>adminpassword</code> - (Optional, String)  The password for the database administrator. If not specified, an empty string is provided for the password and the user ID cannot be used. In this case, more users must be specified in a <code>user</code> block.</li><li><p><code>auto_scaling</code> (List , Optional) Configure rules to allow your database to automatically increase its resources. Single block of autoscaling is allowed at once.</p></li><li><p>Nested scheme for <code>auto_scaling</code>:</p><ul><li><p><code>disk</code> (List , Optional) Single block of disk is allowed at once in disk auto scaling.</p><ul><li>Nested scheme for <code>disk</code>:</li><li><code>capacity_enabled</code> - (Optional, Bool) Auto scaling scalar enables or disables the scalar capacity.</li><li><code>free_space_less_than_percent</code> - (Optional, Integer) Auto scaling scalar capacity free space less than percent.</li><li><code>io_above_percent</code> - (Optional, Integer) Auto scaling scalar I/O utilization above percent.</li><li><code>io_enabled</code> - (Optional, Bool) Auto scaling scalar I/O utilization enabled.`</li><li><code>io_over_period</code> - (Optional, String) Auto scaling scalar I/O utilization over period.</li><li><code>rate_increase_percent</code> - (Optional, Integer) Auto scaling rate increase percent.</li><li><code>rate_limit_mb_per_member</code> - (Optional, Integer) Auto scaling rate limit in megabytes per member.</li><li><code>rate_period_seconds</code> - (Optional, Integer) Auto scaling rate period in seconds.</li><li><code>rate_units</code> - (Optional, String) Auto scaling rate in units.</li></ul></li><li><p><code>memory</code> (List , Optional) Memory Auto Scaling in single block of memory is allowed at once.</p></li><li>Nested scheme for <code>memory</code>:<ul><li><code>io_above_percent</code> - (Optional, Integer) Auto scaling scalar I/O utilization above percent.</li><li><code>io_enabled</code>-Bool-Optional-Auto scaling scalar I/O utilization enabled.</li><li><code>io_over_period</code> - (Optional, String) Auto scaling scalar I/O utilization over period.</li><li><code>rate_increase_percent</code> - (Optional, Integer) Auto scaling rate in increase percent.</li><li><code>rate_limit_mb_per_member</code> - (Optional, Integer) Auto scaling rate limit in megabytes per member.</li><li><code>rate_period_seconds</code> - (Optional, Integer) Auto scaling rate period in seconds.</li><li><code>rate_units</code> - (Optional, String) Auto scaling rate in units.</li></ul></li></ul></li><li><p><code>backup_id</code> - (Optional, String) The CRN of a backup resource to restore from. The backup is created by a database deployment with the same service ID. The backup is loaded after provisioning and the new deployment starts up that uses that data. A backup CRN is in the format <code>crn:v1:&lt;\u2026&gt;:backup:</code>. If omitted, the database is provisioned empty.</p></li><li><code>backup_encryption_key_crn</code>- (Optional, Forces new resource, String) The CRN of a key protect key, that you want to use for encrypting disk that holds deployment backups. A key protect CRN is in the format <code>crn:v1:&lt;...&gt;:key:</code>. Backup_encryption_key_crn can be added only at the time of creation and no update support  are available.</li><li><code>configuration</code> - (Optional, Json String) Database Configuration in JSON format. Supported services <code>databases-for-postgresql</code>, <code>databases-for-redis</code> and <code>databases-for-enterprisedb</code>. For valid values please refer <a href=\"https://cloud.ibm.com/apidocs/cloud-databases-api/cloud-databases-api-v4#setdatabaseconfiguration-request\">API docs</a>.</li><li><code>logical_replication_slot</code> - (Optional, List of Objects) A list of logical replication slots that you want to create on the database. Multiple blocks are allowed. This is only available for <code>databases-for-postgresql</code>.</li></ul><p>Nested scheme for <code>logical_replication_slot</code>:<br />  - <code>name</code> - (Required, String) The name of the <code>logical_replication_slot</code>.<br />  - <code>database_name</code> - (Required, String) The name of the database on which you want to create the <code>logical_replication_slot</code>.<br />  - <code>plugin_type</code> - (Required, String) The plugin type that is used to create the <code>logical_replication_slot</code>. Only <code>wal2json</code> is supported.</p><p>Prereqs to creating a logical replication slot:<br />  - Make sure the replication user's (<code>repl</code>) password has been changed.<br />  - Make sure that your database is configured such that logical replication can be enabled. This means thats the <code>wal_level</code> needs to be set to <code>logical</code>. Also, <code>max_replication_slots</code> and <code>max_wal_senders</code> must be greater than 20.<br />  - For more information on enabling logical replication slots please see <a href=\"https://cloud.ibm.com/docs/databases-for-postgresql?topic=databases-for-postgresql-wal2json\">Configuring Wal2json</a><br />- <code>guid</code> - (Optional, String) The unique identifier of the database instance.<br />- <code>key_protect_key</code> - (Optional, Forces new resource, String) The root key CRN of a Key Management Services like Key Protect or Hyper Protect Crypto Service (HPCS)  that you want to use for disk encryption. A key CRN is in the format <code>crn:v1:&lt;\u2026&gt;:key:</code>. You can specify the root key during the database creation only. After the database is created, you cannot update the root key. For more information, refer <a href=\"https://cloud.ibm.com/docs/cloud-databases?topic=cloud-databases-key-protect#using-the-key-protect-key\">Disk encryption</a> documentation.<br />- <code>key_protect_instance</code> - (Optional, Forces new resource, String) The instance CRN of a Key Management Services like Key Protect or Hyper Protect Crypto Service (HPCS) that you want to use for disk encryption. An instance CRN is in the format <code>crn:v1:&lt;\u2026&gt;::</code>.<br />- <code>location</code> - (Required, String) The location where you want to deploy your instance. The location must match the <code>region</code> parameter that you specify in the <code>provider</code> block of your  Terraform configuration file. The default value is <code>us-south</code>. Currently, supported regions are <code>us-south</code>, <code>us-east</code>, <code>eu-gb</code>, <code>eu-de</code>, <code>au-syd</code>, <code>jp-tok</code>, <code>oslo01</code>.<br />- <code>group</code> - (Optional, Set) A set of group scaling values for the database. Multiple blocks are allowed. Can only be performed on is_adjustable=true groups. Values set are per-member. Values must be greater than or equal to the minimum size and must be a multiple of the step size.<br />  - Nested scheme for <code>group</code>:<br />    - <code>group_id</code> - (Optional, String) The ID of the scaling group. Scaling group ID allowed values:  <code>member</code>, <code>analytics</code>, <code>bi_connector</code> or <code>search</code>. Read more about <code>analytics</code> and <code>bi_connector</code> <a href=\"https://cloud.ibm.com/docs/databases-for-mongodb?topic=databases-for-mongodb-mongodbee-analytics\">here</a>. Read more about <code>search</code> <a href=\"https://cloud.ibm.com/docs/databases-for-cassandra?topic=databases-for-cassandra-dse-search\">here</a></p><pre><code>- `members` (Set, Optional)  - Nested scheme for `members`:    - `allocation_count` - (Optional, Integer) Allocated number of members.- `memory` (Set, Optional) Memory Auto Scaling in single block of memory is allowed at once.  - Nested scheme for `memory`:    - `allocation_mb` - (Optional, Integer) Allocated memory per-member.- `disk` (Set, Optional)  - Nested scheme for `disk`:    - `allocation_mb` - (Optional, Integer) Allocated disk per-member.- `cpu` (Set, Optional)  - Nested scheme for `cpu`:    - `allocation_count` - (Optional, Integer) Allocated dedicated CPU per-member.</code></pre><ul><li><code>members_memory_allocation_mb</code> <strong>Deprecated</strong> - (Optional, Integer) The amount of memory in megabytes for the database, split across all members. If not specified, the default setting of the database service is used, which can vary by database type.</li><li><code>members_disk_allocation_mb</code> <strong>Deprecated</strong> - (Optional, Integer) The amount of disk space for the database, split across all members. If not specified, the default setting of the database service is used, which can vary by database type.</li><li><code>members_cpu_allocation_count</code> <strong>Deprecated</strong> - (Optional, Integer) Enables and allocates the number of specified dedicated cores to your deployment.</li><li><code>node_count</code> <strong>Deprecated</strong> - (Optional, Integer) The total number of nodes in the cluster. If not specified defaults to the database minimum node count. These vary by database type. See the documentation related to each database for the defaults. https://cloud.ibm.com/docs/databases-for-postgresql?topic=cloud-databases-provisioning#provisioning-parameters</li><li><code>node_cpu_allocation_count</code> <strong>Deprecated</strong> - (Optional, Integer) Enables and allocates the number of specified dedicated cores to your deployment per node.</li><li><code>node_disk_allocation_mb</code> <strong>Deprecated</strong>  - (Optional, Integer) The disk size of the database per node. As above.</li><li><code>node_memory_allocation_mb</code> <strong>Deprecated</strong> - (Optional,Integer) The memory size for the database per node. If not specified defaults to the database default. These vary by database type. See the documentation related to each database for the defaults. https://cloud.ibm.com/docs/databases-for-postgresql?topic=cloud-databases-provisioning#provisioning-parameters</li></ul><p>~&gt; <strong>Note:</strong> <code>members_memory_allocation_mb</code>, <code>members_disk_allocation_mb</code>, <code>members_cpu_allocation_count</code> conflicts with <code>node_count</code>,<code>node_cpu_allocation_count</code>, <code>node_disk_allocation_mb</code>, <code>node_memory_allocation_mb</code>. <code>group</code> conflicts with <code>node_</code> and <code>members_</code> arguments. Either members, node, or group arguments have to be provided.<br />- <code>name</code> - (Required, String) A descriptive name that is used to identify the database instance. The name must not include spaces.<br />- <code>plan</code> - (Required, Forces new resource, String) The name of the service plan that you choose for your instance. All databases use <code>standard</code>. <code>enterprise</code> is supported only for elasticsearch (<code>databases-for-elasticsearch</code>), cassandra (<code>databases-for-cassandra</code>), and mongodb(<code>databases-for-mongodb</code>)* <code>plan_validation</code> - (Optional, bool) Enable or disable validating the database parameters for elasticsearch and postgres (more coming soon) during the plan phase. If not specified defaults to true.<br />- <code>point_in_time_recovery_deployment_id</code> - (Optional, String) The ID of the source deployment that you want to recover back to.<br />- <code>point_in_time_recovery_time</code> - (Optional, String) The timestamp in UTC format that you want to restore to. To retrieve the timestamp, run the <code>ibmcloud cdb postgresql earliest-pitr-timestamp &lt;deployment name or CRN&gt;</code> command. To restore to the latest available time, use a blank string <code>\"\"</code> as the timestamp. For more information, see <a href=\"https://cloud.ibm.com/docs/databases-for-postgresql?topic=databases-for-postgresql-pitr\">Point-in-time Recovery</a>.<br />- <code>remote_leader_id</code> - (Optional, String) A CRN of the leader database to make the replica(read-only) deployment. The leader database is created by a database deployment with the same service ID. A read-only replica is set up to replicate all of your data from the leader deployment to the replica deployment by using asynchronous replication. For more information, see <a href=\"https://cloud.ibm.com/docs/databases-for-postgresql?topic=databases-for-postgresql-read-only-replicas\">Configuring Read-only Replicas</a>.<br />- <code>resource_group_id</code> - (Optional, Forces new resource, String)  The ID of the resource group where you want to create the instance. To retrieve this value, run <code>ibmcloud resource groups</code> or use the <code>ibm_resource_group</code> data source. If no value is provided, the <code>default</code> resource group is used.<br />- <code>service</code> - (Required, Forces new resource, String) The type of Cloud Databases that you want to create. Only the following services are currently accepted: <code>databases-for-etcd</code>, <code>databases-for-postgresql</code>, <code>databases-for-redis</code>, <code>databases-for-elasticsearch</code>, <code>messages-for-rabbitmq</code>,<code>databases-for-mongodb</code>,<code>databases-for-mysql</code>, <code>databases-for-cassandra</code> and <code>databases-for-enterprisedb</code>.<br />- <code>service_endpoints</code> - (Optional, String) Specify whether you want to enable the public, private, or both service endpoints. Supported values are <code>public</code>, <code>private</code>, or <code>public-and-private</code>. The default is <code>public</code>.<br />- <code>tags</code> (Optional, Array of Strings) A list of tags that you want to add to your instance.<br />- <code>version</code> - (Optional, Forces new resource, String) The version of the database to be provisioned. If omitted, the database is created with the most recent major and minor version.<br />- <code>users</code> - (Optional, List of Objects) A list of users that you want to create on the database. Multiple blocks are allowed.</p><p>Nested scheme for <code>users</code>:<br />  - <code>name</code> - (Required, String) The user name to add to the database instance. The user name must be in the range 5 - 32 characters.<br />  - <code>password</code> - (Required, String) The password for the user. The password must be in the range 10 - 32 characters. Users<br />  - <code>type</code> - (Optional, String) The type for the user. Examples: <code>database</code>, <code>ops_manager</code>, <code>read_only_replica</code>. The default value is <code>database</code>.<br />  - <code>role</code> - (Optional, String) The role for the user. Only available for <code>ops_manager</code> user type. Examples: <code>group_read_only</code>, <code>group_data_access_admin</code>.</p><ul><li><code>allowlist</code> - (Optional, List of Objects) A list of allowed IP addresses for the database. Multiple blocks are allowed.</li></ul><p>Nested scheme for <code>allowlist</code>:<br />  - <code>address</code> - (Optional, String) The IP address or range of database client addresses to be allowlisted in CIDR format. Example, <code>172.168.1.2/32</code>.<br />  - <code>description</code> - (Optional, String) A description for the allowed IP addresses range.</p>", "attribute-reference": "<h2 id=\"attribute-reference\">Attribute reference</h2><p>In addition to all argument references list, you can access the following attribute references after your resource is created.</p><ul><li><code>adminuser</code> - (String) The user ID of the database administrator. Example, <code>admin</code> or <code>root</code>.</li><li><code>configuration_schema</code> (String) Database Configuration Schema in JSON format.</li><li><code>id</code> - (String) The CRN of the database instance.</li><li><code>status</code> - (String) The status of the instance.</li><li><code>version</code> - (String) The database version.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>The database instance can be imported by using the ID, that is formed from the CRN. To import the resource, you must specify the <code>region</code> parameter in the <code>provider</code> block of your  Terraform configuration file. If the region is not specified, <code>us-south</code> is used by default. An  Terraform refresh or apply fails, if the database instance is not in the same region as configured in the provider or its alias.</p><p>CRN is a 120 digit character string of the form -  <code>crn:v1:bluemix:public:databases-for-postgresql:us-south:a/4ea1882a2d3401ed1e459979941966ea:79226bd4-4076-4873-b5ce-b1dba48ff8c4::</code></p><p><strong>Syntax</strong></p><p>$ terraform import ibm_database.my_db <crn></p><p><strong>Example</strong></p><p>$ terraform import ibm_database.my_db crn:v1:bluemix:public:databases-for-postgresql:us-south:a/4ea1882a2d3401ed1e459979941966ea:79226bd4-4076-4873-b5ce-b1dba48ff8c4::</p><p>Import requires a minimal Terraform config file to allow importing.</p><p>terraform<br />resource \"ibm_database\" \"<your_database>\" {<br />  name              = \"<your_database_name>\"</p><p>Run <code>terraform state show ibm_database.&lt;your_database&gt;</code> after import to retrieve the more values to be included in the resource config file. Observe the ICD exports the admin userid. It does not export any more user IDs and passwords that are configured on the instance. These values must be retrieved from an alternative source. If new passwords need to be configured or the connection string that is retrieved to use the service, a new users block must be defined to create new users. This limitation is due to a lack of ICD functionality.</p>", "description": "<h1 id=\"ibm_database\">ibm_database</h1><p>Create, update, or delete a IBM Cloud Database (ICD) instance. The <code>ibmcloud_api_key</code> that are used by  Terraform should grant IAM rights to create and modify IBM Cloud Databases and have access to the resource group the ICD instance is associated with. For more information, see <a href=\"https://cloud.ibm.com/docs/services/databases-for-postgresql/reference-access-management.html#identity-and-access-management\">documentation</a> to manage ICD instances.</p><p>If <code>resource_group_id</code> is not specified, the ICD instance is created in the default resource group. The <code>API_KEY</code> must be assigned permissions for this group.</p><p>Configuration of an ICD resource requires that the <code>region</code> parameter is set for the IBM provider in the <code>provider.tf</code> to be the same as the target ICD <code>location/region</code>. If not specified it default to <code>us-south</code>. A <code>terraform apply</code>  fails if the ICD <code>location</code> is set differently. If the Terraform configuration needs to deploy resources into multiple regions, provider alias can be used. For more information, see <a href=\"https://www.terraform.io/docs/configuration/providers.html#multiple-provider-instances\">Terraform provider configuration</a>.</p>"}