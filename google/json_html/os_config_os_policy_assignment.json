{"google-os-config-os-policy-assignment": "<h1 id=\"google_os_config_os_policy_assignment\">google_os_config_os_policy_assignment</h1><p>OS policy assignment is an API resource that is used to apply a set of OS<br />policies to a dynamically targeted group of Compute Engine VM instances. An OS<br />policy is used to define the desired state configuration for a Compute Engine VM<br />instance through a set of configuration resources that provide capabilities such<br />as installing or removing software packages, or executing a script. For more<br />information about the OS policy resource definitions and examples, see<br /><a href=\"https://cloud.google.com/compute/docs/os-configuration-management/working-with-os-policies\">OS policy and OS policy assignment</a>.</p><p>To get more information about OSPolicyAssignment, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/osconfig/rest/v1/projects.locations.osPolicyAssignments\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/compute/docs/os-configuration-management/create-os-policy-assignment\">Official Documentation</a></li></ul></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=os_config_os_policy_assignment_basic&cloudshell_image=gcr.io%2Fgraphite-cloud-shell-images%2Fterraform%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---os-config-os-policy-assignment-basic": "<h2 id=\"example-usage-os-config-os-policy-assignment-basic\">Example Usage - Os Config Os Policy Assignment Basic</h2><p><br />resource \"google_os_config_os_policy_assignment\" \"primary\" {<br />  instance_filter {<br />    all = false<br />    exclusion_labels {<br />      labels = {<br />        label-two = \"value-two\"<br />      }<br />    }<br />    inclusion_labels {<br />      labels = {<br />        label-one = \"value-one\"<br />      }<br />    }<br />    inventories {<br />      os_short_name = \"centos\"<br />      os_version    = \"8.*\"<br />    }<br />  }</p><p>location = \"us-central1-a\"<br />  name     = \"policy-assignment\"</p><p>os_policies {<br />    id   = \"policy\"<br />    mode = \"VALIDATION\"</p><pre><code>resource_groups {  resources {    id = \"apt-to-yum\"    repository {      apt {        archive_type = \"DEB\"        components   = [\"doc\"]        distribution = \"debian\"        uri          = \"https://atl.mirrors.clouvider.net/debian\"        gpg_key      = \".gnupg/pubring.kbx\"      }    }  }  inventory_filters {    os_short_name = \"centos\"    os_version    = \"8.*\"  }  resources {    id = \"exec1\"    exec {      validate {        interpreter = \"SHELL\"        args        = [\"arg1\"]        file {          local_path = \"$HOME/script.sh\"        }        output_file_path = \"$HOME/out\"      }      enforce {        interpreter = \"SHELL\"        args        = [\"arg1\"]        file {          allow_insecure = true          remote {            uri             = \"https://www.example.com/script.sh\"            sha256_checksum = \"c7938fed83afdccbb0e86a2a2e4cad7d5035012ca3214b4a61268393635c3063\"          }        }        output_file_path = \"$HOME/out\"      }    }  }}allow_no_resource_group_match = falsedescription                   = \"A test os policy\"</code></pre><p>}</p><p>rollout {<br />    disruption_budget {<br />      percent = 100<br />    }</p><pre><code>min_wait_duration = \"3s\"</code></pre><p>}</p><p>description = \"A test os policy assignment\"<br />}<br /></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) Resource name.</p></li><li><p><code>os_policies</code> - (Required) List of OS policies to be applied to the VMs.<br />    Structure is <a href=\"#nested_os_policies\">documented below</a>.</p></li><li><p><code>instance_filter</code> - (Required) Filter to select VMs. Structure is<br /><a href=\"#nested_instance_filter\">documented below</a>.</p></li><li><p><code>rollout</code> - (Required) Rollout to deploy the OS policy assignment. A rollout<br />    is triggered in the following situations: 1) OSPolicyAssignment is created.<br />    2) OSPolicyAssignment is updated and the update contains changes to one of<br />    the following fields: - instance_filter - os_policies 3) OSPolicyAssignment<br />    is deleted. Structure is <a href=\"#nested_rollout\">documented below</a>.</p></li><li><p><code>location</code> - (Required) The location for the resource</p></li></ul><p><a name=\"nested_os_policies\"></a>The <code>os_policies</code> block supports:</p><ul><li><p><code>id</code> - (Required) The id of the OS policy with the following restrictions:</p><ul><li>Must contain only lowercase letters, numbers, and hyphens.</li><li>Must start with a letter.</li><li>Must be between 1-63 characters.</li><li>Must end with a number or a letter.</li><li>Must be unique within the assignment.</li></ul></li><li><p><code>description</code> - (Optional) Policy description. Length of the description is<br />    limited to 1024 characters.</p></li><li><p><code>mode</code> - (Required) Policy mode Possible values are: <code>MODE_UNSPECIFIED</code>,<br /><code>VALIDATION</code>, <code>ENFORCEMENT</code>.</p></li><li><p><code>resource_groups</code> - (Required) List of resource groups for the policy. For a<br />    particular VM, resource groups are evaluated in the order specified and the<br />    first resource group that is applicable is selected and the rest are<br />    ignored. If none of the resource groups are applicable for a VM, the VM is<br />    considered to be non-compliant w.r.t this policy. This behavior can be<br />    toggled by the flag <code>allow_no_resource_group_match</code> Structure is<br /><a href=\"#nested_resource_groups\">documented below</a>.</p></li><li><p><code>allow_no_resource_group_match</code> - (Optional) This flag determines the OS<br />    policy compliance status when none of the resource groups within the policy<br />    are applicable for a VM. Set this value to <code>true</code> if the policy needs to be<br />    reported as compliant even if the policy has nothing to validate or enforce.</p></li></ul><p><a name=\"nested_resource_groups\"></a>The <code>resource_groups</code> block supports:</p><ul><li><p><code>inventory_filters</code> - (Optional) List of inventory filters for the resource<br />    group. The resources in this resource group are applied to the target VM if<br />    it satisfies at least one of the following inventory filters. For example,<br />    to apply this resource group to VMs running either <code>RHEL</code> or <code>CentOS</code><br />    operating systems, specify 2 items for the list with following values:<br />    inventory_filters[0].os_short_name='rhel' and<br />    inventory_filters[1].os_short_name='centos' If the list is empty, this<br />    resource group will be applied to the target VM unconditionally. Structure<br />    is <a href=\"#nested_inventory_filters\">documented below</a>.</p></li><li><p><code>resources</code> - (Required) List of resources configured for this resource<br />    group. The resources are executed in the exact order specified here.<br />    Structure is <a href=\"#nested_resources\">documented below</a>.</p></li></ul><p><a name=\"nested_inventory_filters\"></a>The <code>inventory_filters</code> block supports:</p><ul><li><p><code>os_short_name</code> - (Required) The OS short name</p></li><li><p><code>os_version</code> - (Optional) The OS version Prefix matches are supported if<br />    asterisk(*) is provided as the last character. For example, to match all<br />    versions with a major version of <code>7</code>, specify the following value for this<br />    field <code>7.*</code> An empty string matches all OS versions.</p></li></ul><p><a name=\"nested_resources\"></a>The <code>resources</code> block supports:</p><ul><li><p><code>id</code> - (Required) The id of the resource with the following restrictions:</p><ul><li>Must contain only lowercase letters, numbers, and hyphens.</li><li>Must start with a letter.</li><li>Must be between 1-63 characters.</li><li>Must end with a number or a letter.</li><li>Must be unique within the OS policy.</li></ul></li><li><p><code>pkg</code> - (Optional) Package resource Structure is<br /><a href=\"#nested_pkg\">documented below</a>.</p></li><li><p><code>repository</code> - (Optional) Package repository resource Structure is<br /><a href=\"#nested_repository\">documented below</a>.</p></li><li><p><code>exec</code> - (Optional) Exec resource Structure is<br /><a href=\"#nested_exec\">documented below</a>.</p></li><li><p><code>file</code> - (Optional) File resource Structure is<br /><a href=\"#nested_file\">documented below</a>.</p></li></ul><p><a name=\"nested_pkg\"></a>The <code>pkg</code> block supports:</p><ul><li><p><code>desired_state</code> - (Required) The desired state the agent should maintain for<br />    this package. Possible values are: <code>DESIRED_STATE_UNSPECIFIED</code>, <code>INSTALLED</code>,<br /><code>REMOVED</code>.</p></li><li><p><code>apt</code> - (Optional) A package managed by Apt. Structure is<br /><a href=\"#nested_apt\">documented below</a>.</p></li><li><p><code>deb</code> - (Optional) A deb package file. Structure is<br /><a href=\"#nested_deb\">documented below</a>.</p></li><li><p><code>yum</code> - (Optional) A package managed by YUM. Structure is<br /><a href=\"#nested_yum\">documented below</a>.</p></li><li><p><code>zypper</code> - (Optional) A package managed by Zypper. Structure is<br /><a href=\"#nested_zypper\">documented below</a>.</p></li><li><p><code>rpm</code> - (Optional) An rpm package file. Structure is<br /><a href=\"#nested_rpm\">documented below</a>.</p></li><li><p><code>googet</code> - (Optional) A package managed by GooGet. Structure is<br /><a href=\"#nested_googet\">documented below</a>.</p></li><li><p><code>msi</code> - (Optional) An MSI package. Structure is<br /><a href=\"#nested_msi\">documented below</a>.</p></li></ul><p><a name=\"nested_apt\"></a>The <code>apt</code> block supports:</p><ul><li><code>name</code> - (Required) Package name.</li></ul><p><a name=\"nested_deb\"></a>The <code>deb</code> block supports:</p><ul><li><p><code>source</code> - (Required) A deb package. Structure is<br /><a href=\"#nested_source\">documented below</a>.</p></li><li><p><code>pull_deps</code> - (Optional) Whether dependencies should also be installed. -<br />    install when false: <code>dpkg -i package</code> - install when true: <code>apt-get update    &amp;&amp; apt-get -y install package.deb</code></p></li></ul><p><a name=\"nested_source\"></a>The <code>source</code> block supports:</p><ul><li><p><code>remote</code> - (Optional) A generic remote file. Structure is<br /><a href=\"#nested_remote\">documented below</a>.</p></li><li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is<br /><a href=\"#nested_gcs\">documented below</a>.</p></li><li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li><li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are<br />    subject to validations based on the file type: Remote: A checksum must be<br />    specified. Cloud Storage: An object generation number must be specified.</p></li></ul><p><a name=\"nested_remote\"></a>The <code>remote</code> block supports:</p><ul><li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain<br />    both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li><li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li></ul><p><a name=\"nested_gcs\"></a>The <code>gcs</code> block supports:</p><ul><li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li><li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li><li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li></ul><p><a name=\"nested_yum\"></a>The <code>yum</code> block supports:</p><ul><li><code>name</code> - (Required) Package name.</li></ul><p><a name=\"nested_zypper\"></a>The <code>zypper</code> block supports:</p><ul><li><code>name</code> - (Required) Package name.</li></ul><p><a name=\"nested_rpm\"></a>The <code>rpm</code> block supports:</p><ul><li><p><code>source</code> - (Required) An rpm package. Structure is<br /><a href=\"#nested_source\">documented below</a>.</p></li><li><p><code>pull_deps</code> - (Optional) Whether dependencies should also be installed. -<br />    install when false: <code>rpm --upgrade --replacepkgs package.rpm</code> - install when<br />    true: <code>yum -y install package.rpm</code> or <code>zypper -y install package.rpm</code></p></li></ul><p><a name=\"nested_source\"></a>The <code>source</code> block supports:</p><ul><li><p><code>remote</code> - (Optional) A generic remote file. Structure is<br /><a href=\"#nested_remote\">documented below</a>.</p></li><li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is<br /><a href=\"#nested_gcs\">documented below</a>.</p></li><li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li><li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are<br />    subject to validations based on the file type: Remote: A checksum must be<br />    specified. Cloud Storage: An object generation number must be specified.</p></li></ul><p><a name=\"nested_remote\"></a>The <code>remote</code> block supports:</p><ul><li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain<br />    both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li><li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li></ul><p><a name=\"nested_gcs\"></a>The <code>gcs</code> block supports:</p><ul><li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li><li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li><li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li></ul><p><a name=\"nested_googet\"></a>The <code>googet</code> block supports:</p><ul><li><code>name</code> - (Required) Package name.</li></ul><p><a name=\"nested_msi\"></a>The <code>msi</code> block supports:</p><ul><li><p><code>source</code> - (Required) The MSI package. Structure is<br /><a href=\"#nested_source\">documented below</a>.</p></li><li><p><code>properties</code> - (Optional) Additional properties to use during installation.<br />    This should be in the format of Property=Setting. Appended to the defaults<br />    of <code>ACTION=INSTALL REBOOT=ReallySuppress</code>.</p></li></ul><p><a name=\"nested_source\"></a>The <code>source</code> block supports:</p><ul><li><p><code>remote</code> - (Optional) A generic remote file. Structure is<br /><a href=\"#nested_remote\">documented below</a>.</p></li><li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is<br /><a href=\"#nested_gcs\">documented below</a>.</p></li><li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li><li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are<br />    subject to validations based on the file type: Remote: A checksum must be<br />    specified. Cloud Storage: An object generation number must be specified.</p></li></ul><p><a name=\"nested_remote\"></a>The <code>remote</code> block supports:</p><ul><li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain<br />    both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li><li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li></ul><p><a name=\"nested_gcs\"></a>The <code>gcs</code> block supports:</p><ul><li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li><li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li><li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li></ul><p><a name=\"nested_repository\"></a>The <code>repository</code> block supports:</p><ul><li><p><code>apt</code> - (Optional) An Apt Repository. Structure is<br /><a href=\"#nested_apt\">documented below</a>.</p></li><li><p><code>yum</code> - (Optional) A Yum Repository. Structure is<br /><a href=\"#nested_yum\">documented below</a>.</p></li><li><p><code>zypper</code> - (Optional) A Zypper Repository. Structure is<br /><a href=\"#nested_zypper\">documented below</a>.</p></li><li><p><code>goo</code> - (Optional) A Goo Repository. Structure is<br /><a href=\"#nested_goo\">documented below</a>.</p></li></ul><p><a name=\"nested_apt\"></a>The <code>apt</code> block supports:</p><ul><li><p><code>archive_type</code> - (Required) Type of archive files in this repository.<br />    Possible values are: <code>ARCHIVE_TYPE_UNSPECIFIED</code>, <code>DEB</code>, <code>DEB_SRC</code>.</p></li><li><p><code>uri</code> - (Required) URI for this repository.</p></li><li><p><code>distribution</code> - (Required) Distribution of this repository.</p></li><li><p><code>components</code> - (Required) List of components for this repository. Must<br />    contain at least one item.</p></li><li><p><code>gpg_key</code> - (Optional) URI of the key file for this repository. The agent<br />    maintains a keyring at <code>/etc/apt/trusted.gpg.d/osconfig_agent_managed.gpg</code>.</p></li></ul><p><a name=\"nested_yum\"></a>The <code>yum</code> block supports:</p><ul><li><p><code>id</code> - (Required) A one word, unique name for this repository. This is the<br /><code>repo id</code> in the yum config file and also the <code>display_name</code> if<br /><code>display_name</code> is omitted. This id is also used as the unique identifier<br />    when checking for resource conflicts.</p></li><li><p><code>display_name</code> - (Optional) The display name of the repository.</p></li><li><p><code>base_url</code> - (Required) The location of the repository directory.</p></li><li><p><code>gpg_keys</code> - (Optional) URIs of GPG keys.</p></li></ul><p><a name=\"nested_zypper\"></a>The <code>zypper</code> block supports:</p><ul><li><p><code>id</code> - (Required) A one word, unique name for this repository. This is the<br /><code>repo id</code> in the zypper config file and also the <code>display_name</code> if<br /><code>display_name</code> is omitted. This id is also used as the unique identifier<br />    when checking for GuestPolicy conflicts.</p></li><li><p><code>display_name</code> - (Optional) The display name of the repository.</p></li><li><p><code>base_url</code> - (Required) The location of the repository directory.</p></li><li><p><code>gpg_keys</code> - (Optional) URIs of GPG keys.</p></li></ul><p><a name=\"nested_goo\"></a>The <code>goo</code> block supports:</p><ul><li><p><code>name</code> - (Required) The name of the repository.</p></li><li><p><code>url</code> - (Required) The url of the repository.</p></li></ul><p><a name=\"nested_exec\"></a>The <code>exec</code> block supports:</p><ul><li><p><code>validate</code> - (Required) What to run to validate this resource is in the<br />    desired state. An exit code of 100 indicates \"in desired state\", and exit<br />    code of 101 indicates \"not in desired state\". Any other exit code indicates<br />    a failure running validate. Structure is<br /><a href=\"#nested_validate\">documented below</a>.</p></li><li><p><code>enforce</code> - (Optional) What to run to bring this resource into the desired<br />    state. An exit code of 100 indicates \"success\", any other exit code<br />    indicates a failure running enforce. Structure is<br /><a href=\"#nested_enforce\">documented below</a>.</p></li></ul><p><a name=\"nested_validate\"></a>The <code>validate</code> block supports:</p><ul><li><p><code>file</code> - (Optional) A remote or local file. Structure is<br /><a href=\"#nested_file\">documented below</a>.</p></li><li><p><code>script</code> - (Optional) An inline script. The size of the script is limited to<br />    1024 characters.</p></li><li><p><code>args</code> - (Optional) Optional arguments to pass to the source during<br />    execution.</p></li><li><p><code>interpreter</code> - (Required) The script interpreter to use. Possible values<br />    are: <code>INTERPRETER_UNSPECIFIED</code>, <code>NONE</code>, <code>SHELL</code>, <code>POWERSHELL</code>.</p></li><li><p><code>output_file_path</code> - (Optional) Only recorded for enforce Exec. Path to an<br />    output file (that is created by this Exec) whose content will be recorded in<br />    OSPolicyResourceCompliance after a successful run. Absence or failure to<br />    read this file will result in this ExecResource being non-compliant. Output<br />    file size is limited to 100K bytes.</p></li></ul><p><a name=\"nested_file\"></a>The <code>file</code> block supports:</p><ul><li><p><code>remote</code> - (Optional) A generic remote file. Structure is<br /><a href=\"#nested_remote\">documented below</a>.</p></li><li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is<br /><a href=\"#nested_gcs\">documented below</a>.</p></li><li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li><li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are<br />    subject to validations based on the file type: Remote: A checksum must be<br />    specified. Cloud Storage: An object generation number must be specified.</p></li></ul><p><a name=\"nested_remote\"></a>The <code>remote</code> block supports:</p><ul><li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain<br />    both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li><li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li></ul><p><a name=\"nested_gcs\"></a>The <code>gcs</code> block supports:</p><ul><li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li><li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li><li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li></ul><p><a name=\"nested_enforce\"></a>The <code>enforce</code> block supports:</p><ul><li><p><code>file</code> - (Optional) A remote or local file. Structure is<br /><a href=\"#nested_file\">documented below</a>.</p></li><li><p><code>script</code> - (Optional) An inline script. The size of the script is limited to<br />    1024 characters.</p></li><li><p><code>args</code> - (Optional) Optional arguments to pass to the source during<br />    execution.</p></li><li><p><code>interpreter</code> - (Required) The script interpreter to use. Possible values<br />    are: <code>INTERPRETER_UNSPECIFIED</code>, <code>NONE</code>, <code>SHELL</code>, <code>POWERSHELL</code>.</p></li><li><p><code>output_file_path</code> - (Optional) Only recorded for enforce Exec. Path to an<br />    output file (that is created by this Exec) whose content will be recorded in<br />    OSPolicyResourceCompliance after a successful run. Absence or failure to<br />    read this file will result in this ExecResource being non-compliant. Output<br />    file size is limited to 100K bytes.</p></li></ul><p><a name=\"nested_file\"></a>The <code>file</code> block supports:</p><ul><li><p><code>remote</code> - (Optional) A generic remote file. Structure is<br /><a href=\"#nested_remote\">documented below</a>.</p></li><li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is<br /><a href=\"#nested_gcs\">documented below</a>.</p></li><li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li><li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are<br />    subject to validations based on the file type: Remote: A checksum must be<br />    specified. Cloud Storage: An object generation number must be specified.</p></li></ul><p><a name=\"nested_remote\"></a>The <code>remote</code> block supports:</p><ul><li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain<br />    both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li><li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li></ul><p><a name=\"nested_gcs\"></a>The <code>gcs</code> block supports:</p><ul><li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li><li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li><li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li></ul><p><a name=\"nested_file\"></a>The <code>file</code> block supports:</p><ul><li><p><code>file</code> - (Optional) A remote or local source. Structure is<br /><a href=\"#nested_file\">documented below</a>.</p></li><li><p><code>content</code> - (Optional) A a file with this content. The size of the content<br />    is limited to 1024 characters.</p></li><li><p><code>path</code> - (Required) The absolute path of the file within the VM.</p></li><li><p><code>state</code> - (Required) Desired state of the file. Possible values are:<br /><code>DESIRED_STATE_UNSPECIFIED</code>, <code>PRESENT</code>, <code>ABSENT</code>, <code>CONTENTS_MATCH</code>.</p></li><li><p><code>permissions</code> - (Output) Consists of three octal digits which represent, in<br />    order, the permissions of the owner, group, and other users for the file<br />    (similarly to the numeric mode used in the linux chmod utility). Each digit<br />    represents a three bit number with the 4 bit corresponding to the read<br />    permissions, the 2 bit corresponds to the write bit, and the one bit<br />    corresponds to the execute permission. Default behavior is 755. Below are<br />    some examples of permissions and their associated values: read, write, and<br />    execute: 7 read and execute: 5 read and write: 6 read only: 4</p></li></ul><p><a name=\"nested_file\"></a>The <code>file</code> block supports:</p><ul><li><p><code>remote</code> - (Optional) A generic remote file. Structure is<br /><a href=\"#nested_remote\">documented below</a>.</p></li><li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is<br /><a href=\"#nested_gcs\">documented below</a>.</p></li><li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li><li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are<br />    subject to validations based on the file type: Remote: A checksum must be<br />    specified. Cloud Storage: An object generation number must be specified.</p></li></ul><p><a name=\"nested_remote\"></a>The <code>remote</code> block supports:</p><ul><li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain<br />    both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li><li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li></ul><p><a name=\"nested_gcs\"></a>The <code>gcs</code> block supports:</p><ul><li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li><li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li><li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li></ul><p><a name=\"nested_instance_filter\"></a>The <code>instance_filter</code> block supports:</p><ul><li><p><code>all</code> - (Optional) Target all VMs in the project. If true, no other criteria<br />    is permitted.</p></li><li><p><code>inclusion_labels</code> - (Optional) List of label sets used for VM inclusion. If<br />    the list has more than one <code>LabelSet</code>, the VM is included if any of the<br />    label sets are applicable for the VM. Structure is<br /><a href=\"#nested_inclusion_labels\">documented below</a>.</p></li><li><p><code>exclusion_labels</code> - (Optional) List of label sets used for VM exclusion. If<br />    the list has more than one label set, the VM is excluded if any of the label<br />    sets are applicable for the VM. Structure is<br /><a href=\"#nested_exclusion_labels\">documented below</a>.</p></li><li><p><code>inventories</code> - (Optional) List of inventories to select VMs. A VM is<br />    selected if its inventory data matches at least one of the following<br />    inventories. Structure is <a href=\"#nested_inventories\">documented below</a>.</p></li></ul><p><a name=\"nested_inclusion_labels\"></a>The <code>inclusion_labels</code> block supports:</p><ul><li><code>labels</code> - (Optional) Labels are identified by key/value pairs in this map.<br />    A VM should contain all the key/value pairs specified in this map to be<br />    selected.</li></ul><p><a name=\"nested_exclusion_labels\"></a>The <code>exclusion_labels</code> block supports:</p><ul><li><code>labels</code> - (Optional) Labels are identified by key/value pairs in this map.<br />    A VM should contain all the key/value pairs specified in this map to be<br />    selected.</li></ul><p><a name=\"nested_inventories\"></a>The <code>inventories</code> block supports:</p><ul><li><p><code>os_short_name</code> - (Required) The OS short name</p></li><li><p><code>os_version</code> - (Optional) The OS version Prefix matches are supported if<br />    asterisk(*) is provided as the last character. For example, to match all<br />    versions with a major version of <code>7</code>, specify the following value for this<br />    field <code>7.*</code> An empty string matches all OS versions.</p></li></ul><p><a name=\"nested_rollout\"></a>The <code>rollout</code> block supports:</p><ul><li><p><code>disruption_budget</code> - (Required) The maximum number (or percentage) of VMs<br />    per zone to disrupt at any given moment. Structure is<br /><a href=\"#nested_disruption_budget\">documented below</a>.</p></li><li><p><code>min_wait_duration</code> - (Required) This determines the minimum duration of<br />    time to wait after the configuration changes are applied through the current<br />    rollout. A VM continues to count towards the <code>disruption_budget</code> at least<br />    until this duration of time has passed after configuration changes are<br />    applied.</p></li></ul><p><a name=\"nested_disruption_budget\"></a>The <code>disruption_budget</code> block supports:</p><ul><li><p><code>fixed</code> - (Optional) Specifies a fixed value.</p></li><li><p><code>percent</code> - (Optional) Specifies the relative value defined as a percentage,<br />    which will be multiplied by a reference value.</p></li></ul><hr /><ul><li><p><code>description</code> - (Optional) OS policy assignment description. Length of the<br />    description is limited to 1024 characters.</p></li><li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.<br />    If it is not provided, the provider project is used.</p></li><li><p><code>skip_await_rollout</code> - (Optional) Set to true to skip awaiting rollout<br />    during resource creation and update.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are<br />exported:</p><ul><li><p><code>id</code> - an identifier for the resource with format<br /><code>projects/{{project}}/locations/{{location}}/osPolicyAssignments/{{name}}</code></p></li><li><p><code>revision_id</code> - Output only. The assignment revision ID A new revision is<br />    committed whenever a rollout is triggered for a OS policy assignment</p></li><li><p><code>revision_create_time</code> - Output only. The timestamp that the revision was<br />    created.</p></li><li><p><code>etag</code> - The etag for this OS policy assignment. If this is provided on<br />    update, it must match the server's etag.</p></li><li><p><code>rollout_state</code> - Output only. OS policy assignment rollout state</p></li><li><p><code>baseline</code> - Output only. Indicates that this revision has been successfully<br />    rolled out in this zone and new VMs will be assigned OS policies from this<br />    revision. For a given OS policy assignment, there is only one revision with<br />    a value of <code>true</code> for this field.</p></li><li><p><code>deleted</code> - Output only. Indicates that this revision deletes the OS policy<br />    assignment.</p></li><li><p><code>reconciling</code> - Output only. Indicates that reconciliation is in progress<br />    for the revision. This value is <code>true</code> when the <code>rollout_state</code> is one of:</p><ul><li>IN_PROGRESS</li><li>CANCELLING</li></ul></li><li><p><code>uid</code> - Output only. Server generated unique id for the OS policy assignment<br />    resource.</p></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a><br />configuration options:</p><ul><li><code>create</code> - Default is 20 minutes.</li><li><code>update</code> - Default is 20 minutes.</li><li><code>delete</code> - Default is 20 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>OSPolicyAssignment can be imported using any of these accepted formats:</p><p><code>$ terraform import google_os_config_os_policy_assignment.default projects/{{project}}/locations/{{location}}/osPolicyAssignments/{{name}}$ terraform import google_os_config_os_policy_assignment.default {{project}}/{{location}}/{{name}}$ terraform import google_os_config_os_policy_assignment.default {{location}}/{{name}}</code></p>", "user-project-overrides": "<h2 id=\"user-project-overrides\">User Project Overrides</h2><p>This resource supports<br /><a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override\">User Project Overrides</a>.</p>", "description": "<h1 id=\"google_os_config_os_policy_assignment\">google_os_config_os_policy_assignment</h1><p>OS policy assignment is an API resource that is used to apply a set of OS<br />policies to a dynamically targeted group of Compute Engine VM instances. An OS<br />policy is used to define the desired state configuration for a Compute Engine VM<br />instance through a set of configuration resources that provide capabilities such<br />as installing or removing software packages, or executing a script. For more<br />information about the OS policy resource definitions and examples, see<br /><a href=\"https://cloud.google.com/compute/docs/os-configuration-management/working-with-os-policies\">OS policy and OS policy assignment</a>.</p><p>To get more information about OSPolicyAssignment, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/osconfig/rest/v1/projects.locations.osPolicyAssignments\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/compute/docs/os-configuration-management/create-os-policy-assignment\">Official Documentation</a></li></ul></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=os_config_os_policy_assignment_basic&cloudshell_image=gcr.io%2Fgraphite-cloud-shell-images%2Fterraform%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>"}