{"": "<h1 id=\"-_2\">----------------------------------------------------------------------------</h1><p>subcategory: \"Compute Engine\"<br />description: |-<br />  Represents an Autoscaler resource.</p><hr />", "auto-generated-code-type-mmv1": "<h1 id=\"auto-generated-code-type-mmv1\"><strong><em>     AUTO GENERATED CODE    </em></strong>    Type: MMv1     ***</h1>", "this-file-is-automatically-generated-by-magic-modules-and-manual": "<h1 id=\"this-file-is-automatically-generated-by-magic-modules-and-manual\">This file is automatically generated by Magic Modules and manual</h1>", "changes-will-be-clobbered-when-the-file-is-regenerated": "<h1 id=\"changes-will-be-clobbered-when-the-file-is-regenerated\">changes will be clobbered when the file is regenerated.</h1>", "please-read-more-about-how-to-change-this-file-in": "<h1 id=\"please-read-more-about-how-to-change-this-file-in\">Please read more about how to change this file in</h1>", "github-contributing-md": "<h1 id=\"githubcontributingmd\">.github/CONTRIBUTING.md.</h1>", "google-compute-autoscaler": "<h1 id=\"google_compute_autoscaler\">google_compute_autoscaler</h1><p>Represents an Autoscaler resource.</p><p>Autoscalers allow you to automatically scale virtual machine instances in<br />managed instance groups according to an autoscaling policy that you<br />define.</p><p>To get more information about Autoscaler, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/v1/autoscalers\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/compute/docs/autoscaler/\">Autoscaling Groups of Instances</a></li></ul></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=autoscaler_single_instance&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---autoscaler-single-instance": "<h2 id=\"example-usage-autoscaler-single-instance\">Example Usage - Autoscaler Single Instance</h2><p>resource \"google_compute_autoscaler\" \"default\" {<br />  provider = google-beta</p><p>name   = \"my-autoscaler\"<br />  zone   = \"us-central1-f\"<br />  target = google_compute_instance_group_manager.default.id</p><p>autoscaling_policy {<br />    max_replicas    = 5<br />    min_replicas    = 1<br />    cooldown_period = 60</p><pre><code>metric {  name                       = \"pubsub.googleapis.com/subscription/num_undelivered_messages\"  filter                     = \"resource.type = pubsub_subscription AND resource.label.subscription_id = our-subscription\"  single_instance_assignment = 65535}</code></pre><p>}<br />}</p><p>resource \"google_compute_instance_template\" \"default\" {<br />  provider = google-beta</p><p>name           = \"my-instance-template\"<br />  machine_type   = \"e2-medium\"<br />  can_ip_forward = false</p><p>tags = [\"foo\", \"bar\"]</p><p>disk {<br />    source_image = data.google_compute_image.debian_9.id<br />  }</p><p>network_interface {<br />    network = \"default\"<br />  }</p><p>metadata = {<br />    foo = \"bar\"<br />  }</p><p>service_account {<br />    scopes = [\"userinfo-email\", \"compute-ro\", \"storage-ro\"]<br />  }<br />}</p><p>resource \"google_compute_target_pool\" \"default\" {<br />  provider = google-beta</p><p>name = \"my-target-pool\"<br />}</p><p>resource \"google_compute_instance_group_manager\" \"default\" {<br />  provider = google-beta</p><p>name = \"my-igm\"<br />  zone = \"us-central1-f\"</p><p>version {<br />    instance_template = google_compute_instance_template.default.id<br />    name              = \"primary\"<br />  }</p><p>target_pools       = [google_compute_target_pool.default.id]<br />  base_instance_name = \"autoscaler-sample\"<br />}</p><p>data \"google_compute_image\" \"debian_9\" {<br />  provider = google-beta</p><p>family  = \"debian-11\"<br />  project = \"debian-cloud\"<br />}</p><p>provider \"google-beta\" {<br />  region = \"us-central1\"<br />  zone   = \"us-central1-a\"</p><p>}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=autoscaler_basic&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---autoscaler-basic": "<h2 id=\"example-usage-autoscaler-basic\">Example Usage - Autoscaler Basic</h2><p>resource \"google_compute_autoscaler\" \"foobar\" {<br />  name   = \"my-autoscaler\"<br />  zone   = \"us-central1-f\"<br />  target = google_compute_instance_group_manager.foobar.id</p><p>autoscaling_policy {<br />    max_replicas    = 5<br />    min_replicas    = 1<br />    cooldown_period = 60</p><pre><code>cpu_utilization {  target = 0.5}</code></pre><p>}<br />}</p><p>resource \"google_compute_instance_template\" \"foobar\" {<br />  name           = \"my-instance-template\"<br />  machine_type   = \"e2-medium\"<br />  can_ip_forward = false</p><p>tags = [\"foo\", \"bar\"]</p><p>disk {<br />    source_image = data.google_compute_image.debian_9.id<br />  }</p><p>network_interface {<br />    network = \"default\"<br />  }</p><p>metadata = {<br />    foo = \"bar\"<br />  }</p><p>service_account {<br />    scopes = [\"userinfo-email\", \"compute-ro\", \"storage-ro\"]<br />  }<br />}</p><p>resource \"google_compute_target_pool\" \"foobar\" {<br />  name = \"my-target-pool\"<br />}</p><p>resource \"google_compute_instance_group_manager\" \"foobar\" {<br />  name = \"my-igm\"<br />  zone = \"us-central1-f\"</p><p>version {<br />    instance_template  = google_compute_instance_template.foobar.id<br />    name               = \"primary\"<br />  }</p><p>target_pools       = [google_compute_target_pool.foobar.id]<br />  base_instance_name = \"foobar\"<br />}</p><p>data \"google_compute_image\" \"debian_9\" {<br />  family  = \"debian-11\"<br />  project = \"debian-cloud\"<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> -<br />  (Required)<br />  Name of the resource. The name must be 1-63 characters long and match<br />  the regular expression <code>[a-z]([-a-z0-9]*[a-z0-9])?</code> which means the<br />  first character must be a lowercase letter, and all following<br />  characters must be a dash, lowercase letter, or digit, except the last<br />  character, which cannot be a dash.</p></li><li><p><code>autoscaling_policy</code> -<br />  (Required)<br />  The configuration parameters for the autoscaling algorithm. You can<br />  define one or more of the policies for an autoscaler: cpuUtilization,<br />  customMetricUtilizations, and loadBalancingUtilization.<br />  If none of these are specified, the default will be to autoscale based<br />  on cpuUtilization to 0.6 or 60%.<br />  Structure is <a href=\"#nested_autoscaling_policy\">documented below</a>.</p></li><li><p><code>target</code> -<br />  (Required)<br />  URL of the managed instance group that this autoscaler will scale.</p></li></ul><p><a name=\"nested_autoscaling_policy\"></a>The <code>autoscaling_policy</code> block supports:</p><ul><li><p><code>min_replicas</code> -<br />  (Required)<br />  The minimum number of replicas that the autoscaler can scale down<br />  to. This cannot be less than 0. If not provided, autoscaler will<br />  choose a default value depending on maximum number of instances<br />  allowed.</p></li><li><p><code>max_replicas</code> -<br />  (Required)<br />  The maximum number of instances that the autoscaler can scale up<br />  to. This is required when creating or updating an autoscaler. The<br />  maximum number of replicas should not be lower than minimal number<br />  of replicas.</p></li><li><p><code>cooldown_period</code> -<br />  (Optional)<br />  The number of seconds that the autoscaler should wait before it<br />  starts collecting information from a new instance. This prevents<br />  the autoscaler from collecting information when the instance is<br />  initializing, during which the collected usage would not be<br />  reliable. The default time autoscaler waits is 60 seconds.<br />  Virtual machine initialization times might vary because of<br />  numerous factors. We recommend that you test how long an<br />  instance may take to initialize. To do this, create an instance<br />  and time the startup process.</p></li><li><p><code>mode</code> -<br />  (Optional)<br />  Defines operating mode for this policy.<br />  Default value is <code>ON</code>.<br />  Possible values are: <code>OFF</code>, <code>ONLY_UP</code>, <code>ON</code>.</p></li><li><p><code>scale_down_control</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  Defines scale down controls to reduce the risk of response latency<br />  and outages due to abrupt scale-in events<br />  Structure is <a href=\"#nested_scale_down_control\">documented below</a>.</p></li><li><p><code>scale_in_control</code> -<br />  (Optional)<br />  Defines scale in controls to reduce the risk of response latency<br />  and outages due to abrupt scale-in events<br />  Structure is <a href=\"#nested_scale_in_control\">documented below</a>.</p></li><li><p><code>cpu_utilization</code> -<br />  (Optional)<br />  Defines the CPU utilization policy that allows the autoscaler to<br />  scale based on the average CPU utilization of a managed instance<br />  group.<br />  Structure is <a href=\"#nested_cpu_utilization\">documented below</a>.</p></li><li><p><code>metric</code> -<br />  (Optional)<br />  Configuration parameters of autoscaling based on a custom metric.<br />  Structure is <a href=\"#nested_metric\">documented below</a>.</p></li><li><p><code>load_balancing_utilization</code> -<br />  (Optional)<br />  Configuration parameters of autoscaling based on a load balancer.<br />  Structure is <a href=\"#nested_load_balancing_utilization\">documented below</a>.</p></li><li><p><code>scaling_schedules</code> -<br />  (Optional)<br />  Scaling schedules defined for an autoscaler. Multiple schedules can be set on an autoscaler and they can overlap.<br />  Structure is <a href=\"#nested_scaling_schedules\">documented below</a>.</p></li></ul><p><a name=\"nested_scale_down_control\"></a>The <code>scale_down_control</code> block supports:</p><ul><li><p><code>max_scaled_down_replicas</code> -<br />  (Optional)<br />  A nested object resource<br />  Structure is <a href=\"#nested_max_scaled_down_replicas\">documented below</a>.</p></li><li><p><code>time_window_sec</code> -<br />  (Optional)<br />  How long back autoscaling should look when computing recommendations<br />  to include directives regarding slower scale down, as described above.</p></li></ul><p><a name=\"nested_max_scaled_down_replicas\"></a>The <code>max_scaled_down_replicas</code> block supports:</p><ul><li><p><code>fixed</code> -<br />  (Optional)<br />  Specifies a fixed number of VM instances. This must be a positive<br />  integer.</p></li><li><p><code>percent</code> -<br />  (Optional)<br />  Specifies a percentage of instances between 0 to 100%, inclusive.<br />  For example, specify 80 for 80%.</p></li></ul><p><a name=\"nested_scale_in_control\"></a>The <code>scale_in_control</code> block supports:</p><ul><li><p><code>max_scaled_in_replicas</code> -<br />  (Optional)<br />  A nested object resource<br />  Structure is <a href=\"#nested_max_scaled_in_replicas\">documented below</a>.</p></li><li><p><code>time_window_sec</code> -<br />  (Optional)<br />  How long back autoscaling should look when computing recommendations<br />  to include directives regarding slower scale down, as described above.</p></li></ul><p><a name=\"nested_max_scaled_in_replicas\"></a>The <code>max_scaled_in_replicas</code> block supports:</p><ul><li><p><code>fixed</code> -<br />  (Optional)<br />  Specifies a fixed number of VM instances. This must be a positive<br />  integer.</p></li><li><p><code>percent</code> -<br />  (Optional)<br />  Specifies a percentage of instances between 0 to 100%, inclusive.<br />  For example, specify 80 for 80%.</p></li></ul><p><a name=\"nested_cpu_utilization\"></a>The <code>cpu_utilization</code> block supports:</p><ul><li><p><code>target</code> -<br />  (Required)<br />  The target CPU utilization that the autoscaler should maintain.<br />  Must be a float value in the range (0, 1]. If not specified, the<br />  default is 0.6.<br />  If the CPU level is below the target utilization, the autoscaler<br />  scales down the number of instances until it reaches the minimum<br />  number of instances you specified or until the average CPU of<br />  your instances reaches the target utilization.<br />  If the average CPU is above the target utilization, the autoscaler<br />  scales up until it reaches the maximum number of instances you<br />  specified or until the average utilization reaches the target<br />  utilization.</p></li><li><p><code>predictive_method</code> -<br />  (Optional)<br />  Indicates whether predictive autoscaling based on CPU metric is enabled. Valid values are:</p></li><li>NONE (default). No predictive method is used. The autoscaler scales the group to meet current demand based on real-time metrics.</li><li>OPTIMIZE_AVAILABILITY. Predictive autoscaling improves availability by monitoring daily and weekly load patterns and scaling out ahead of anticipated demand.</li></ul><p><a name=\"nested_metric\"></a>The <code>metric</code> block supports:</p><ul><li><p><code>name</code> -<br />  (Required)<br />  The identifier (type) of the Stackdriver Monitoring metric.<br />  The metric cannot have negative values.<br />  The metric must have a value type of INT64 or DOUBLE.</p></li><li><p><code>single_instance_assignment</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  If scaling is based on a per-group metric value that represents the<br />  total amount of work to be done or resource usage, set this value to<br />  an amount assigned for a single instance of the scaled group.<br />  The autoscaler will keep the number of instances proportional to the<br />  value of this metric, the metric itself should not change value due<br />  to group resizing.<br />  For example, a good metric to use with the target is<br /><code>pubsub.googleapis.com/subscription/num_undelivered_messages</code><br />  or a custom metric exporting the total number of requests coming to<br />  your instances.<br />  A bad example would be a metric exporting an average or median<br />  latency, since this value can't include a chunk assignable to a<br />  single instance, it could be better used with utilization_target<br />  instead.</p></li><li><p><code>target</code> -<br />  (Optional)<br />  The target value of the metric that autoscaler should<br />  maintain. This must be a positive value. A utilization<br />  metric scales number of virtual machines handling requests<br />  to increase or decrease proportionally to the metric.<br />  For example, a good metric to use as a utilizationTarget is<br />  www.googleapis.com/compute/instance/network/received_bytes_count.<br />  The autoscaler will work to keep this value constant for each<br />  of the instances.</p></li><li><p><code>type</code> -<br />  (Optional)<br />  Defines how target utilization value is expressed for a<br />  Stackdriver Monitoring metric.<br />  Possible values are: <code>GAUGE</code>, <code>DELTA_PER_SECOND</code>, <code>DELTA_PER_MINUTE</code>.</p></li><li><p><code>filter</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  A filter string to be used as the filter string for<br />  a Stackdriver Monitoring TimeSeries.list API call.<br />  This filter is used to select a specific TimeSeries for<br />  the purpose of autoscaling and to determine whether the metric<br />  is exporting per-instance or per-group data.<br />  You can only use the AND operator for joining selectors.<br />  You can only use direct equality comparison operator (=) without<br />  any functions for each selector.<br />  You can specify the metric in both the filter string and in the<br />  metric field. However, if specified in both places, the metric must<br />  be identical.<br />  The monitored resource type determines what kind of values are<br />  expected for the metric. If it is a gce_instance, the autoscaler<br />  expects the metric to include a separate TimeSeries for each<br />  instance in a group. In such a case, you cannot filter on resource<br />  labels.<br />  If the resource type is any other value, the autoscaler expects<br />  this metric to contain values that apply to the entire autoscaled<br />  instance group and resource label filtering can be performed to<br />  point autoscaler at the correct TimeSeries to scale upon.<br />  This is called a per-group metric for the purpose of autoscaling.<br />  If not specified, the type defaults to gce_instance.<br />  You should provide a filter that is selective enough to pick just<br />  one TimeSeries for the autoscaled group or for each of the instances<br />  (if you are using gce_instance resource type). If multiple<br />  TimeSeries are returned upon the query execution, the autoscaler<br />  will sum their respective values to obtain its scaling value.</p></li></ul><p><a name=\"nested_load_balancing_utilization\"></a>The <code>load_balancing_utilization</code> block supports:</p><ul><li><code>target</code> -<br />  (Required)<br />  Fraction of backend capacity utilization (set in HTTP(s) load<br />  balancing configuration) that autoscaler should maintain. Must<br />  be a positive float value. If not defined, the default is 0.8.</li></ul><p><a name=\"nested_scaling_schedules\"></a>The <code>scaling_schedules</code> block supports:</p><ul><li><p><code>name</code> - (Required) The identifier for this object. Format specified above.</p></li><li><p><code>min_required_replicas</code> -<br />  (Required)<br />  Minimum number of VM instances that autoscaler will recommend in time intervals starting according to schedule.</p></li><li><p><code>schedule</code> -<br />  (Required)<br />  The start timestamps of time intervals when this scaling schedule should provide a scaling signal. This field uses the extended cron format (with an optional year field).</p></li><li><p><code>time_zone</code> -<br />  (Optional)<br />  The time zone to be used when interpreting the schedule. The value of this field must be a time zone name from the tz database: http://en.wikipedia.org/wiki/Tz_database.</p></li><li><p><code>duration_sec</code> -<br />  (Required)<br />  The duration of time intervals (in seconds) for which this scaling schedule will be running. The minimum allowed value is 300.</p></li><li><p><code>disabled</code> -<br />  (Optional)<br />  A boolean value that specifies if a scaling schedule can influence autoscaler recommendations. If set to true, then a scaling schedule has no effect.</p></li><li><p><code>description</code> -<br />  (Optional)<br />  A description of a scaling schedule.</p></li></ul><hr /><ul><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this resource.</p></li><li><p><code>zone</code> -<br />  (Optional)<br />  URL of the zone where the instance group resides.</p></li><li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.<br />    If it is not provided, the provider project is used.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are exported:</p><ul><li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/zones/{{zone}}/autoscalers/{{name}}</code></p></li><li><p><code>creation_timestamp</code> -<br />  Creation timestamp in RFC3339 text format.</p></li><li><code>self_link</code> - The URI of the created resource.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a> configuration options:</p><ul><li><code>create</code> - Default is 20 minutes.</li><li><code>update</code> - Default is 20 minutes.</li><li><code>delete</code> - Default is 20 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Autoscaler can be imported using any of these accepted formats:</p><p>$ terraform import google_compute_autoscaler.default projects/{{project}}/zones/{{zone}}/autoscalers/{{name}}<br />$ terraform import google_compute_autoscaler.default {{project}}/{{zone}}/{{name}}<br />$ terraform import google_compute_autoscaler.default {{zone}}/{{name}}<br />$ terraform import google_compute_autoscaler.default {{name}}</p>", "user-project-overrides": "<h2 id=\"user-project-overrides\">User Project Overrides</h2><p>This resource supports <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override\">User Project Overrides</a>.</p>", "description": "<h1 id=\"google_compute_autoscaler\">google_compute_autoscaler</h1><p>Represents an Autoscaler resource.</p><p>Autoscalers allow you to automatically scale virtual machine instances in<br />managed instance groups according to an autoscaling policy that you<br />define.</p><p>To get more information about Autoscaler, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/v1/autoscalers\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/compute/docs/autoscaler/\">Autoscaling Groups of Instances</a></li></ul></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=autoscaler_single_instance&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>"}