{"": "<h1 id=\"-_2\">----------------------------------------------------------------------------</h1><p>subcategory: \"Compute Engine\"<br />description: |-<br />  A regional NEG that can support Serverless Products.</p><hr />", "auto-generated-code-type-mmv1": "<h1 id=\"auto-generated-code-type-mmv1\"><strong><em>     AUTO GENERATED CODE    </em></strong>    Type: MMv1     ***</h1>", "this-file-is-automatically-generated-by-magic-modules-and-manual": "<h1 id=\"this-file-is-automatically-generated-by-magic-modules-and-manual\">This file is automatically generated by Magic Modules and manual</h1>", "changes-will-be-clobbered-when-the-file-is-regenerated": "<h1 id=\"changes-will-be-clobbered-when-the-file-is-regenerated\">changes will be clobbered when the file is regenerated.</h1>", "please-read-more-about-how-to-change-this-file-in": "<h1 id=\"please-read-more-about-how-to-change-this-file-in\">Please read more about how to change this file in</h1>", "github-contributing-md": "<h1 id=\"githubcontributingmd\">.github/CONTRIBUTING.md.</h1>", "google-compute-region-network-endpoint-group": "<h1 id=\"google_compute_region_network_endpoint_group\">google_compute_region_network_endpoint_group</h1><p>A regional NEG that can support Serverless Products.</p><p>Recreating a region network endpoint group that's in use by another resource will give a<br /><code>resourceInUseByAnotherResource</code> error. Use <code>lifecycle.create_before_destroy</code><br />to avoid this type of error.</p><p>To get more information about RegionNetworkEndpointGroup, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/beta/regionNetworkEndpointGroups\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/load-balancing/docs/negs/serverless-neg-concepts\">Official Documentation</a></li></ul></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_network_endpoint_group_functions&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-network-endpoint-group-functions": "<h2 id=\"example-usage-region-network-endpoint-group-functions\">Example Usage - Region Network Endpoint Group Functions</h2><p>// Cloud Functions Example<br />resource \"google_compute_region_network_endpoint_group\" \"function_neg\" {<br />  name                  = \"function-neg\"<br />  network_endpoint_type = \"SERVERLESS\"<br />  region                = \"us-central1\"<br />  cloud_function {<br />    function = google_cloudfunctions_function.function_neg.name<br />  }<br />}</p><p>resource \"google_cloudfunctions_function\" \"function_neg\" {<br />  name        = \"function-neg\"<br />  description = \"My function\"<br />  runtime     = \"nodejs10\"</p><p>available_memory_mb   = 128<br />  source_archive_bucket = google_storage_bucket.bucket.name<br />  source_archive_object = google_storage_bucket_object.archive.name<br />  trigger_http          = true<br />  timeout               = 60<br />  entry_point           = \"helloGET\"<br />}</p><p>resource \"google_storage_bucket\" \"bucket\" {<br />  name     = \"cloudfunctions-function-example-bucket\"<br />  location = \"US\"<br />}</p><p>resource \"google_storage_bucket_object\" \"archive\" { <br />  name   = \"index.zip\"<br />  bucket = google_storage_bucket.bucket.name<br />  source = \"path/to/index.zip\"<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_network_endpoint_group_cloudrun&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-network-endpoint-group-cloudrun": "<h2 id=\"example-usage-region-network-endpoint-group-cloudrun\">Example Usage - Region Network Endpoint Group Cloudrun</h2><p>// Cloud Run Example<br />resource \"google_compute_region_network_endpoint_group\" \"cloudrun_neg\" {<br />  name                  = \"cloudrun-neg\"<br />  network_endpoint_type = \"SERVERLESS\"<br />  region                = \"us-central1\"<br />  cloud_run {<br />    service = google_cloud_run_service.cloudrun_neg.name<br />  }<br />}</p><p>resource \"google_cloud_run_service\" \"cloudrun_neg\" {<br />  name     = \"cloudrun-neg\"<br />  location = \"us-central1\"</p><p>template {<br />    spec {<br />      containers {<br />        image = \"us-docker.pkg.dev/cloudrun/container/hello\"<br />      }<br />    }<br />  }</p><p>traffic {<br />    percent         = 100<br />    latest_revision = true<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_network_endpoint_group_appengine&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-network-endpoint-group-appengine": "<h2 id=\"example-usage-region-network-endpoint-group-appengine\">Example Usage - Region Network Endpoint Group Appengine</h2><p>// App Engine Example<br />resource \"google_compute_region_network_endpoint_group\" \"appengine_neg\" {<br />  name                  = \"appengine-neg\"<br />  network_endpoint_type = \"SERVERLESS\"<br />  region                = \"us-central1\"<br />  app_engine {<br />    service = google_app_engine_flexible_app_version.appengine_neg.service<br />    version = google_app_engine_flexible_app_version.appengine_neg.version_id<br />  }<br />}</p><p>resource \"google_app_engine_flexible_app_version\" \"appengine_neg\" {<br />  version_id = \"v1\"<br />  service    = \"appengine-network-endpoint-group\"<br />  runtime    = \"nodejs\"</p><p>entrypoint {<br />    shell = \"node ./app.js\"<br />  }</p><p>deployment {<br />    zip {<br />      source_url = \"https://storage.googleapis.com/${google_storage_bucket.appengine_neg.name}/${google_storage_bucket_object.appengine_neg.name}\"<br />    }<br />  }</p><p>liveness_check {<br />    path = \"/\"<br />  }</p><p>readiness_check {<br />    path = \"/\"<br />  }</p><p>env_variables = {<br />    port = \"8080\"<br />  }</p><p>handlers {<br />    url_regex        = \".<em>\\/my-path\\/</em>\"<br />    security_level   = \"SECURE_ALWAYS\"<br />    login            = \"LOGIN_REQUIRED\"<br />    auth_fail_action = \"AUTH_FAIL_ACTION_REDIRECT\"</p><pre><code>static_files {  path = \"my-other-path\"  upload_path_regex = \".*\\\\/my-path\\\\/*\"}</code></pre><p>}</p><p>automatic_scaling {<br />    cool_down_period = \"120s\"<br />    cpu_utilization {<br />      target_utilization = 0.5<br />    }<br />  }</p><p>delete_service_on_destroy = true<br />}</p><p>resource \"google_storage_bucket\" \"appengine_neg\" {<br />  name     = \"appengine-neg\"<br />  location = \"US\"<br />}</p><p>resource \"google_storage_bucket_object\" \"appengine_neg\" {<br />  name   = \"hello-world.zip\"<br />  bucket = google_storage_bucket.appengine_neg.name<br />  source = \"./test-fixtures/hello-world.zip\"<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_network_endpoint_group_psc&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-network-endpoint-group-psc": "<h2 id=\"example-usage-region-network-endpoint-group-psc\">Example Usage - Region Network Endpoint Group Psc</h2><p>resource \"google_compute_region_network_endpoint_group\" \"psc_neg\" {<br />  name                  = \"psc-neg\"<br />  region                = \"asia-northeast3\"</p><p>network_endpoint_type = \"PRIVATE_SERVICE_CONNECT\"<br />  psc_target_service    = \"asia-northeast3-cloudkms.googleapis.com\"<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_network_endpoint_group_psc_service_attachment&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-network-endpoint-group-psc-service-attachment": "<h2 id=\"example-usage-region-network-endpoint-group-psc-service-attachment\">Example Usage - Region Network Endpoint Group Psc Service Attachment</h2><p>resource \"google_compute_network\" \"default\" {<br />  name = \"psc-network\"<br />}</p><p>resource \"google_compute_subnetwork\" \"default\" {<br />  name          = \"psc-subnetwork\"<br />  ip_cidr_range = \"10.0.0.0/16\"<br />  region        = \"europe-west4\"<br />  network       = google_compute_network.default.id<br />}</p><p>resource \"google_compute_subnetwork\" \"psc_subnetwork\" {<br />  name          = \"psc-subnetwork-nat\"<br />  ip_cidr_range = \"10.1.0.0/16\"<br />  region        = \"europe-west4\"<br />  purpose       = \"PRIVATE_SERVICE_CONNECT\"<br />  network       = google_compute_network.default.id<br />}</p><p>resource \"google_compute_health_check\" \"default\" {<br />  name = \"psc-healthcheck\"</p><p>check_interval_sec = 1<br />  timeout_sec        = 1<br />  tcp_health_check {<br />    port = \"80\"<br />  }<br />}<br />resource \"google_compute_region_backend_service\" \"default\" {<br />  name   = \"psc-backend\"<br />  region = \"europe-west4\"</p><p>health_checks = [google_compute_health_check.default.id]<br />}</p><p>resource \"google_compute_forwarding_rule\" \"default\" {<br />  name   = \"psc-forwarding-rule\"<br />  region = \"europe-west4\"</p><p>load_balancing_scheme = \"INTERNAL\"<br />  backend_service       = google_compute_region_backend_service.default.id<br />  all_ports             = true<br />  network               = google_compute_network.default.name<br />  subnetwork            = google_compute_subnetwork.default.name<br />}</p><p>resource \"google_compute_service_attachment\" \"default\" {<br />  name        = \"psc-service-attachment\"<br />  region      = \"europe-west4\"<br />  description = \"A service attachment configured with Terraform\"</p><p>enable_proxy_protocol = false<br />  connection_preference = \"ACCEPT_AUTOMATIC\"<br />  nat_subnets           = [google_compute_subnetwork.psc_subnetwork.self_link]<br />  target_service        = google_compute_forwarding_rule.default.self_link<br />}</p><p>resource \"google_compute_region_network_endpoint_group\" \"psc_neg_service_attachment\" {<br />  name                  = \"psc-neg\"<br />  region                = \"europe-west4\"</p><p>network_endpoint_type = \"PRIVATE_SERVICE_CONNECT\"<br />  psc_target_service    = google_compute_service_attachment.default.self_link</p><p>network               = google_compute_network.default.self_link<br />  subnetwork            = google_compute_subnetwork.default.self_link<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> -<br />  (Required)<br />  Name of the resource; provided by the client when the resource is<br />  created. The name must be 1-63 characters long, and comply with<br />  RFC1035. Specifically, the name must be 1-63 characters long and match<br />  the regular expression <code>[a-z]([-a-z0-9]*[a-z0-9])?</code> which means the<br />  first character must be a lowercase letter, and all following<br />  characters must be a dash, lowercase letter, or digit, except the last<br />  character, which cannot be a dash.</p></li><li><p><code>region</code> -<br />  (Required)<br />  A reference to the region where the Serverless NEGs Reside.</p></li></ul><hr /><ul><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this resource. Provide this property when<br />  you create the resource.</p></li><li><p><code>network_endpoint_type</code> -<br />  (Optional)<br />  Type of network endpoints in this network endpoint group. Defaults to SERVERLESS<br />  Default value is <code>SERVERLESS</code>.<br />  Possible values are: <code>SERVERLESS</code>, <code>PRIVATE_SERVICE_CONNECT</code>.</p></li><li><p><code>psc_target_service</code> -<br />  (Optional)<br />  The target service url used to set up private service connection to<br />  a Google API or a PSC Producer Service Attachment.</p></li><li><p><code>network</code> -<br />  (Optional)<br />  This field is only used for PSC.<br />  The URL of the network to which all network endpoints in the NEG belong. Uses<br />  \"default\" project network if unspecified.</p></li><li><p><code>subnetwork</code> -<br />  (Optional)<br />  This field is only used for PSC.<br />  Optional URL of the subnetwork to which all network endpoints in the NEG belong.</p></li><li><p><code>cloud_run</code> -<br />  (Optional)<br />  Only valid when networkEndpointType is \"SERVERLESS\".<br />  Only one of cloud_run, app_engine, cloud_function or serverless_deployment may be set.<br />  Structure is <a href=\"#nested_cloud_run\">documented below</a>.</p></li><li><p><code>app_engine</code> -<br />  (Optional)<br />  Only valid when networkEndpointType is \"SERVERLESS\".<br />  Only one of cloud_run, app_engine, cloud_function or serverless_deployment may be set.<br />  Structure is <a href=\"#nested_app_engine\">documented below</a>.</p></li><li><p><code>cloud_function</code> -<br />  (Optional)<br />  Only valid when networkEndpointType is \"SERVERLESS\".<br />  Only one of cloud_run, app_engine, cloud_function or serverless_deployment may be set.<br />  Structure is <a href=\"#nested_cloud_function\">documented below</a>.</p></li><li><p><code>serverless_deployment</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  Only valid when networkEndpointType is \"SERVERLESS\".<br />  Only one of cloudRun, appEngine, cloudFunction or serverlessDeployment may be set.<br />  Structure is <a href=\"#nested_serverless_deployment\">documented below</a>.</p></li><li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.<br />    If it is not provided, the provider project is used.</p></li></ul><p><a name=\"nested_cloud_run\"></a>The <code>cloud_run</code> block supports:</p><ul><li><p><code>service</code> -<br />  (Optional)<br />  Cloud Run service is the main resource of Cloud Run.<br />  The service must be 1-63 characters long, and comply with RFC1035.<br />  Example value: \"run-service\".</p></li><li><p><code>tag</code> -<br />  (Optional)<br />  Cloud Run tag represents the \"named-revision\" to provide<br />  additional fine-grained traffic routing information.<br />  The tag must be 1-63 characters long, and comply with RFC1035.<br />  Example value: \"revision-0010\".</p></li><li><p><code>url_mask</code> -<br />  (Optional)<br />  A template to parse service and tag fields from a request URL.<br />  URL mask allows for routing to multiple Run services without having<br />  to create multiple network endpoint groups and backend services.<br />  For example, request URLs \"foo1.domain.com/bar1\" and \"foo1.domain.com/bar2\"<br />  an be backed by the same Serverless Network Endpoint Group (NEG) with<br />  URL mask \".domain.com/\". The URL mask will parse them to { service=\"bar1\", tag=\"foo1\" }<br />  and { service=\"bar2\", tag=\"foo2\" } respectively.</p></li></ul><p><a name=\"nested_app_engine\"></a>The <code>app_engine</code> block supports:</p><ul><li><p><code>service</code> -<br />  (Optional)<br />  Optional serving service.<br />  The service name must be 1-63 characters long, and comply with RFC1035.<br />  Example value: \"default\", \"my-service\".</p></li><li><p><code>version</code> -<br />  (Optional)<br />  Optional serving version.<br />  The version must be 1-63 characters long, and comply with RFC1035.<br />  Example value: \"v1\", \"v2\".</p></li><li><p><code>url_mask</code> -<br />  (Optional)<br />  A template to parse service and version fields from a request URL.<br />  URL mask allows for routing to multiple App Engine services without<br />  having to create multiple Network Endpoint Groups and backend services.<br />  For example, the request URLs \"foo1-dot-appname.appspot.com/v1\" and<br />  \"foo1-dot-appname.appspot.com/v2\" can be backed by the same Serverless NEG with<br />  URL mask \"-dot-appname.appspot.com/\". The URL mask will parse<br />  them to { service = \"foo1\", version = \"v1\" } and { service = \"foo1\", version = \"v2\" } respectively.</p></li></ul><p><a name=\"nested_cloud_function\"></a>The <code>cloud_function</code> block supports:</p><ul><li><p><code>function</code> -<br />  (Optional)<br />  A user-defined name of the Cloud Function.<br />  The function name is case-sensitive and must be 1-63 characters long.<br />  Example value: \"func1\".</p></li><li><p><code>url_mask</code> -<br />  (Optional)<br />  A template to parse function field from a request URL. URL mask allows<br />  for routing to multiple Cloud Functions without having to create<br />  multiple Network Endpoint Groups and backend services.<br />  For example, request URLs \"mydomain.com/function1\" and \"mydomain.com/function2\"<br />  can be backed by the same Serverless NEG with URL mask \"/\". The URL mask<br />  will parse them to { function = \"function1\" } and { function = \"function2\" } respectively.</p></li></ul><p><a name=\"nested_serverless_deployment\"></a>The <code>serverless_deployment</code> block supports:</p><ul><li><p><code>platform</code> -<br />  (Required)<br />  The platform of the NEG backend target(s). Possible values:<br />  API Gateway: apigateway.googleapis.com</p></li><li><p><code>resource</code> -<br />  (Optional)<br />  The user-defined name of the workload/instance. This value must be provided explicitly or in the urlMask.<br />  The resource identified by this value is platform-specific and is as follows: API Gateway: The gateway ID, App Engine: The service name,<br />  Cloud Functions: The function name, Cloud Run: The service name</p></li><li><p><code>version</code> -<br />  (Optional)<br />  The optional resource version. The version identified by this value is platform-specific and is follows:<br />  API Gateway: Unused, App Engine: The service version, Cloud Functions: Unused, Cloud Run: The service tag</p></li><li><p><code>url_mask</code> -<br />  (Optional)<br />  A template to parse platform-specific fields from a request URL. URL mask allows for routing to multiple resources<br />  on the same serverless platform without having to create multiple Network Endpoint Groups and backend resources.<br />  The fields parsed by this template are platform-specific and are as follows: API Gateway: The gateway ID,<br />  App Engine: The service and version, Cloud Functions: The function name, Cloud Run: The service and tag</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are exported:</p><ul><li><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/regions/{{region}}/networkEndpointGroups/{{name}}</code></li><li><code>self_link</code> - The URI of the created resource.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a> configuration options:</p><ul><li><code>create</code> - Default is 20 minutes.</li><li><code>delete</code> - Default is 20 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>RegionNetworkEndpointGroup can be imported using any of these accepted formats:</p><p>$ terraform import google_compute_region_network_endpoint_group.default projects/{{project}}/regions/{{region}}/networkEndpointGroups/{{name}}<br />$ terraform import google_compute_region_network_endpoint_group.default {{project}}/{{region}}/{{name}}<br />$ terraform import google_compute_region_network_endpoint_group.default {{region}}/{{name}}<br />$ terraform import google_compute_region_network_endpoint_group.default {{name}}</p>", "user-project-overrides": "<h2 id=\"user-project-overrides\">User Project Overrides</h2><p>This resource supports <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override\">User Project Overrides</a>.</p>", "description": "<h1 id=\"google_compute_region_network_endpoint_group\">google_compute_region_network_endpoint_group</h1><p>A regional NEG that can support Serverless Products.</p><p>Recreating a region network endpoint group that's in use by another resource will give a<br /><code>resourceInUseByAnotherResource</code> error. Use <code>lifecycle.create_before_destroy</code><br />to avoid this type of error.</p><p>To get more information about RegionNetworkEndpointGroup, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/beta/regionNetworkEndpointGroups\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/load-balancing/docs/negs/serverless-neg-concepts\">Official Documentation</a></li></ul></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_network_endpoint_group_functions&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>"}