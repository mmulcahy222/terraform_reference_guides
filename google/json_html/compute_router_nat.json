{"": "<h1 id=\"-_2\">----------------------------------------------------------------------------</h1><p>subcategory: \"Compute Engine\"<br />description: |-<br />  A NAT service created in a router.</p><hr />", "auto-generated-code-type-mmv1": "<h1 id=\"auto-generated-code-type-mmv1\"><strong><em>     AUTO GENERATED CODE    </em></strong>    Type: MMv1     ***</h1>", "this-file-is-automatically-generated-by-magic-modules-and-manual": "<h1 id=\"this-file-is-automatically-generated-by-magic-modules-and-manual\">This file is automatically generated by Magic Modules and manual</h1>", "changes-will-be-clobbered-when-the-file-is-regenerated": "<h1 id=\"changes-will-be-clobbered-when-the-file-is-regenerated\">changes will be clobbered when the file is regenerated.</h1>", "please-read-more-about-how-to-change-this-file-in": "<h1 id=\"please-read-more-about-how-to-change-this-file-in\">Please read more about how to change this file in</h1>", "github-contributing-md": "<h1 id=\"githubcontributingmd\">.github/CONTRIBUTING.md.</h1>", "google-compute-router-nat": "<h1 id=\"google_compute_router_nat\">google_compute_router_nat</h1><p>A NAT service created in a router.</p><p>To get more information about RouterNat, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/v1/routers\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/router/docs/\">Google Cloud Router</a></li></ul></li></ul>", "example-usage---router-nat-basic": "<h2 id=\"example-usage-router-nat-basic\">Example Usage - Router Nat Basic</h2><p>resource \"google_compute_network\" \"net\" {<br />  name = \"my-network\"<br />}</p><p>resource \"google_compute_subnetwork\" \"subnet\" {<br />  name          = \"my-subnetwork\"<br />  network       = google_compute_network.net.id<br />  ip_cidr_range = \"10.0.0.0/16\"<br />  region        = \"us-central1\"<br />}</p><p>resource \"google_compute_router\" \"router\" {<br />  name    = \"my-router\"<br />  region  = google_compute_subnetwork.subnet.region<br />  network = google_compute_network.net.id</p><p>bgp {<br />    asn = 64514<br />  }<br />}</p><p>resource \"google_compute_router_nat\" \"nat\" {<br />  name                               = \"my-router-nat\"<br />  router                             = google_compute_router.router.name<br />  region                             = google_compute_router.router.region<br />  nat_ip_allocate_option             = \"AUTO_ONLY\"<br />  source_subnetwork_ip_ranges_to_nat = \"ALL_SUBNETWORKS_ALL_IP_RANGES\"</p><p>log_config {<br />    enable = true<br />    filter = \"ERRORS_ONLY\"<br />  }<br />}</p>", "example-usage---router-nat-manual-ips": "<h2 id=\"example-usage-router-nat-manual-ips\">Example Usage - Router Nat Manual Ips</h2><p>resource \"google_compute_network\" \"net\" {<br />  name = \"my-network\"<br />}</p><p>resource \"google_compute_subnetwork\" \"subnet\" {<br />  name          = \"my-subnetwork\"<br />  network       = google_compute_network.net.id<br />  ip_cidr_range = \"10.0.0.0/16\"<br />  region        = \"us-central1\"<br />}</p><p>resource \"google_compute_router\" \"router\" {<br />  name    = \"my-router\"<br />  region  = google_compute_subnetwork.subnet.region<br />  network = google_compute_network.net.id<br />}</p><p>resource \"google_compute_address\" \"address\" {<br />  count  = 2<br />  name   = \"nat-manual-ip-${count.index}\"<br />  region = google_compute_subnetwork.subnet.region<br />}</p><p>resource \"google_compute_router_nat\" \"nat_manual\" {<br />  name   = \"my-router-nat\"<br />  router = google_compute_router.router.name<br />  region = google_compute_router.router.region</p><p>nat_ip_allocate_option = \"MANUAL_ONLY\"<br />  nat_ips                = google_compute_address.address.*.self_link</p><p>source_subnetwork_ip_ranges_to_nat = \"LIST_OF_SUBNETWORKS\"<br />  subnetwork {<br />    name                    = google_compute_subnetwork.subnet.id<br />    source_ip_ranges_to_nat = [\"ALL_IP_RANGES\"]<br />  }<br />}</p>", "example-usage---router-nat-rules": "<h2 id=\"example-usage-router-nat-rules\">Example Usage - Router Nat Rules</h2><p>resource \"google_compute_network\" \"net\" {<br />  name                    = \"my-network\"<br />  auto_create_subnetworks = false<br />}</p><p>resource \"google_compute_subnetwork\" \"subnet\" {<br />  name          = \"my-subnetwork\"<br />  network       = google_compute_network.net.id<br />  ip_cidr_range = \"10.0.0.0/16\"<br />  region        = \"us-central1\"<br />}</p><p>resource \"google_compute_router\" \"router\" {<br />  name    = \"my-router\"<br />  region  = google_compute_subnetwork.subnet.region<br />  network = google_compute_network.net.id<br />}</p><p>resource \"google_compute_address\" \"addr1\" {<br />  name   = \"nat-address1\"<br />  region = google_compute_subnetwork.subnet.region<br />}</p><p>resource \"google_compute_address\" \"addr2\" {<br />  name   = \"nat-address2\"<br />  region = google_compute_subnetwork.subnet.region<br />}</p><p>resource \"google_compute_address\" \"addr3\" {<br />  name   = \"nat-address3\"<br />  region = google_compute_subnetwork.subnet.region<br />}</p><p>resource \"google_compute_router_nat\" \"nat_rules\" {<br />  name   = \"my-router-nat\"<br />  router = google_compute_router.router.name<br />  region = google_compute_router.router.region</p><p>nat_ip_allocate_option = \"MANUAL_ONLY\"<br />  nat_ips                = [google_compute_address.addr1.self_link]</p><p>source_subnetwork_ip_ranges_to_nat = \"LIST_OF_SUBNETWORKS\"<br />  subnetwork {<br />    name                    = google_compute_subnetwork.subnet.id<br />    source_ip_ranges_to_nat = [\"ALL_IP_RANGES\"]<br />  }</p><p>rules {<br />    rule_number = 100<br />    description = \"nat rules example\"<br />    match       = \"inIpRange(destination.ip, '1.1.0.0/16') || inIpRange(destination.ip, '2.2.0.0/16')\"<br />    action {<br />      source_nat_active_ips = [google_compute_address.addr2.self_link, google_compute_address.addr3.self_link]<br />    }<br />  }</p><p>enable_endpoint_independent_mapping = false<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> -<br />  (Required)<br />  Name of the NAT service. The name must be 1-63 characters long and<br />  comply with RFC1035.</p></li><li><p><code>nat_ip_allocate_option</code> -<br />  (Required)<br />  How external IPs should be allocated for this NAT. Valid values are<br /><code>AUTO_ONLY</code> for only allowing NAT IPs allocated by Google Cloud<br />  Platform, or <code>MANUAL_ONLY</code> for only user-allocated NAT IP addresses.<br />  Possible values are: <code>MANUAL_ONLY</code>, <code>AUTO_ONLY</code>.</p></li><li><p><code>source_subnetwork_ip_ranges_to_nat</code> -<br />  (Required)<br />  How NAT should be configured per Subnetwork.<br />  If <code>ALL_SUBNETWORKS_ALL_IP_RANGES</code>, all of the<br />  IP ranges in every Subnetwork are allowed to Nat.<br />  If <code>ALL_SUBNETWORKS_ALL_PRIMARY_IP_RANGES</code>, all of the primary IP<br />  ranges in every Subnetwork are allowed to Nat.<br /><code>LIST_OF_SUBNETWORKS</code>: A list of Subnetworks are allowed to Nat<br />  (specified in the field subnetwork below). Note that if this field<br />  contains ALL_SUBNETWORKS_ALL_IP_RANGES or<br />  ALL_SUBNETWORKS_ALL_PRIMARY_IP_RANGES, then there should not be any<br />  other RouterNat section in any Router for this network in this region.<br />  Possible values are: <code>ALL_SUBNETWORKS_ALL_IP_RANGES</code>, <code>ALL_SUBNETWORKS_ALL_PRIMARY_IP_RANGES</code>, <code>LIST_OF_SUBNETWORKS</code>.</p></li><li><p><code>router</code> -<br />  (Required)<br />  The name of the Cloud Router in which this NAT will be configured.</p></li></ul><hr /><ul><li><p><code>nat_ips</code> -<br />  (Optional)<br />  Self-links of NAT IPs. Only valid if natIpAllocateOption<br />  is set to MANUAL_ONLY.</p></li><li><p><code>drain_nat_ips</code> -<br />  (Optional)<br />  A list of URLs of the IP resources to be drained. These IPs must be<br />  valid static external IPs that have been assigned to the NAT.</p></li><li><p><code>subnetwork</code> -<br />  (Optional)<br />  One or more subnetwork NAT configurations. Only used if<br /><code>source_subnetwork_ip_ranges_to_nat</code> is set to <code>LIST_OF_SUBNETWORKS</code><br />  Structure is <a href=\"#nested_subnetwork\">documented below</a>.</p></li><li><p><code>min_ports_per_vm</code> -<br />  (Optional)<br />  Minimum number of ports allocated to a VM from this NAT.</p></li><li><p><code>max_ports_per_vm</code> -<br />  (Optional)<br />  Maximum number of ports allocated to a VM from this NAT.<br />  This field can only be set when enableDynamicPortAllocation is enabled.</p></li><li><p><code>enable_dynamic_port_allocation</code> -<br />  (Optional)<br />  Enable Dynamic Port Allocation.<br />  If minPortsPerVm is set, minPortsPerVm must be set to a power of two greater than or equal to 32.<br />  If minPortsPerVm is not set, a minimum of 32 ports will be allocated to a VM from this NAT config.<br />  If maxPortsPerVm is set, maxPortsPerVm must be set to a power of two greater than minPortsPerVm.<br />  If maxPortsPerVm is not set, a maximum of 65536 ports will be allocated to a VM from this NAT config.<br />  Mutually exclusive with enableEndpointIndependentMapping.</p></li><li><p><code>udp_idle_timeout_sec</code> -<br />  (Optional)<br />  Timeout (in seconds) for UDP connections. Defaults to 30s if not set.</p></li><li><p><code>icmp_idle_timeout_sec</code> -<br />  (Optional)<br />  Timeout (in seconds) for ICMP connections. Defaults to 30s if not set.</p></li><li><p><code>tcp_established_idle_timeout_sec</code> -<br />  (Optional)<br />  Timeout (in seconds) for TCP established connections.<br />  Defaults to 1200s if not set.</p></li><li><p><code>tcp_transitory_idle_timeout_sec</code> -<br />  (Optional)<br />  Timeout (in seconds) for TCP transitory connections.<br />  Defaults to 30s if not set.</p></li><li><p><code>tcp_time_wait_timeout_sec</code> -<br />  (Optional)<br />  Timeout (in seconds) for TCP connections that are in TIME_WAIT state.<br />  Defaults to 120s if not set.</p></li><li><p><code>log_config</code> -<br />  (Optional)<br />  Configuration for logging on NAT<br />  Structure is <a href=\"#nested_log_config\">documented below</a>.</p></li><li><p><code>rules</code> -<br />  (Optional)<br />  A list of rules associated with this NAT.<br />  Structure is <a href=\"#nested_rules\">documented below</a>.</p></li><li><p><code>enable_endpoint_independent_mapping</code> -<br />  (Optional)<br />  Specifies if endpoint independent mapping is enabled. This is enabled by default. For more information<br />  see the <a href=\"https://cloud.google.com/nat/docs/overview#specs-rfcs\">official documentation</a>.</p></li><li><p><code>region</code> -<br />  (Optional)<br />  Region where the router and NAT reside.</p></li><li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.<br />    If it is not provided, the provider project is used.</p></li></ul><p><a name=\"nested_subnetwork\"></a>The <code>subnetwork</code> block supports:</p><ul><li><p><code>name</code> -<br />  (Required)<br />  Self-link of subnetwork to NAT</p></li><li><p><code>source_ip_ranges_to_nat</code> -<br />  (Required)<br />  List of options for which source IPs in the subnetwork<br />  should have NAT enabled. Supported values include:<br /><code>ALL_IP_RANGES</code>, <code>LIST_OF_SECONDARY_IP_RANGES</code>,<br /><code>PRIMARY_IP_RANGE</code>.</p></li><li><p><code>secondary_ip_range_names</code> -<br />  (Optional)<br />  List of the secondary ranges of the subnetwork that are allowed<br />  to use NAT. This can be populated only if<br /><code>LIST_OF_SECONDARY_IP_RANGES</code> is one of the values in<br />  sourceIpRangesToNat</p></li></ul><p><a name=\"nested_log_config\"></a>The <code>log_config</code> block supports:</p><ul><li><p><code>enable</code> -<br />  (Required)<br />  Indicates whether or not to export logs.</p></li><li><p><code>filter</code> -<br />  (Required)<br />  Specifies the desired filtering of logs on this NAT.<br />  Possible values are: <code>ERRORS_ONLY</code>, <code>TRANSLATIONS_ONLY</code>, <code>ALL</code>.</p></li></ul><p><a name=\"nested_rules\"></a>The <code>rules</code> block supports:</p><ul><li><p><code>rule_number</code> -<br />  (Required)<br />  An integer uniquely identifying a rule in the list.<br />  The rule number must be a positive value between 0 and 65000, and must be unique among rules within a NAT.</p></li><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this rule.</p></li><li><p><code>match</code> -<br />  (Required)<br />  CEL expression that specifies the match condition that egress traffic from a VM is evaluated against.<br />  If it evaluates to true, the corresponding action is enforced.<br />  The following examples are valid match expressions for public NAT:<br />  \"inIpRange(destination.ip, '1.1.0.0/16') || inIpRange(destination.ip, '2.2.0.0/16')\"<br />  \"destination.ip == '1.1.0.1' || destination.ip == '8.8.8.8'\"<br />  The following example is a valid match expression for private NAT:<br />  \"nexthop.hub == 'https://networkconnectivity.googleapis.com/v1alpha1/projects/my-project/global/hub/hub-1'\"</p></li><li><p><code>action</code> -<br />  (Optional)<br />  The action to be enforced for traffic that matches this rule.<br />  Structure is <a href=\"#nested_action\">documented below</a>.</p></li></ul><p><a name=\"nested_action\"></a>The <code>action</code> block supports:</p><ul><li><p><code>source_nat_active_ips</code> -<br />  (Optional)<br />  A list of URLs of the IP resources used for this NAT rule.<br />  These IP addresses must be valid static external IP addresses assigned to the project.<br />  This field is used for public NAT.</p></li><li><p><code>source_nat_drain_ips</code> -<br />  (Optional)<br />  A list of URLs of the IP resources to be drained.<br />  These IPs must be valid static external IPs that have been assigned to the NAT.<br />  These IPs should be used for updating/patching a NAT rule only.<br />  This field is used for public NAT.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are exported:</p><ul><li><code>id</code> - an identifier for the resource with format <code>{{project}}/{{region}}/{{router}}/{{name}}</code></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a> configuration options:</p><ul><li><code>create</code> - Default is 20 minutes.</li><li><code>update</code> - Default is 20 minutes.</li><li><code>delete</code> - Default is 20 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>RouterNat can be imported using any of these accepted formats:</p><p>$ terraform import google_compute_router_nat.default projects/{{project}}/regions/{{region}}/routers/{{router}}/{{name}}<br />$ terraform import google_compute_router_nat.default {{project}}/{{region}}/{{router}}/{{name}}<br />$ terraform import google_compute_router_nat.default {{region}}/{{router}}/{{name}}<br />$ terraform import google_compute_router_nat.default {{router}}/{{name}}</p>", "user-project-overrides": "<h2 id=\"user-project-overrides\">User Project Overrides</h2><p>This resource supports <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override\">User Project Overrides</a>.</p>", "description": "<h1 id=\"google_compute_router_nat\">google_compute_router_nat</h1><p>A NAT service created in a router.</p><p>To get more information about RouterNat, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/v1/routers\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/router/docs/\">Google Cloud Router</a></li></ul></li></ul>"}