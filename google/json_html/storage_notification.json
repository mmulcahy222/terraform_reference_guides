{"google-storage-notification": "<h1 id=\"google_storage_notification\">google_storage_notification</h1><p>Creates a new notification configuration on a specified bucket, establishing a flow of event notifications from GCS to a Cloud Pub/Sub topic.<br /> For more information see<br /><a href=\"https://cloud.google.com/storage/docs/pubsub-notifications\">the official documentation</a><br />and<br /><a href=\"https://cloud.google.com/storage/docs/json_api/v1/notifications\">API</a>.</p><p>In order to enable notifications, a special Google Cloud Storage service account unique to the project<br />must exist and have the IAM permission \"projects.topics.publish\" for a Cloud Pub/Sub topic in the project.<br />This service account is not created automatically when a project is created.<br />To ensure the service account exists and obtain its email address for use in granting the correct IAM permission, use the<br /><a href=\"/docs/providers/google/d/storage_project_service_account.html\"><code>google_storage_project_service_account</code></a><br />datasource's <code>email_address</code> value, and see below for an example of enabling notifications by granting the correct IAM permission.<br />See <a href=\"https://cloud.google.com/storage/docs/gsutil/commands/notification\">the notifications documentation</a> for more details.</p><blockquote><p><strong>NOTE</strong>: This resource can affect your storage IAM policy. If you are using this in the same config as your storage IAM policy resources, consider<br />making this resource dependent on those IAM resources via <code>depends_on</code>. This will safeguard against errors due to IAM race conditions.</p></blockquote>", "example-usage": "<h2 id=\"example-usage\">Example Usage</h2><p>resource \"google_storage_notification\" \"notification\" {<br />  bucket         = google_storage_bucket.bucket.name<br />  payload_format = \"JSON_API_V1\"<br />  topic          = google_pubsub_topic.topic.id<br />  event_types    = [\"OBJECT_FINALIZE\", \"OBJECT_METADATA_UPDATE\"]<br />  custom_attributes = {<br />    new-attribute = \"new-attribute-value\"<br />  }<br />  depends_on = [google_pubsub_topic_iam_binding.binding]<br />}</p><br /><p>// Enable notifications by giving the correct IAM permission to the unique service account.</p><br /><p>data \"google_storage_project_service_account\" \"gcs_account\" {<br />}</p><br /><p>resource \"google_pubsub_topic_iam_binding\" \"binding\" {<br />  topic   = google_pubsub_topic.topic.id<br />  role    = \"roles/pubsub.publisher\"<br />  members = [\"serviceAccount:${data.google_storage_project_service_account.gcs_account.email_address}\"]<br />}</p><br /><p>// End enabling notifications</p><br /><p>resource \"google_storage_bucket\" \"bucket\" {<br />  name     = \"default_bucket\"<br />  location = \"US\"<br />}</p><br /><p>resource \"google_pubsub_topic\" \"topic\" {<br />  name = \"default_topic\"<br />}</p><br />", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>bucket</code> - (Required) The name of the bucket.</p></li><li><p><code>payload_format</code> - (Required) The desired content of the Payload. One of <code>\"JSON_API_V1\"</code> or <code>\"NONE\"</code>.</p></li><li><p><code>topic</code> - (Required) The Cloud PubSub topic to which this subscription publishes. Expects either the<br />    topic name, assumed to belong to the default GCP provider project, or the project-level name,<br />    i.e. <code>projects/my-gcp-project/topics/my-topic</code> or <code>my-topic</code>. If the project is not set in the provider,<br />    you will need to use the project-level name.</p></li></ul><hr /><ul><li><p><code>custom_attributes</code> - (Optional)  A set of key/value attribute pairs to attach to each Cloud PubSub message published for this notification subscription</p></li><li><p><code>event_types</code> - (Optional) List of event type filters for this notification config. If not specified, Cloud Storage will send notifications for all event types. The valid types are: <code>\"OBJECT_FINALIZE\"</code>, <code>\"OBJECT_METADATA_UPDATE\"</code>, <code>\"OBJECT_DELETE\"</code>, <code>\"OBJECT_ARCHIVE\"</code></p></li><li><p><code>object_name_prefix</code> - (Optional) Specifies a prefix path filter for this notification config. Cloud Storage will only send notifications for objects in this bucket whose names begin with the specified prefix.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are<br />exported:</p><ul><li><p><code>notification_id</code> - The ID of the created notification.</p></li><li><p><code>self_link</code> - The URI of the created resource.</p></li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Storage notifications can be imported using the notification <code>id</code> in the format <code>&lt;bucket_name&gt;/notificationConfigs/&lt;id&gt;</code> e.g.</p><p>$ terraform import google_storage_notification.notification default_bucket/notificationConfigs/102</p>", "description": "<h1 id=\"google_storage_notification\">google_storage_notification</h1><p>Creates a new notification configuration on a specified bucket, establishing a flow of event notifications from GCS to a Cloud Pub/Sub topic.<br /> For more information see<br /><a href=\"https://cloud.google.com/storage/docs/pubsub-notifications\">the official documentation</a><br />and<br /><a href=\"https://cloud.google.com/storage/docs/json_api/v1/notifications\">API</a>.</p><p>In order to enable notifications, a special Google Cloud Storage service account unique to the project<br />must exist and have the IAM permission \"projects.topics.publish\" for a Cloud Pub/Sub topic in the project.<br />This service account is not created automatically when a project is created.<br />To ensure the service account exists and obtain its email address for use in granting the correct IAM permission, use the<br /><a href=\"/docs/providers/google/d/storage_project_service_account.html\"><code>google_storage_project_service_account</code></a><br />datasource's <code>email_address</code> value, and see below for an example of enabling notifications by granting the correct IAM permission.<br />See <a href=\"https://cloud.google.com/storage/docs/gsutil/commands/notification\">the notifications documentation</a> for more details.</p><blockquote><p><strong>NOTE</strong>: This resource can affect your storage IAM policy. If you are using this in the same config as your storage IAM policy resources, consider<br />making this resource dependent on those IAM resources via <code>depends_on</code>. This will safeguard against errors due to IAM race conditions.</p></blockquote>"}