{"": "<h1 id=\"-_2\">----------------------------------------------------------------------------</h1><p>subcategory: \"Compute Engine\"<br />description: |-<br />  UrlMaps are used to route requests to a backend service based on rules<br />  that you define for the host and path of an incoming URL.</p><hr />", "auto-generated-code-type-mmv1": "<h1 id=\"auto-generated-code-type-mmv1\"><strong><em>     AUTO GENERATED CODE    </em></strong>    Type: MMv1     ***</h1>", "this-file-is-automatically-generated-by-magic-modules-and-manual": "<h1 id=\"this-file-is-automatically-generated-by-magic-modules-and-manual\">This file is automatically generated by Magic Modules and manual</h1>", "changes-will-be-clobbered-when-the-file-is-regenerated": "<h1 id=\"changes-will-be-clobbered-when-the-file-is-regenerated\">changes will be clobbered when the file is regenerated.</h1>", "please-read-more-about-how-to-change-this-file-in": "<h1 id=\"please-read-more-about-how-to-change-this-file-in\">Please read more about how to change this file in</h1>", "github-contributing-md": "<h1 id=\"githubcontributingmd\">.github/CONTRIBUTING.md.</h1>", "google-compute-url-map": "<h1 id=\"google_compute_url_map\">google_compute_url_map</h1><p>UrlMaps are used to route requests to a backend service based on rules<br />that you define for the host and path of an incoming URL.</p><p>To get more information about UrlMap, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/v1/urlMaps\">API documentation</a></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_bucket_and_service&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-bucket-and-service": "<h2 id=\"example-usage-url-map-bucket-and-service\">Example Usage - Url Map Bucket And Service</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"a description\"</p><p>default_service = google_compute_backend_bucket.static.id</p><p>host_rule {<br />    hosts        = [\"mysite.com\"]<br />    path_matcher = \"mysite\"<br />  }</p><p>host_rule {<br />    hosts        = [\"myothersite.com\"]<br />    path_matcher = \"otherpaths\"<br />  }</p><p>path_matcher {<br />    name            = \"mysite\"<br />    default_service = google_compute_backend_bucket.static.id</p><pre><code>path_rule {  paths   = [\"/home\"]  service = google_compute_backend_bucket.static.id}path_rule {  paths   = [\"/login\"]  service = google_compute_backend_service.login.id}path_rule {  paths   = [\"/static\"]  service = google_compute_backend_bucket.static.id}</code></pre><p>}</p><p>path_matcher {<br />    name            = \"otherpaths\"<br />    default_service = google_compute_backend_bucket.static.id<br />  }</p><p>test {<br />    service = google_compute_backend_bucket.static.id<br />    host    = \"example.com\"<br />    path    = \"/home\"<br />  }<br />}</p><p>resource \"google_compute_backend_service\" \"login\" {<br />  name        = \"login\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_http_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  request_path       = \"/\"<br />  check_interval_sec = 1<br />  timeout_sec        = 1<br />}</p><p>resource \"google_compute_backend_bucket\" \"static\" {<br />  name        = \"static-asset-backend-bucket\"<br />  bucket_name = google_storage_bucket.static.name<br />  enable_cdn  = true<br />}</p><p>resource \"google_storage_bucket\" \"static\" {<br />  name     = \"static-asset-bucket\"<br />  location = \"US\"<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_traffic_director_route&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-traffic-director-route": "<h2 id=\"example-usage-url-map-traffic-director-route\">Example Usage - Url Map Traffic Director Route</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"a description\"<br />  default_service = google_compute_backend_service.home.id</p><p>host_rule {<br />    hosts        = [\"mysite.com\"]<br />    path_matcher = \"allpaths\"<br />  }</p><p>path_matcher {<br />    name = \"allpaths\"<br />    default_service = google_compute_backend_service.home.id</p><pre><code>route_rules {  priority = 1  header_action {    request_headers_to_remove = [\"RemoveMe2\"]    request_headers_to_add {      header_name = \"AddSomethingElse\"      header_value = \"MyOtherValue\"      replace = true    }    response_headers_to_remove = [\"RemoveMe3\"]    response_headers_to_add {      header_name = \"AddMe\"      header_value = \"MyValue\"      replace = false    }  }  match_rules {    full_path_match = \"a full path\"    header_matches {      header_name = \"someheader\"      exact_match = \"match this exactly\"      invert_match = true    }    ignore_case = true    metadata_filters {      filter_match_criteria = \"MATCH_ANY\"      filter_labels {        name = \"PLANET\"        value = \"MARS\"      }    }    query_parameter_matches {      name = \"a query parameter\"      present_match = true    }  }  url_redirect {    host_redirect = \"A host\"    https_redirect = false    path_redirect = \"some/path\"    redirect_response_code = \"TEMPORARY_REDIRECT\"    strip_query = true  }}</code></pre><p>}</p><p>test {<br />    service = google_compute_backend_service.home.id<br />    host    = \"hi.com\"<br />    path    = \"/home\"<br />  }<br />}</p><p>resource \"google_compute_backend_service\" \"home\" {<br />  name        = \"home\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_health_check.default.id]<br />  load_balancing_scheme = \"INTERNAL_SELF_MANAGED\"<br />}</p><p>resource \"google_compute_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_traffic_director_route_partial&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-traffic-director-route-partial": "<h2 id=\"example-usage-url-map-traffic-director-route-partial\">Example Usage - Url Map Traffic Director Route Partial</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"a description\"<br />  default_service = google_compute_backend_service.home.id</p><p>host_rule {<br />    hosts        = [\"mysite.com\"]<br />    path_matcher = \"allpaths\"<br />  }</p><p>path_matcher {<br />    name = \"allpaths\"<br />    default_service = google_compute_backend_service.home.id</p><pre><code>route_rules {  priority = 1  match_rules {    prefix_match = \"/someprefix\"    header_matches {      header_name = \"someheader\"      exact_match = \"match this exactly\"      invert_match = true    }  }  url_redirect {    path_redirect = \"some/path\"    redirect_response_code = \"TEMPORARY_REDIRECT\"  }}</code></pre><p>}</p><p>test {<br />    service = google_compute_backend_service.home.id<br />    host    = \"hi.com\"<br />    path    = \"/home\"<br />  }<br />}</p><p>resource \"google_compute_backend_service\" \"home\" {<br />  name        = \"home\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_health_check.default.id]<br />  load_balancing_scheme = \"INTERNAL_SELF_MANAGED\"<br />}</p><p>resource \"google_compute_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_traffic_director_path&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-traffic-director-path": "<h2 id=\"example-usage-url-map-traffic-director-path\">Example Usage - Url Map Traffic Director Path</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"a description\"<br />  default_service = google_compute_backend_service.home.id</p><p>host_rule {<br />    hosts        = [\"mysite.com\"]<br />    path_matcher = \"allpaths\"<br />  }</p><p>path_matcher {<br />    name = \"allpaths\"<br />    default_service = google_compute_backend_service.home.id</p><pre><code>path_rule {  paths   = [\"/home\"]  route_action {    cors_policy {      allow_credentials = true      allow_headers = [\"Allowed content\"]      allow_methods = [\"GET\"]      allow_origin_regexes = [\"abc.*\"]      allow_origins = [\"Allowed origin\"]      expose_headers = [\"Exposed header\"]      max_age = 30      disabled = false    }    fault_injection_policy {      abort {        http_status = 234        percentage = 5.6      }      delay {        fixed_delay {          seconds = 0          nanos = 50000        }        percentage = 7.8      }    }    request_mirror_policy {      backend_service = google_compute_backend_service.home.id    }    retry_policy {      num_retries = 4      per_try_timeout {        seconds = 30      }      retry_conditions = [\"5xx\", \"deadline-exceeded\"]    }    timeout {      seconds = 20      nanos = 750000000    }    url_rewrite {      host_rewrite = \"dev.example.com\"      path_prefix_rewrite = \"/v1/api/\"    }    weighted_backend_services {      backend_service = google_compute_backend_service.home.id      weight = 400      header_action {        request_headers_to_remove = [\"RemoveMe\"]        request_headers_to_add {          header_name = \"AddMe\"          header_value = \"MyValue\"          replace = true        }        response_headers_to_remove = [\"RemoveMe\"]        response_headers_to_add {          header_name = \"AddMe\"          header_value = \"MyValue\"          replace = false        }      }    }  }}</code></pre><p>}</p><p>test {<br />    service = google_compute_backend_service.home.id<br />    host    = \"hi.com\"<br />    path    = \"/home\"<br />  }<br />}</p><p>resource \"google_compute_backend_service\" \"home\" {<br />  name        = \"home\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_health_check.default.id]<br />  load_balancing_scheme = \"INTERNAL_SELF_MANAGED\"<br />}</p><p>resource \"google_compute_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_traffic_director_path_partial&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-traffic-director-path-partial": "<h2 id=\"example-usage-url-map-traffic-director-path-partial\">Example Usage - Url Map Traffic Director Path Partial</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"a description\"<br />  default_service = google_compute_backend_service.home.id</p><p>host_rule {<br />    hosts        = [\"mysite.com\"]<br />    path_matcher = \"allpaths\"<br />  }</p><p>path_matcher {<br />    name = \"allpaths\"<br />    default_service = google_compute_backend_service.home.id</p><pre><code>path_rule {  paths   = [\"/home\"]  route_action {    cors_policy {      allow_credentials = true      allow_headers = [\"Allowed content\"]      allow_methods = [\"GET\"]      allow_origin_regexes = [\"abc.*\"]      allow_origins = [\"Allowed origin\"]      expose_headers = [\"Exposed header\"]      max_age = 30      disabled = false    }    weighted_backend_services {      backend_service = google_compute_backend_service.home.id      weight = 400      header_action {        request_headers_to_remove = [\"RemoveMe\"]        request_headers_to_add {          header_name = \"AddMe\"          header_value = \"MyValue\"          replace = true        }        response_headers_to_remove = [\"RemoveMe\"]        response_headers_to_add {          header_name = \"AddMe\"          header_value = \"MyValue\"          replace = false        }      }    }  }}</code></pre><p>}</p><p>test {<br />    service = google_compute_backend_service.home.id<br />    host    = \"hi.com\"<br />    path    = \"/home\"<br />  }<br />}</p><p>resource \"google_compute_backend_service\" \"home\" {<br />  name        = \"home\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_health_check.default.id]<br />  load_balancing_scheme = \"INTERNAL_SELF_MANAGED\"<br />}</p><p>resource \"google_compute_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_header_based_routing&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-header-based-routing": "<h2 id=\"example-usage-url-map-header-based-routing\">Example Usage - Url Map Header Based Routing</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"header-based routing example\"<br />  default_service = google_compute_backend_service.default.id</p><p>host_rule {<br />    hosts = [\"*\"]<br />    path_matcher = \"allpaths\"<br />  }</p><p>path_matcher {<br />    name = \"allpaths\"<br />    default_service = google_compute_backend_service.default.id</p><pre><code>route_rules {  priority = 1  service = google_compute_backend_service.service-a.id  match_rules {    prefix_match = \"/\"    ignore_case = true    header_matches {      header_name = \"abtest\"      exact_match = \"a\"    }  }}route_rules {  priority = 2  service = google_compute_backend_service.service-b.id  match_rules {    ignore_case = true    prefix_match = \"/\"    header_matches {      header_name = \"abtest\"      exact_match = \"b\"    }  }}</code></pre><p>}<br />}</p><p>resource \"google_compute_backend_service\" \"default\" {<br />  name        = \"default\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_backend_service\" \"service-a\" {<br />  name        = \"service-a\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_backend_service\" \"service-b\" {<br />  name        = \"service-b\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_http_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  request_path       = \"/\"<br />  check_interval_sec = 1<br />  timeout_sec        = 1<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_parameter_based_routing&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-parameter-based-routing": "<h2 id=\"example-usage-url-map-parameter-based-routing\">Example Usage - Url Map Parameter Based Routing</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"parameter-based routing example\"<br />  default_service = google_compute_backend_service.default.id</p><p>host_rule {<br />    hosts = [\"*\"]<br />    path_matcher = \"allpaths\"<br />  }</p><p>path_matcher {<br />    name = \"allpaths\"<br />    default_service = google_compute_backend_service.default.id</p><pre><code>route_rules {  priority = 1  service = google_compute_backend_service.service-a.id  match_rules {    prefix_match = \"/\"    ignore_case = true    query_parameter_matches {      name = \"abtest\"      exact_match = \"a\"    }  }}route_rules {  priority = 2  service = google_compute_backend_service.service-b.id  match_rules {    ignore_case = true    prefix_match = \"/\"    query_parameter_matches {      name = \"abtest\"      exact_match = \"b\"    }  }}</code></pre><p>}<br />}</p><p>resource \"google_compute_backend_service\" \"default\" {<br />  name        = \"default\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_backend_service\" \"service-a\" {<br />  name        = \"service-a\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_backend_service\" \"service-b\" {<br />  name        = \"service-b\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_http_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  request_path       = \"/\"<br />  check_interval_sec = 1<br />  timeout_sec        = 1<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_path_template_match&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---url-map-path-template-match": "<h2 id=\"example-usage-url-map-path-template-match\">Example Usage - Url Map Path Template Match</h2><p>resource \"google_compute_url_map\" \"urlmap\" {<br />  name        = \"urlmap\"<br />  description = \"a description\"</p><p>default_service = google_compute_backend_bucket.static.id</p><p>host_rule {<br />    hosts        = [\"mysite.com\"]<br />    path_matcher = \"mysite\"<br />  }</p><p>path_matcher {<br />    name            = \"mysite\"<br />    default_service = google_compute_backend_bucket.static.id</p><pre><code>route_rules {  match_rules {    path_template_match = \"/xyzwebservices/v2/xyz/users/{username=*}/carts/{cartid=**}\"  }  service = google_compute_backend_service.cart-backend.id  priority = 1  route_action {    url_rewrite {      path_template_rewrite = \"/{username}-{cartid}/\"    }  }}route_rules {  match_rules {    path_template_match = \"/xyzwebservices/v2/xyz/users/*/accountinfo/*\"  }  service = google_compute_backend_service.user-backend.id  priority = 2}</code></pre><p>}<br />}</p><p>resource \"google_compute_backend_service\" \"cart-backend\" {<br />  name        = \"cart-service\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10<br />  load_balancing_scheme = \"EXTERNAL_MANAGED\"</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_backend_service\" \"user-backend\" {<br />  name        = \"user-service\"<br />  port_name   = \"http\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10<br />  load_balancing_scheme = \"EXTERNAL_MANAGED\"</p><p>health_checks = [google_compute_http_health_check.default.id]<br />}</p><p>resource \"google_compute_http_health_check\" \"default\" {<br />  name               = \"health-check\"<br />  request_path       = \"/\"<br />  check_interval_sec = 1<br />  timeout_sec        = 1<br />}</p><p>resource \"google_compute_backend_bucket\" \"static\" {<br />  name        = \"static-asset-backend-bucket\"<br />  bucket_name = google_storage_bucket.static.name<br />  enable_cdn  = true<br />}</p><p>resource \"google_storage_bucket\" \"static\" {<br />  name     = \"static-asset-bucket\"<br />  location = \"US\"<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><code>name</code> -<br />  (Required)<br />  Name of the resource. Provided by the client when the resource is created. The<br />  name must be 1-63 characters long, and comply with RFC1035. Specifically, the<br />  name must be 1-63 characters long and match the regular expression<br /><code>[a-z]([-a-z0-9]*[a-z0-9])?</code> which means the first character must be a lowercase<br />  letter, and all following characters must be a dash, lowercase letter, or digit,<br />  except the last character, which cannot be a dash.</li></ul><hr /><ul><li><p><code>default_service</code> -<br />  (Optional)<br />  The backend service or backend bucket to use when none of the given rules match.</p></li><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this resource. Provide this property when you create<br />  the resource.</p></li><li><p><code>header_action</code> -<br />  (Optional)<br />  Specifies changes to request and response headers that need to take effect for<br />  the selected backendService. The headerAction specified here take effect after<br />  headerAction specified under pathMatcher.<br />  Structure is <a href=\"#nested_header_action\">documented below</a>.</p></li><li><p><code>host_rule</code> -<br />  (Optional)<br />  The list of HostRules to use against the URL.<br />  Structure is <a href=\"#nested_host_rule\">documented below</a>.</p></li><li><p><code>path_matcher</code> -<br />  (Optional)<br />  The list of named PathMatchers to use against the URL.<br />  Structure is <a href=\"#nested_path_matcher\">documented below</a>.</p></li><li><p><code>test</code> -<br />  (Optional)<br />  The list of expected URL mapping tests. Request to update this UrlMap will<br />  succeed only if all of the test cases pass. You can specify a maximum of 100<br />  tests per UrlMap.<br />  Structure is <a href=\"#nested_test\">documented below</a>.</p></li><li><p><code>default_url_redirect</code> -<br />  (Optional)<br />  When none of the specified hostRules match, the request is redirected to a URL specified<br />  by defaultUrlRedirect. If defaultUrlRedirect is specified, defaultService or<br />  defaultRouteAction must not be set.<br />  Structure is <a href=\"#nested_default_url_redirect\">documented below</a>.</p></li><li><p><code>default_route_action</code> -<br />  (Optional)<br />  defaultRouteAction takes effect when none of the hostRules match. The load balancer performs advanced routing actions<br />  like URL rewrites, header transformations, etc. prior to forwarding the request to the selected backend.<br />  If defaultRouteAction specifies any weightedBackendServices, defaultService must not be set. Conversely if defaultService<br />  is set, defaultRouteAction cannot contain any weightedBackendServices.<br />  Only one of defaultRouteAction or defaultUrlRedirect must be set.<br />  Structure is <a href=\"#nested_default_route_action\">documented below</a>.</p></li><li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.<br />    If it is not provided, the provider project is used.</p></li></ul><p><a name=\"nested_header_action\"></a>The <code>header_action</code> block supports:</p><ul><li><p><code>request_headers_to_add</code> -<br />  (Optional)<br />  Headers to add to a matching request prior to forwarding the request to the<br />  backendService.<br />  Structure is <a href=\"#nested_request_headers_to_add\">documented below</a>.</p></li><li><p><code>request_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the request<br />  prior to forwarding the request to the backendService.</p></li><li><p><code>response_headers_to_add</code> -<br />  (Optional)<br />  Headers to add the response prior to sending the response back to the client.<br />  Structure is <a href=\"#nested_response_headers_to_add\">documented below</a>.</p></li><li><p><code>response_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the response<br />  prior to sending the response back to the client.</p></li></ul><p><a name=\"nested_request_headers_to_add\"></a>The <code>request_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_response_headers_to_add\"></a>The <code>response_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_host_rule\"></a>The <code>host_rule</code> block supports:</p><ul><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this resource. Provide this property when you create<br />  the resource.</p></li><li><p><code>hosts</code> -<br />  (Required)<br />  The list of host patterns to match. They must be valid hostnames, except * will<br />  match any string of ([a-z0-9-.]*). In that case, * must be the first character<br />  and must be followed in the pattern by either - or ..</p></li><li><p><code>path_matcher</code> -<br />  (Required)<br />  The name of the PathMatcher to use to match the path portion of the URL if the<br />  hostRule matches the URL's host portion.</p></li></ul><p><a name=\"nested_path_matcher\"></a>The <code>path_matcher</code> block supports:</p><ul><li><p><code>default_service</code> -<br />  (Optional)<br />  The backend service or backend bucket to use when none of the given paths match.</p></li><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this resource. Provide this property when you create<br />  the resource.</p></li><li><p><code>header_action</code> -<br />  (Optional)<br />  Specifies changes to request and response headers that need to take effect for<br />  the selected backendService. HeaderAction specified here are applied after the<br />  matching HttpRouteRule HeaderAction and before the HeaderAction in the UrlMap<br />  Structure is <a href=\"#nested_header_action\">documented below</a>.</p></li><li><p><code>name</code> -<br />  (Required)<br />  The name to which this PathMatcher is referred by the HostRule.</p></li><li><p><code>path_rule</code> -<br />  (Optional)<br />  The list of path rules. Use this list instead of routeRules when routing based<br />  on simple path matching is all that's required. The order by which path rules<br />  are specified does not matter. Matches are always done on the longest-path-first<br />  basis. For example: a pathRule with a path /a/b/c/<em> will match before /a/b/</em><br />  irrespective of the order in which those paths appear in this list. Within a<br />  given pathMatcher, only one of pathRules or routeRules must be set.<br />  Structure is <a href=\"#nested_path_rule\">documented below</a>.</p></li><li><p><code>route_rules</code> -<br />  (Optional)<br />  The list of ordered HTTP route rules. Use this list instead of pathRules when<br />  advanced route matching and routing actions are desired. The order of specifying<br />  routeRules matters: the first rule that matches will cause its specified routing<br />  action to take effect. Within a given pathMatcher, only one of pathRules or<br />  routeRules must be set. routeRules are not supported in UrlMaps intended for<br />  External load balancers.<br />  Structure is <a href=\"#nested_route_rules\">documented below</a>.</p></li><li><p><code>default_url_redirect</code> -<br />  (Optional)<br />  When none of the specified hostRules match, the request is redirected to a URL specified<br />  by defaultUrlRedirect. If defaultUrlRedirect is specified, defaultService or<br />  defaultRouteAction must not be set.<br />  Structure is <a href=\"#nested_default_url_redirect\">documented below</a>.</p></li><li><p><code>default_route_action</code> -<br />  (Optional)<br />  defaultRouteAction takes effect when none of the pathRules or routeRules match. The load balancer performs<br />  advanced routing actions like URL rewrites, header transformations, etc. prior to forwarding the request<br />  to the selected backend. If defaultRouteAction specifies any weightedBackendServices, defaultService must not be set.<br />  Conversely if defaultService is set, defaultRouteAction cannot contain any weightedBackendServices.<br />  Only one of defaultRouteAction or defaultUrlRedirect must be set.<br />  Structure is <a href=\"#nested_default_route_action\">documented below</a>.</p></li></ul><p><a name=\"nested_header_action\"></a>The <code>header_action</code> block supports:</p><ul><li><p><code>request_headers_to_add</code> -<br />  (Optional)<br />  Headers to add to a matching request prior to forwarding the request to the<br />  backendService.<br />  Structure is <a href=\"#nested_request_headers_to_add\">documented below</a>.</p></li><li><p><code>request_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the request<br />  prior to forwarding the request to the backendService.</p></li><li><p><code>response_headers_to_add</code> -<br />  (Optional)<br />  Headers to add the response prior to sending the response back to the client.<br />  Structure is <a href=\"#nested_response_headers_to_add\">documented below</a>.</p></li><li><p><code>response_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the response<br />  prior to sending the response back to the client.</p></li></ul><p><a name=\"nested_request_headers_to_add\"></a>The <code>request_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_response_headers_to_add\"></a>The <code>response_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_path_rule\"></a>The <code>path_rule</code> block supports:</p><ul><li><p><code>service</code> -<br />  (Optional)<br />  The backend service or backend bucket to use if any of the given paths match.</p></li><li><p><code>paths</code> -<br />  (Required)<br />  The list of path patterns to match. Each must start with / and the only place a<br />  * is allowed is at the end following a /. The string fed to the path matcher<br />  does not include any text after the first ? or #, and those chars are not<br />  allowed here.</p></li><li><p><code>route_action</code> -<br />  (Optional)<br />  In response to a matching path, the load balancer performs advanced routing<br />  actions like URL rewrites, header transformations, etc. prior to forwarding the<br />  request to the selected backend. If routeAction specifies any<br />  weightedBackendServices, service must not be set. Conversely if service is set,<br />  routeAction cannot contain any  weightedBackendServices. Only one of routeAction<br />  or urlRedirect must be set.<br />  Structure is <a href=\"#nested_route_action\">documented below</a>.</p></li><li><p><code>url_redirect</code> -<br />  (Optional)<br />  When a path pattern is matched, the request is redirected to a URL specified<br />  by urlRedirect. If urlRedirect is specified, service or routeAction must not<br />  be set.<br />  Structure is <a href=\"#nested_url_redirect\">documented below</a>.</p></li></ul><p><a name=\"nested_route_action\"></a>The <code>route_action</code> block supports:</p><ul><li><p><code>cors_policy</code> -<br />  (Optional)<br />  The specification for allowing client side cross-origin requests. Please see W3C<br />  Recommendation for Cross Origin Resource Sharing<br />  Structure is <a href=\"#nested_cors_policy\">documented below</a>.</p></li><li><p><code>fault_injection_policy</code> -<br />  (Optional)<br />  The specification for fault injection introduced into traffic to test the<br />  resiliency of clients to backend service failure. As part of fault injection,<br />  when clients send requests to a backend service, delays can be introduced by<br />  Loadbalancer on a percentage of requests before sending those request to the<br />  backend service. Similarly requests from clients can be aborted by the<br />  Loadbalancer for a percentage of requests. timeout and retry_policy will be<br />  ignored by clients that are configured with a fault_injection_policy.<br />  Structure is <a href=\"#nested_fault_injection_policy\">documented below</a>.</p></li><li><p><code>request_mirror_policy</code> -<br />  (Optional)<br />  Specifies the policy on how requests intended for the route's backends are<br />  shadowed to a separate mirrored backend service. Loadbalancer does not wait for<br />  responses from the shadow service. Prior to sending traffic to the shadow<br />  service, the host / authority header is suffixed with -shadow.<br />  Structure is <a href=\"#nested_request_mirror_policy\">documented below</a>.</p></li><li><p><code>retry_policy</code> -<br />  (Optional)<br />  Specifies the retry policy associated with this route.<br />  Structure is <a href=\"#nested_retry_policy\">documented below</a>.</p></li><li><p><code>timeout</code> -<br />  (Optional)<br />  Specifies the timeout for the selected route. Timeout is computed from the time<br />  the request is has been fully processed (i.e. end-of-stream) up until the<br />  response has been completely processed. Timeout includes all retries. If not<br />  specified, the default value is 15 seconds.<br />  Structure is <a href=\"#nested_timeout\">documented below</a>.</p></li><li><p><code>url_rewrite</code> -<br />  (Optional)<br />  The spec to modify the URL of the request, prior to forwarding the request to<br />  the matched service<br />  Structure is <a href=\"#nested_url_rewrite\">documented below</a>.</p></li><li><p><code>weighted_backend_services</code> -<br />  (Optional)<br />  A list of weighted backend services to send traffic to when a route match<br />  occurs. The weights determine the fraction of traffic that flows to their<br />  corresponding backend service. If all traffic needs to go to a single backend<br />  service, there must be one  weightedBackendService with weight set to a non 0<br />  number. Once a backendService is identified and before forwarding the request to<br />  the backend service, advanced routing actions like Url rewrites and header<br />  transformations are applied depending on additional settings specified in this<br />  HttpRouteAction.<br />  Structure is <a href=\"#nested_weighted_backend_services\">documented below</a>.</p></li></ul><p><a name=\"nested_cors_policy\"></a>The <code>cors_policy</code> block supports:</p><ul><li><p><code>allow_credentials</code> -<br />  (Optional)<br />  In response to a preflight request, setting this to true indicates that the<br />  actual request can include user credentials. This translates to the Access-<br />  Control-Allow-Credentials header. Defaults to false.</p></li><li><p><code>allow_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Headers header.</p></li><li><p><code>allow_methods</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Methods header.</p></li><li><p><code>allow_origin_regexes</code> -<br />  (Optional)<br />  Specifies the regular expression patterns that match allowed origins. For<br />  regular expression grammar please see en.cppreference.com/w/cpp/regex/ecmascript<br />  An origin is allowed if it matches either allow_origins or allow_origin_regex.</p></li><li><p><code>allow_origins</code> -<br />  (Optional)<br />  Specifies the list of origins that will be allowed to do CORS requests. An<br />  origin is allowed if it matches either allow_origins or allow_origin_regex.</p></li><li><p><code>disabled</code> -<br />  (Required)<br />  If true, specifies the CORS policy is disabled.</p></li><li><p><code>expose_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Expose-Headers header.</p></li><li><p><code>max_age</code> -<br />  (Optional)<br />  Specifies how long the results of a preflight request can be cached. This<br />  translates to the content for the Access-Control-Max-Age header.</p></li></ul><p><a name=\"nested_fault_injection_policy\"></a>The <code>fault_injection_policy</code> block supports:</p><ul><li><p><code>abort</code> -<br />  (Optional)<br />  The specification for how client requests are aborted as part of fault<br />  injection.<br />  Structure is <a href=\"#nested_abort\">documented below</a>.</p></li><li><p><code>delay</code> -<br />  (Optional)<br />  The specification for how client requests are delayed as part of fault<br />  injection, before being sent to a backend service.<br />  Structure is <a href=\"#nested_delay\">documented below</a>.</p></li></ul><p><a name=\"nested_abort\"></a>The <code>abort</code> block supports:</p><ul><li><p><code>http_status</code> -<br />  (Required)<br />  The HTTP status code used to abort the request. The value must be between 200<br />  and 599 inclusive.</p></li><li><p><code>percentage</code> -<br />  (Required)<br />  The percentage of traffic (connections/operations/requests) which will be<br />  aborted as part of fault injection. The value must be between 0.0 and 100.0<br />  inclusive.</p></li></ul><p><a name=\"nested_delay\"></a>The <code>delay</code> block supports:</p><ul><li><p><code>fixed_delay</code> -<br />  (Required)<br />  Specifies the value of the fixed delay interval.<br />  Structure is <a href=\"#nested_fixed_delay\">documented below</a>.</p></li><li><p><code>percentage</code> -<br />  (Required)<br />  The percentage of traffic (connections/operations/requests) on which delay will<br />  be introduced as part of fault injection. The value must be between 0.0 and<br />  100.0 inclusive.</p></li></ul><p><a name=\"nested_fixed_delay\"></a>The <code>fixed_delay</code> block supports:</p><ul><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li></ul><p><a name=\"nested_request_mirror_policy\"></a>The <code>request_mirror_policy</code> block supports:</p><ul><li><code>backend_service</code> -<br />  (Required)<br />  The BackendService resource being mirrored to.</li></ul><p><a name=\"nested_retry_policy\"></a>The <code>retry_policy</code> block supports:</p><ul><li><p><code>num_retries</code> -<br />  (Optional)<br />  Specifies the allowed number retries. This number must be &gt; 0.</p></li><li><p><code>per_try_timeout</code> -<br />  (Optional)<br />  Specifies a non-zero timeout per retry attempt.<br />  Structure is <a href=\"#nested_per_try_timeout\">documented below</a>.</p></li><li><p><code>retry_conditions</code> -<br />  (Optional)<br />  Specifies one or more conditions when this retry rule applies. Valid values are:</p></li><li>5xx: Loadbalancer will attempt a retry if the backend service responds with<br />  any 5xx response code, or if the backend service does not respond at all,<br />  example: disconnects, reset, read timeout, connection failure, and refused<br />  streams.</li><li>gateway-error: Similar to 5xx, but only applies to response codes<br />  502, 503 or 504.</li><li>connect-failure: Loadbalancer will retry on failures<br />  connecting to backend services, for example due to connection timeouts.</li><li>retriable-4xx: Loadbalancer will retry for retriable 4xx response codes.<br />  Currently the only retriable error supported is 409.</li><li>refused-stream: Loadbalancer will retry if the backend service resets the stream with a<br />  REFUSED_STREAM error code. This reset type indicates that it is safe to retry.</li><li>cancelled: Loadbalancer will retry if the gRPC status code in the response<br />  header is set to cancelled</li><li>deadline-exceeded: Loadbalancer will retry if the<br />  gRPC status code in the response header is set to deadline-exceeded</li><li>resource-exhausted: Loadbalancer will retry if the gRPC status code in the response<br />  header is set to resource-exhausted</li><li>unavailable: Loadbalancer will retry if<br />  the gRPC status code in the response header is set to unavailable</li></ul><p><a name=\"nested_per_try_timeout\"></a>The <code>per_try_timeout</code> block supports:</p><ul><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li></ul><p><a name=\"nested_timeout\"></a>The <code>timeout</code> block supports:</p><ul><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li></ul><p><a name=\"nested_url_rewrite\"></a>The <code>url_rewrite</code> block supports:</p><ul><li><p><code>host_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected service, the request's host<br />  header is replaced with contents of hostRewrite. The value must be between 1 and<br />  255 characters.</p></li><li><p><code>path_prefix_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected backend service, the matching<br />  portion of the request's path is replaced by pathPrefixRewrite. The value must<br />  be between 1 and 1024 characters.</p></li></ul><p><a name=\"nested_weighted_backend_services\"></a>The <code>weighted_backend_services</code> block supports:</p><ul><li><p><code>backend_service</code> -<br />  (Required)<br />  The default BackendService resource. Before<br />  forwarding the request to backendService, the loadbalancer applies any relevant<br />  headerActions specified as part of this backendServiceWeight.</p></li><li><p><code>header_action</code> -<br />  (Optional)<br />  Specifies changes to request and response headers that need to take effect for<br />  the selected backendService. headerAction specified here take effect before<br />  headerAction in the enclosing HttpRouteRule, PathMatcher and UrlMap.<br />  Structure is <a href=\"#nested_header_action\">documented below</a>.</p></li><li><p><code>weight</code> -<br />  (Required)<br />  Specifies the fraction of traffic sent to backendService, computed as weight /<br />  (sum of all weightedBackendService weights in routeAction) . The selection of a<br />  backend service is determined only for new traffic. Once a user's request has<br />  been directed to a backendService, subsequent requests will be sent to the same<br />  backendService as determined by the BackendService's session affinity policy.<br />  The value must be between 0 and 1000</p></li></ul><p><a name=\"nested_header_action\"></a>The <code>header_action</code> block supports:</p><ul><li><p><code>request_headers_to_add</code> -<br />  (Optional)<br />  Headers to add to a matching request prior to forwarding the request to the<br />  backendService.<br />  Structure is <a href=\"#nested_request_headers_to_add\">documented below</a>.</p></li><li><p><code>request_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the request<br />  prior to forwarding the request to the backendService.</p></li><li><p><code>response_headers_to_add</code> -<br />  (Optional)<br />  Headers to add the response prior to sending the response back to the client.<br />  Structure is <a href=\"#nested_response_headers_to_add\">documented below</a>.</p></li><li><p><code>response_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the response<br />  prior to sending the response back to the client.</p></li></ul><p><a name=\"nested_request_headers_to_add\"></a>The <code>request_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_response_headers_to_add\"></a>The <code>response_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_url_redirect\"></a>The <code>url_redirect</code> block supports:</p><ul><li><p><code>host_redirect</code> -<br />  (Optional)<br />  The host that will be used in the redirect response instead of the one<br />  that was supplied in the request. The value must be between 1 and 255<br />  characters.</p></li><li><p><code>https_redirect</code> -<br />  (Optional)<br />  If set to true, the URL scheme in the redirected request is set to https.<br />  If set to false, the URL scheme of the redirected request will remain the<br />  same as that of the request. This must only be set for UrlMaps used in<br />  TargetHttpProxys. Setting this true for TargetHttpsProxy is not<br />  permitted. The default is set to false.</p></li><li><p><code>path_redirect</code> -<br />  (Optional)<br />  The path that will be used in the redirect response instead of the one<br />  that was supplied in the request. pathRedirect cannot be supplied<br />  together with prefixRedirect. Supply one alone or neither. If neither is<br />  supplied, the path of the original request will be used for the redirect.<br />  The value must be between 1 and 1024 characters.</p></li><li><p><code>prefix_redirect</code> -<br />  (Optional)<br />  The prefix that replaces the prefixMatch specified in the<br />  HttpRouteRuleMatch, retaining the remaining portion of the URL before<br />  redirecting the request. prefixRedirect cannot be supplied together with<br />  pathRedirect. Supply one alone or neither. If neither is supplied, the<br />  path of the original request will be used for the redirect. The value<br />  must be between 1 and 1024 characters.</p></li><li><p><code>redirect_response_code</code> -<br />  (Optional)<br />  The HTTP Status code to use for this RedirectAction. Supported values are:</p></li><li>MOVED_PERMANENTLY_DEFAULT, which is the default value and corresponds to 301.</li><li>FOUND, which corresponds to 302.</li><li>SEE_OTHER which corresponds to 303.</li><li>TEMPORARY_REDIRECT, which corresponds to 307. In this case, the request method<br />  will be retained.</li><li><p>PERMANENT_REDIRECT, which corresponds to 308. In this case,<br />  the request method will be retained.</p></li><li><p><code>strip_query</code> -<br />  (Required)<br />  If set to true, any accompanying query portion of the original URL is<br />  removed prior to redirecting the request. If set to false, the query<br />  portion of the original URL is retained.<br />   This field is required to ensure an empty block is not set. The normal default value is false.</p></li></ul><p><a name=\"nested_route_rules\"></a>The <code>route_rules</code> block supports:</p><ul><li><p><code>priority</code> -<br />  (Required)<br />  For routeRules within a given pathMatcher, priority determines the order<br />  in which load balancer will interpret routeRules. RouteRules are evaluated<br />  in order of priority, from the lowest to highest number. The priority of<br />  a rule decreases as its number increases (1, 2, 3, N+1). The first rule<br />  that matches the request is applied.<br />  You cannot configure two or more routeRules with the same priority.<br />  Priority for each rule must be set to a number between 0 and<br />  2147483647 inclusive.<br />  Priority numbers can have gaps, which enable you to add or remove rules<br />  in the future without affecting the rest of the rules. For example,<br />  1, 2, 3, 4, 5, 9, 12, 16 is a valid series of priority numbers to which<br />  you could add rules numbered from 6 to 8, 10 to 11, and 13 to 15 in the<br />  future without any impact on existing rules.</p></li><li><p><code>service</code> -<br />  (Optional)<br />  The backend service resource to which traffic is<br />  directed if this rule is matched. If routeAction is additionally specified,<br />  advanced routing actions like URL Rewrites, etc. take effect prior to sending<br />  the request to the backend. However, if service is specified, routeAction cannot<br />  contain any weightedBackendService s. Conversely, if routeAction specifies any<br />  weightedBackendServices, service must not be specified. Only one of urlRedirect,<br />  service or routeAction.weightedBackendService must be set.</p></li><li><p><code>header_action</code> -<br />  (Optional)<br />  Specifies changes to request and response headers that need to take effect for<br />  the selected backendService. The headerAction specified here are applied before<br />  the matching pathMatchers[].headerAction and after pathMatchers[].routeRules[].r<br />  outeAction.weightedBackendService.backendServiceWeightAction[].headerAction<br />  Structure is <a href=\"#nested_header_action\">documented below</a>.</p></li><li><p><code>match_rules</code> -<br />  (Optional)<br />  The rules for determining a match.<br />  Structure is <a href=\"#nested_match_rules\">documented below</a>.</p></li><li><p><code>route_action</code> -<br />  (Optional)<br />  In response to a matching matchRule, the load balancer performs advanced routing<br />  actions like URL rewrites, header transformations, etc. prior to forwarding the<br />  request to the selected backend. If  routeAction specifies any<br />  weightedBackendServices, service must not be set. Conversely if service is set,<br />  routeAction cannot contain any  weightedBackendServices. Only one of routeAction<br />  or urlRedirect must be set.<br />  Structure is <a href=\"#nested_route_action\">documented below</a>.</p></li><li><p><code>url_redirect</code> -<br />  (Optional)<br />  When this rule is matched, the request is redirected to a URL specified by<br />  urlRedirect. If urlRedirect is specified, service or routeAction must not be<br />  set.<br />  Structure is <a href=\"#nested_url_redirect\">documented below</a>.</p></li></ul><p><a name=\"nested_header_action\"></a>The <code>header_action</code> block supports:</p><ul><li><p><code>request_headers_to_add</code> -<br />  (Optional)<br />  Headers to add to a matching request prior to forwarding the request to the<br />  backendService.<br />  Structure is <a href=\"#nested_request_headers_to_add\">documented below</a>.</p></li><li><p><code>request_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the request<br />  prior to forwarding the request to the backendService.</p></li><li><p><code>response_headers_to_add</code> -<br />  (Optional)<br />  Headers to add the response prior to sending the response back to the client.<br />  Structure is <a href=\"#nested_response_headers_to_add\">documented below</a>.</p></li><li><p><code>response_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the response<br />  prior to sending the response back to the client.</p></li></ul><p><a name=\"nested_request_headers_to_add\"></a>The <code>request_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_response_headers_to_add\"></a>The <code>response_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_match_rules\"></a>The <code>match_rules</code> block supports:</p><ul><li><p><code>full_path_match</code> -<br />  (Optional)<br />  For satisfying the matchRule condition, the path of the request must exactly<br />  match the value specified in fullPathMatch after removing any query parameters<br />  and anchor that may be part of the original URL. FullPathMatch must be between 1<br />  and 1024 characters. Only one of prefixMatch, fullPathMatch or regexMatch must<br />  be specified.</p></li><li><p><code>header_matches</code> -<br />  (Optional)<br />  Specifies a list of header match criteria, all of which must match corresponding<br />  headers in the request.<br />  Structure is <a href=\"#nested_header_matches\">documented below</a>.</p></li><li><p><code>ignore_case</code> -<br />  (Optional)<br />  Specifies that prefixMatch and fullPathMatch matches are case sensitive.<br />  Defaults to false.</p></li><li><p><code>metadata_filters</code> -<br />  (Optional)<br />  Opaque filter criteria used by Loadbalancer to restrict routing configuration to<br />  a limited set xDS compliant clients. In their xDS requests to Loadbalancer, xDS<br />  clients present node metadata. If a match takes place, the relevant routing<br />  configuration is made available to those proxies. For each metadataFilter in<br />  this list, if its filterMatchCriteria is set to MATCH_ANY, at least one of the<br />  filterLabels must match the corresponding label provided in the metadata. If its<br />  filterMatchCriteria is set to MATCH_ALL, then all of its filterLabels must match<br />  with corresponding labels in the provided metadata. metadataFilters specified<br />  here can be overrides those specified in ForwardingRule that refers to this<br />  UrlMap. metadataFilters only applies to Loadbalancers that have their<br />  loadBalancingScheme set to INTERNAL_SELF_MANAGED.<br />  Structure is <a href=\"#nested_metadata_filters\">documented below</a>.</p></li><li><p><code>prefix_match</code> -<br />  (Optional)<br />  For satisfying the matchRule condition, the request's path must begin with the<br />  specified prefixMatch. prefixMatch must begin with a /. The value must be<br />  between 1 and 1024 characters. Only one of prefixMatch, fullPathMatch or<br />  regexMatch must be specified.</p></li><li><p><code>query_parameter_matches</code> -<br />  (Optional)<br />  Specifies a list of query parameter match criteria, all of which must match<br />  corresponding query parameters in the request.<br />  Structure is <a href=\"#nested_query_parameter_matches\">documented below</a>.</p></li><li><p><code>regex_match</code> -<br />  (Optional)<br />  For satisfying the matchRule condition, the path of the request must satisfy the<br />  regular expression specified in regexMatch after removing any query parameters<br />  and anchor supplied with the original URL. For regular expression grammar please<br />  see en.cppreference.com/w/cpp/regex/ecmascript  Only one of prefixMatch,<br />  fullPathMatch or regexMatch must be specified.</p></li><li><p><code>path_template_match</code> -<br />  (Optional)<br />  For satisfying the matchRule condition, the path of the request<br />  must match the wildcard pattern specified in pathTemplateMatch<br />  after removing any query parameters and anchor that may be part<br />  of the original URL.<br />  pathTemplateMatch must be between 1 and 255 characters<br />  (inclusive).  The pattern specified by pathTemplateMatch may<br />  have at most 5 wildcard operators and at most 5 variable<br />  captures in total.</p></li></ul><p><a name=\"nested_header_matches\"></a>The <code>header_matches</code> block supports:</p><ul><li><p><code>exact_match</code> -<br />  (Optional)<br />  The value should exactly match contents of exactMatch. Only one of exactMatch,<br />  prefixMatch, suffixMatch, regexMatch, presentMatch or rangeMatch must be set.</p></li><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the HTTP header to match. For matching against the HTTP request's<br />  authority, use a headerMatch with the header name \":authority\". For matching a<br />  request's method, use the headerName \":method\".</p></li><li><p><code>invert_match</code> -<br />  (Optional)<br />  If set to false, the headerMatch is considered a match if the match criteria<br />  above are met. If set to true, the headerMatch is considered a match if the<br />  match criteria above are NOT met. Defaults to false.</p></li><li><p><code>prefix_match</code> -<br />  (Optional)<br />  The value of the header must start with the contents of prefixMatch. Only one of<br />  exactMatch, prefixMatch, suffixMatch, regexMatch, presentMatch or rangeMatch<br />  must be set.</p></li><li><p><code>present_match</code> -<br />  (Optional)<br />  A header with the contents of headerName must exist. The match takes place<br />  whether or not the request's header has a value or not. Only one of exactMatch,<br />  prefixMatch, suffixMatch, regexMatch, presentMatch or rangeMatch must be set.</p></li><li><p><code>range_match</code> -<br />  (Optional)<br />  The header value must be an integer and its value must be in the range specified<br />  in rangeMatch. If the header does not contain an integer, number or is empty,<br />  the match fails. For example for a range [-5, 0]   - -3 will match.  - 0 will<br />  not match.  - 0.25 will not match.  - -3someString will not match.   Only one of<br />  exactMatch, prefixMatch, suffixMatch, regexMatch, presentMatch or rangeMatch<br />  must be set.<br />  Structure is <a href=\"#nested_range_match\">documented below</a>.</p></li><li><p><code>regex_match</code> -<br />  (Optional)<br />  The value of the header must match the regular expression specified in<br />  regexMatch. For regular expression grammar, please see:<br />  en.cppreference.com/w/cpp/regex/ecmascript  For matching against a port<br />  specified in the HTTP request, use a headerMatch with headerName set to PORT and<br />  a regular expression that satisfies the RFC2616 Host header's port specifier.<br />  Only one of exactMatch, prefixMatch, suffixMatch, regexMatch, presentMatch or<br />  rangeMatch must be set.</p></li><li><p><code>suffix_match</code> -<br />  (Optional)<br />  The value of the header must end with the contents of suffixMatch. Only one of<br />  exactMatch, prefixMatch, suffixMatch, regexMatch, presentMatch or rangeMatch<br />  must be set.</p></li></ul><p><a name=\"nested_range_match\"></a>The <code>range_match</code> block supports:</p><ul><li><p><code>range_end</code> -<br />  (Required)<br />  The end of the range (exclusive).</p></li><li><p><code>range_start</code> -<br />  (Required)<br />  The start of the range (inclusive).</p></li></ul><p><a name=\"nested_metadata_filters\"></a>The <code>metadata_filters</code> block supports:</p><ul><li><p><code>filter_labels</code> -<br />  (Required)<br />  The list of label value pairs that must match labels in the provided metadata<br />  based on filterMatchCriteria  This list must not be empty and can have at the<br />  most 64 entries.<br />  Structure is <a href=\"#nested_filter_labels\">documented below</a>.</p></li><li><p><code>filter_match_criteria</code> -<br />  (Required)<br />  Specifies how individual filterLabel matches within the list of filterLabels<br />  contribute towards the overall metadataFilter match. Supported values are:</p><ul><li>MATCH_ANY: At least one of the filterLabels must have a matching label in the<br />  provided metadata.</li><li>MATCH_ALL: All filterLabels must have matching labels in<br />  the provided metadata.<br />  Possible values are: <code>MATCH_ALL</code>, <code>MATCH_ANY</code>.</li></ul></li></ul><p><a name=\"nested_filter_labels\"></a>The <code>filter_labels</code> block supports:</p><ul><li><p><code>name</code> -<br />  (Required)<br />  Name of metadata label. The name can have a maximum length of 1024 characters<br />  and must be at least 1 character long.</p></li><li><p><code>value</code> -<br />  (Required)<br />  The value of the label must match the specified value. value can have a maximum<br />  length of 1024 characters.</p></li></ul><p><a name=\"nested_query_parameter_matches\"></a>The <code>query_parameter_matches</code> block supports:</p><ul><li><p><code>exact_match</code> -<br />  (Optional)<br />  The queryParameterMatch matches if the value of the parameter exactly matches<br />  the contents of exactMatch. Only one of presentMatch, exactMatch and regexMatch<br />  must be set.</p></li><li><p><code>name</code> -<br />  (Required)<br />  The name of the query parameter to match. The query parameter must exist in the<br />  request, in the absence of which the request match fails.</p></li><li><p><code>present_match</code> -<br />  (Optional)<br />  Specifies that the queryParameterMatch matches if the request contains the query<br />  parameter, irrespective of whether the parameter has a value or not. Only one of<br />  presentMatch, exactMatch and regexMatch must be set.</p></li><li><p><code>regex_match</code> -<br />  (Optional)<br />  The queryParameterMatch matches if the value of the parameter matches the<br />  regular expression specified by regexMatch. For the regular expression grammar,<br />  please see en.cppreference.com/w/cpp/regex/ecmascript  Only one of presentMatch,<br />  exactMatch and regexMatch must be set.</p></li></ul><p><a name=\"nested_route_action\"></a>The <code>route_action</code> block supports:</p><ul><li><p><code>cors_policy</code> -<br />  (Optional)<br />  The specification for allowing client side cross-origin requests. Please see W3C<br />  Recommendation for Cross Origin Resource Sharing<br />  Structure is <a href=\"#nested_cors_policy\">documented below</a>.</p></li><li><p><code>fault_injection_policy</code> -<br />  (Optional)<br />  The specification for fault injection introduced into traffic to test the<br />  resiliency of clients to backend service failure. As part of fault injection,<br />  when clients send requests to a backend service, delays can be introduced by<br />  Loadbalancer on a percentage of requests before sending those request to the<br />  backend service. Similarly requests from clients can be aborted by the<br />  Loadbalancer for a percentage of requests. timeout and retry_policy will be<br />  ignored by clients that are configured with a fault_injection_policy.<br />  Structure is <a href=\"#nested_fault_injection_policy\">documented below</a>.</p></li><li><p><code>request_mirror_policy</code> -<br />  (Optional)<br />  Specifies the policy on how requests intended for the route's backends are<br />  shadowed to a separate mirrored backend service. Loadbalancer does not wait for<br />  responses from the shadow service. Prior to sending traffic to the shadow<br />  service, the host / authority header is suffixed with -shadow.<br />  Structure is <a href=\"#nested_request_mirror_policy\">documented below</a>.</p></li><li><p><code>retry_policy</code> -<br />  (Optional)<br />  Specifies the retry policy associated with this route.<br />  Structure is <a href=\"#nested_retry_policy\">documented below</a>.</p></li><li><p><code>timeout</code> -<br />  (Optional)<br />  Specifies the timeout for the selected route. Timeout is computed from the time<br />  the request is has been fully processed (i.e. end-of-stream) up until the<br />  response has been completely processed. Timeout includes all retries. If not<br />  specified, the default value is 15 seconds.<br />  Structure is <a href=\"#nested_timeout\">documented below</a>.</p></li><li><p><code>url_rewrite</code> -<br />  (Optional)<br />  The spec to modify the URL of the request, prior to forwarding the request to<br />  the matched service<br />  Structure is <a href=\"#nested_url_rewrite\">documented below</a>.</p></li><li><p><code>weighted_backend_services</code> -<br />  (Optional)<br />  A list of weighted backend services to send traffic to when a route match<br />  occurs. The weights determine the fraction of traffic that flows to their<br />  corresponding backend service. If all traffic needs to go to a single backend<br />  service, there must be one  weightedBackendService with weight set to a non 0<br />  number. Once a backendService is identified and before forwarding the request to<br />  the backend service, advanced routing actions like Url rewrites and header<br />  transformations are applied depending on additional settings specified in this<br />  HttpRouteAction.<br />  Structure is <a href=\"#nested_weighted_backend_services\">documented below</a>.</p></li></ul><p><a name=\"nested_cors_policy\"></a>The <code>cors_policy</code> block supports:</p><ul><li><p><code>allow_credentials</code> -<br />  (Optional)<br />  In response to a preflight request, setting this to true indicates that the<br />  actual request can include user credentials. This translates to the Access-<br />  Control-Allow-Credentials header. Defaults to false.</p></li><li><p><code>allow_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Headers header.</p></li><li><p><code>allow_methods</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Methods header.</p></li><li><p><code>allow_origin_regexes</code> -<br />  (Optional)<br />  Specifies the regular expression patterns that match allowed origins. For<br />  regular expression grammar please see en.cppreference.com/w/cpp/regex/ecmascript<br />  An origin is allowed if it matches either allow_origins or allow_origin_regex.</p></li><li><p><code>allow_origins</code> -<br />  (Optional)<br />  Specifies the list of origins that will be allowed to do CORS requests. An<br />  origin is allowed if it matches either allow_origins or allow_origin_regex.</p></li><li><p><code>disabled</code> -<br />  (Optional)<br />  If true, specifies the CORS policy is disabled.<br />  which indicates that the CORS policy is in effect. Defaults to false.</p></li><li><p><code>expose_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Expose-Headers header.</p></li><li><p><code>max_age</code> -<br />  (Optional)<br />  Specifies how long the results of a preflight request can be cached. This<br />  translates to the content for the Access-Control-Max-Age header.</p></li></ul><p><a name=\"nested_fault_injection_policy\"></a>The <code>fault_injection_policy</code> block supports:</p><ul><li><p><code>abort</code> -<br />  (Optional)<br />  The specification for how client requests are aborted as part of fault<br />  injection.<br />  Structure is <a href=\"#nested_abort\">documented below</a>.</p></li><li><p><code>delay</code> -<br />  (Optional)<br />  The specification for how client requests are delayed as part of fault<br />  injection, before being sent to a backend service.<br />  Structure is <a href=\"#nested_delay\">documented below</a>.</p></li></ul><p><a name=\"nested_abort\"></a>The <code>abort</code> block supports:</p><ul><li><p><code>http_status</code> -<br />  (Optional)<br />  The HTTP status code used to abort the request. The value must be between 200<br />  and 599 inclusive.</p></li><li><p><code>percentage</code> -<br />  (Optional)<br />  The percentage of traffic (connections/operations/requests) which will be<br />  aborted as part of fault injection. The value must be between 0.0 and 100.0<br />  inclusive.</p></li></ul><p><a name=\"nested_delay\"></a>The <code>delay</code> block supports:</p><ul><li><p><code>fixed_delay</code> -<br />  (Optional)<br />  Specifies the value of the fixed delay interval.<br />  Structure is <a href=\"#nested_fixed_delay\">documented below</a>.</p></li><li><p><code>percentage</code> -<br />  (Optional)<br />  The percentage of traffic (connections/operations/requests) on which delay will<br />  be introduced as part of fault injection. The value must be between 0.0 and<br />  100.0 inclusive.</p></li></ul><p><a name=\"nested_fixed_delay\"></a>The <code>fixed_delay</code> block supports:</p><ul><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li></ul><p><a name=\"nested_request_mirror_policy\"></a>The <code>request_mirror_policy</code> block supports:</p><ul><li><code>backend_service</code> -<br />  (Required)<br />  The BackendService resource being mirrored to.</li></ul><p><a name=\"nested_retry_policy\"></a>The <code>retry_policy</code> block supports:</p><ul><li><p><code>num_retries</code> -<br />  (Required)<br />  Specifies the allowed number retries. This number must be &gt; 0.</p></li><li><p><code>per_try_timeout</code> -<br />  (Optional)<br />  Specifies a non-zero timeout per retry attempt.<br />  If not specified, will use the timeout set in HttpRouteAction. If timeout in HttpRouteAction<br />  is not set, will use the largest timeout among all backend services associated with the route.<br />  Structure is <a href=\"#nested_per_try_timeout\">documented below</a>.</p></li><li><p><code>retry_conditions</code> -<br />  (Optional)<br />  Specfies one or more conditions when this retry rule applies. Valid values are:</p></li><li>5xx: Loadbalancer will attempt a retry if the backend service responds with<br />    any 5xx response code, or if the backend service does not respond at all,<br />    example: disconnects, reset, read timeout, connection failure, and refused<br />    streams.</li><li>gateway-error: Similar to 5xx, but only applies to response codes<br />    502, 503 or 504.</li><li>connect-failure: Loadbalancer will retry on failures<br />    connecting to backend services, for example due to connection timeouts.</li><li>retriable-4xx: Loadbalancer will retry for retriable 4xx response codes.<br />    Currently the only retriable error supported is 409.</li><li>refused-stream: Loadbalancer will retry if the backend service resets the stream with a<br />    REFUSED_STREAM error code. This reset type indicates that it is safe to retry.</li><li>cancelled: Loadbalancer will retry if the gRPC status code in the response<br />    header is set to cancelled</li><li>deadline-exceeded: Loadbalancer will retry if the<br />    gRPC status code in the response header is set to deadline-exceeded</li><li>resource-exhausted: Loadbalancer will retry if the gRPC status code in the response<br />    header is set to resource-exhausted</li><li>unavailable: Loadbalancer will retry if the gRPC status code in<br />    the response header is set to unavailable</li></ul><p><a name=\"nested_per_try_timeout\"></a>The <code>per_try_timeout</code> block supports:</p><ul><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li></ul><p><a name=\"nested_timeout\"></a>The <code>timeout</code> block supports:</p><ul><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li></ul><p><a name=\"nested_url_rewrite\"></a>The <code>url_rewrite</code> block supports:</p><ul><li><p><code>host_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected service, the request's host<br />  header is replaced with contents of hostRewrite. The value must be between 1 and<br />  255 characters.</p></li><li><p><code>path_prefix_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected backend service, the matching<br />  portion of the request's path is replaced by pathPrefixRewrite. The value must<br />  be between 1 and 1024 characters.</p></li><li><p><code>path_template_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected origin, if the<br />  request matched a pathTemplateMatch, the matching portion of the<br />  request's path is replaced re-written using the pattern specified<br />  by pathTemplateRewrite.<br />  pathTemplateRewrite must be between 1 and 255 characters<br />  (inclusive), must start with a '/', and must only use variables<br />  captured by the route's pathTemplate matchers.<br />  pathTemplateRewrite may only be used when all of a route's<br />  MatchRules specify pathTemplate.<br />  Only one of pathPrefixRewrite and pathTemplateRewrite may be<br />  specified.</p></li></ul><p><a name=\"nested_weighted_backend_services\"></a>The <code>weighted_backend_services</code> block supports:</p><ul><li><p><code>backend_service</code> -<br />  (Required)<br />  The default BackendService resource. Before<br />  forwarding the request to backendService, the loadbalancer applies any relevant<br />  headerActions specified as part of this backendServiceWeight.</p></li><li><p><code>header_action</code> -<br />  (Optional)<br />  Specifies changes to request and response headers that need to take effect for<br />  the selected backendService. headerAction specified here take effect before<br />  headerAction in the enclosing HttpRouteRule, PathMatcher and UrlMap.<br />  Structure is <a href=\"#nested_header_action\">documented below</a>.</p></li><li><p><code>weight</code> -<br />  (Required)<br />  Specifies the fraction of traffic sent to backendService, computed as weight /<br />  (sum of all weightedBackendService weights in routeAction) . The selection of a<br />  backend service is determined only for new traffic. Once a user's request has<br />  been directed to a backendService, subsequent requests will be sent to the same<br />  backendService as determined by the BackendService's session affinity policy.<br />  The value must be between 0 and 1000</p></li></ul><p><a name=\"nested_header_action\"></a>The <code>header_action</code> block supports:</p><ul><li><p><code>request_headers_to_add</code> -<br />  (Optional)<br />  Headers to add to a matching request prior to forwarding the request to the<br />  backendService.<br />  Structure is <a href=\"#nested_request_headers_to_add\">documented below</a>.</p></li><li><p><code>request_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the request<br />  prior to forwarding the request to the backendService.</p></li><li><p><code>response_headers_to_add</code> -<br />  (Optional)<br />  Headers to add the response prior to sending the response back to the client.<br />  Structure is <a href=\"#nested_response_headers_to_add\">documented below</a>.</p></li><li><p><code>response_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the response<br />  prior to sending the response back to the client.</p></li></ul><p><a name=\"nested_request_headers_to_add\"></a>The <code>request_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_response_headers_to_add\"></a>The <code>response_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Required)<br />  The name of the header.</p></li><li><p><code>header_value</code> -<br />  (Required)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Required)<br />  If false, headerValue is appended to any values that already exist for the<br />  header. If true, headerValue is set for the header, discarding any values that<br />  were set for that header.</p></li></ul><p><a name=\"nested_url_redirect\"></a>The <code>url_redirect</code> block supports:</p><ul><li><p><code>host_redirect</code> -<br />  (Optional)<br />  The host that will be used in the redirect response instead of the one that was<br />  supplied in the request. The value must be between 1 and 255 characters.</p></li><li><p><code>https_redirect</code> -<br />  (Optional)<br />  If set to true, the URL scheme in the redirected request is set to https. If set<br />  to false, the URL scheme of the redirected request will remain the same as that<br />  of the request. This must only be set for UrlMaps used in TargetHttpProxys.<br />  Setting this true for TargetHttpsProxy is not permitted. Defaults to false.</p></li><li><p><code>path_redirect</code> -<br />  (Optional)<br />  The path that will be used in the redirect response instead of the one that was<br />  supplied in the request. Only one of pathRedirect or prefixRedirect must be<br />  specified. The value must be between 1 and 1024 characters.</p></li><li><p><code>prefix_redirect</code> -<br />  (Optional)<br />  The prefix that replaces the prefixMatch specified in the HttpRouteRuleMatch,<br />  retaining the remaining portion of the URL before redirecting the request.</p></li><li><p><code>redirect_response_code</code> -<br />  (Optional)<br />  The HTTP Status code to use for this RedirectAction. Supported values are:</p></li><li>MOVED_PERMANENTLY_DEFAULT, which is the default value and corresponds to 301.</li><li>FOUND, which corresponds to 302.</li><li>SEE_OTHER which corresponds to 303.</li><li>TEMPORARY_REDIRECT, which corresponds to 307. In this case, the request method will be retained.</li><li><p>PERMANENT_REDIRECT, which corresponds to 308. In this case, the request method will be retained.</p></li><li><p><code>strip_query</code> -<br />  (Optional)<br />  If set to true, any accompanying query portion of the original URL is removed<br />  prior to redirecting the request. If set to false, the query portion of the<br />  original URL is retained. Defaults to false.</p></li></ul><p><a name=\"nested_default_url_redirect\"></a>The <code>default_url_redirect</code> block supports:</p><ul><li><p><code>host_redirect</code> -<br />  (Optional)<br />  The host that will be used in the redirect response instead of the one that was<br />  supplied in the request. The value must be between 1 and 255 characters.</p></li><li><p><code>https_redirect</code> -<br />  (Optional)<br />  If set to true, the URL scheme in the redirected request is set to https. If set to<br />  false, the URL scheme of the redirected request will remain the same as that of the<br />  request. This must only be set for UrlMaps used in TargetHttpProxys. Setting this<br />  true for TargetHttpsProxy is not permitted. The default is set to false.</p></li><li><p><code>path_redirect</code> -<br />  (Optional)<br />  The path that will be used in the redirect response instead of the one that was<br />  supplied in the request. pathRedirect cannot be supplied together with<br />  prefixRedirect. Supply one alone or neither. If neither is supplied, the path of the<br />  original request will be used for the redirect. The value must be between 1 and 1024<br />  characters.</p></li><li><p><code>prefix_redirect</code> -<br />  (Optional)<br />  The prefix that replaces the prefixMatch specified in the HttpRouteRuleMatch,<br />  retaining the remaining portion of the URL before redirecting the request.<br />  prefixRedirect cannot be supplied together with pathRedirect. Supply one alone or<br />  neither. If neither is supplied, the path of the original request will be used for<br />  the redirect. The value must be between 1 and 1024 characters.</p></li><li><p><code>redirect_response_code</code> -<br />  (Optional)<br />  The HTTP Status code to use for this RedirectAction. Supported values are:</p></li><li>MOVED_PERMANENTLY_DEFAULT, which is the default value and corresponds to 301.</li><li>FOUND, which corresponds to 302.</li><li>SEE_OTHER which corresponds to 303.</li><li>TEMPORARY_REDIRECT, which corresponds to 307. In this case, the request method<br />  will be retained.</li><li><p>PERMANENT_REDIRECT, which corresponds to 308. In this case,<br />  the request method will be retained.</p></li><li><p><code>strip_query</code> -<br />  (Required)<br />  If set to true, any accompanying query portion of the original URL is removed prior<br />  to redirecting the request. If set to false, the query portion of the original URL is<br />  retained.<br />   This field is required to ensure an empty block is not set. The normal default value is false.</p></li></ul><p><a name=\"nested_default_route_action\"></a>The <code>default_route_action</code> block supports:</p><ul><li><p><code>weighted_backend_services</code> -<br />  (Optional)<br />  A list of weighted backend services to send traffic to when a route match occurs.<br />  The weights determine the fraction of traffic that flows to their corresponding backend service.<br />  If all traffic needs to go to a single backend service, there must be one weightedBackendService<br />  with weight set to a non 0 number.<br />  Once a backendService is identified and before forwarding the request to the backend service,<br />  advanced routing actions like Url rewrites and header transformations are applied depending on<br />  additional settings specified in this HttpRouteAction.<br />  Structure is <a href=\"#nested_weighted_backend_services\">documented below</a>.</p></li><li><p><code>url_rewrite</code> -<br />  (Optional)<br />  The spec to modify the URL of the request, prior to forwarding the request to the matched service.<br />  Structure is <a href=\"#nested_url_rewrite\">documented below</a>.</p></li><li><p><code>timeout</code> -<br />  (Optional)<br />  Specifies the timeout for the selected route. Timeout is computed from the time the request has been<br />  fully processed (i.e. end-of-stream) up until the response has been completely processed. Timeout includes all retries.<br />  If not specified, will use the largest timeout among all backend services associated with the route.<br />  Structure is <a href=\"#nested_timeout\">documented below</a>.</p></li><li><p><code>retry_policy</code> -<br />  (Optional)<br />  Specifies the retry policy associated with this route.<br />  Structure is <a href=\"#nested_retry_policy\">documented below</a>.</p></li><li><p><code>request_mirror_policy</code> -<br />  (Optional)<br />  Specifies the policy on how requests intended for the route's backends are shadowed to a separate mirrored backend service.<br />  Loadbalancer does not wait for responses from the shadow service. Prior to sending traffic to the shadow service,<br />  the host / authority header is suffixed with -shadow.<br />  Structure is <a href=\"#nested_request_mirror_policy\">documented below</a>.</p></li><li><p><code>cors_policy</code> -<br />  (Optional)<br />  The specification for allowing client side cross-origin requests. Please see<br /><a href=\"https://www.w3.org/TR/cors/\">W3C Recommendation for Cross Origin Resource Sharing</a><br />  Structure is <a href=\"#nested_cors_policy\">documented below</a>.</p></li><li><p><code>fault_injection_policy</code> -<br />  (Optional)<br />  The specification for fault injection introduced into traffic to test the resiliency of clients to backend service failure.<br />  As part of fault injection, when clients send requests to a backend service, delays can be introduced by Loadbalancer on a<br />  percentage of requests before sending those request to the backend service. Similarly requests from clients can be aborted<br />  by the Loadbalancer for a percentage of requests.<br />  timeout and retryPolicy will be ignored by clients that are configured with a faultInjectionPolicy.<br />  Structure is <a href=\"#nested_fault_injection_policy\">documented below</a>.</p></li></ul><p><a name=\"nested_weighted_backend_services\"></a>The <code>weighted_backend_services</code> block supports:</p><ul><li><p><code>backend_service</code> -<br />  (Optional)<br />  The full or partial URL to the default BackendService resource. Before forwarding the<br />  request to backendService, the loadbalancer applies any relevant headerActions<br />  specified as part of this backendServiceWeight.</p></li><li><p><code>weight</code> -<br />  (Optional)<br />  Specifies the fraction of traffic sent to backendService, computed as<br />  weight / (sum of all weightedBackendService weights in routeAction) .<br />  The selection of a backend service is determined only for new traffic. Once a user's request<br />  has been directed to a backendService, subsequent requests will be sent to the same backendService<br />  as determined by the BackendService's session affinity policy.<br />  The value must be between 0 and 1000</p></li><li><p><code>header_action</code> -<br />  (Optional)<br />  Specifies changes to request and response headers that need to take effect for<br />  the selected backendService.<br />  headerAction specified here take effect before headerAction in the enclosing<br />  HttpRouteRule, PathMatcher and UrlMap.<br />  Structure is <a href=\"#nested_header_action\">documented below</a>.</p></li></ul><p><a name=\"nested_header_action\"></a>The <code>header_action</code> block supports:</p><ul><li><p><code>request_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the request prior to<br />  forwarding the request to the backendService.</p></li><li><p><code>request_headers_to_add</code> -<br />  (Optional)<br />  Headers to add to a matching request prior to forwarding the request to the backendService.<br />  Structure is <a href=\"#nested_request_headers_to_add\">documented below</a>.</p></li><li><p><code>response_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the response prior to sending the<br />  response back to the client.</p></li><li><p><code>response_headers_to_add</code> -<br />  (Optional)<br />  Headers to add the response prior to sending the response back to the client.<br />  Structure is <a href=\"#nested_response_headers_to_add\">documented below</a>.</p></li></ul><p><a name=\"nested_request_headers_to_add\"></a>The <code>request_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Optional)<br />  The name of the header to add.</p></li><li><p><code>header_value</code> -<br />  (Optional)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Optional)<br />  If false, headerValue is appended to any values that already exist for the header.<br />  If true, headerValue is set for the header, discarding any values that were set for that header.</p></li></ul><p><a name=\"nested_response_headers_to_add\"></a>The <code>response_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Optional)<br />  The name of the header to add.</p></li><li><p><code>header_value</code> -<br />  (Optional)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Optional)<br />  If false, headerValue is appended to any values that already exist for the header.<br />  If true, headerValue is set for the header, discarding any values that were set for that header.</p></li></ul><p><a name=\"nested_url_rewrite\"></a>The <code>url_rewrite</code> block supports:</p><ul><li><p><code>path_prefix_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected backend service, the matching portion of the<br />  request's path is replaced by pathPrefixRewrite.<br />  The value must be between 1 and 1024 characters.</p></li><li><p><code>host_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected service, the request's host header is replaced<br />  with contents of hostRewrite.<br />  The value must be between 1 and 255 characters.</p></li></ul><p><a name=\"nested_timeout\"></a>The <code>timeout</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Optional)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.<br />  Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are represented<br />  with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_retry_policy\"></a>The <code>retry_policy</code> block supports:</p><ul><li><code>retry_conditions</code> -<br />  (Optional)<br />  Specfies one or more conditions when this retry rule applies. Valid values are:</li><li>5xx: Loadbalancer will attempt a retry if the backend service responds with any 5xx response code,<br />    or if the backend service does not respond at all, example: disconnects, reset, read timeout,</li><li>connection failure, and refused streams.</li><li>gateway-error: Similar to 5xx, but only applies to response codes 502, 503 or 504.</li><li>connect-failure: Loadbalancer will retry on failures connecting to backend services,<br />    for example due to connection timeouts.</li><li>retriable-4xx: Loadbalancer will retry for retriable 4xx response codes.<br />    Currently the only retriable error supported is 409.</li><li>refused-stream:Loadbalancer will retry if the backend service resets the stream with a REFUSED_STREAM error code.<br />    This reset type indicates that it is safe to retry.</li><li>cancelled: Loadbalancer will retry if the gRPC status code in the response header is set to cancelled</li><li>deadline-exceeded: Loadbalancer will retry if the gRPC status code in the response header is set to deadline-exceeded</li><li>resource-exhausted: Loadbalancer will retry if the gRPC status code in the response header is set to resource-exhausted</li><li><p>unavailable: Loadbalancer will retry if the gRPC status code in the response header is set to unavailable</p></li><li><p><code>num_retries</code> -<br />  (Optional)<br />  Specifies the allowed number retries. This number must be &gt; 0. If not specified, defaults to 1.</p></li><li><p><code>per_try_timeout</code> -<br />  (Optional)<br />  Specifies a non-zero timeout per retry attempt.<br />  If not specified, will use the timeout set in HttpRouteAction. If timeout in HttpRouteAction is not set,<br />  will use the largest timeout among all backend services associated with the route.<br />  Structure is <a href=\"#nested_per_try_timeout\">documented below</a>.</p></li></ul><p><a name=\"nested_per_try_timeout\"></a>The <code>per_try_timeout</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Optional)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.<br />  Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are<br />  represented with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_request_mirror_policy\"></a>The <code>request_mirror_policy</code> block supports:</p><ul><li><code>backend_service</code> -<br />  (Required)<br />  The full or partial URL to the BackendService resource being mirrored to.</li></ul><p><a name=\"nested_cors_policy\"></a>The <code>cors_policy</code> block supports:</p><ul><li><p><code>allow_origins</code> -<br />  (Optional)<br />  Specifies the list of origins that will be allowed to do CORS requests.<br />  An origin is allowed if it matches either an item in allowOrigins or an item in allowOriginRegexes.</p></li><li><p><code>allow_origin_regexes</code> -<br />  (Optional)<br />  Specifies the regular expression patterns that match allowed origins. For regular expression grammar<br />  please see en.cppreference.com/w/cpp/regex/ecmascript<br />  An origin is allowed if it matches either an item in allowOrigins or an item in allowOriginRegexes.</p></li><li><p><code>allow_methods</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Methods header.</p></li><li><p><code>allow_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Headers header.</p></li><li><p><code>expose_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Expose-Headers header.</p></li><li><p><code>max_age</code> -<br />  (Optional)<br />  Specifies how long results of a preflight request can be cached in seconds.<br />  This translates to the Access-Control-Max-Age header.</p></li><li><p><code>allow_credentials</code> -<br />  (Optional)<br />  In response to a preflight request, setting this to true indicates that the actual request can include user credentials.<br />  This translates to the Access-Control-Allow-Credentials header.</p></li><li><p><code>disabled</code> -<br />  (Optional)<br />  If true, specifies the CORS policy is disabled. The default value is false, which indicates that the CORS policy is in effect.</p></li></ul><p><a name=\"nested_fault_injection_policy\"></a>The <code>fault_injection_policy</code> block supports:</p><ul><li><p><code>delay</code> -<br />  (Optional)<br />  The specification for how client requests are delayed as part of fault injection, before being sent to a backend service.<br />  Structure is <a href=\"#nested_delay\">documented below</a>.</p></li><li><p><code>abort</code> -<br />  (Optional)<br />  The specification for how client requests are aborted as part of fault injection.<br />  Structure is <a href=\"#nested_abort\">documented below</a>.</p></li></ul><p><a name=\"nested_delay\"></a>The <code>delay</code> block supports:</p><ul><li><p><code>fixed_delay</code> -<br />  (Optional)<br />  Specifies the value of the fixed delay interval.<br />  Structure is <a href=\"#nested_fixed_delay\">documented below</a>.</p></li><li><p><code>percentage</code> -<br />  (Optional)<br />  The percentage of traffic (connections/operations/requests) on which delay will be introduced as part of fault injection.<br />  The value must be between 0.0 and 100.0 inclusive.</p></li></ul><p><a name=\"nested_fixed_delay\"></a>The <code>fixed_delay</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Optional)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.<br />  Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are<br />  represented with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_abort\"></a>The <code>abort</code> block supports:</p><ul><li><p><code>http_status</code> -<br />  (Optional)<br />  The HTTP status code used to abort the request.<br />  The value must be between 200 and 599 inclusive.</p></li><li><p><code>percentage</code> -<br />  (Optional)<br />  The percentage of traffic (connections/operations/requests) which will be aborted as part of fault injection.<br />  The value must be between 0.0 and 100.0 inclusive.</p></li></ul><p><a name=\"nested_test\"></a>The <code>test</code> block supports:</p><ul><li><p><code>description</code> -<br />  (Optional)<br />  Description of this test case.</p></li><li><p><code>host</code> -<br />  (Required)<br />  Host portion of the URL.</p></li><li><p><code>path</code> -<br />  (Required)<br />  Path portion of the URL.</p></li><li><p><code>service</code> -<br />  (Required)<br />  The backend service or backend bucket link that should be matched by this test.</p></li></ul><p><a name=\"nested_default_url_redirect\"></a>The <code>default_url_redirect</code> block supports:</p><ul><li><p><code>host_redirect</code> -<br />  (Optional)<br />  The host that will be used in the redirect response instead of the one that was<br />  supplied in the request. The value must be between 1 and 255 characters.</p></li><li><p><code>https_redirect</code> -<br />  (Optional)<br />  If set to true, the URL scheme in the redirected request is set to https. If set to<br />  false, the URL scheme of the redirected request will remain the same as that of the<br />  request. This must only be set for UrlMaps used in TargetHttpProxys. Setting this<br />  true for TargetHttpsProxy is not permitted. The default is set to false.</p></li><li><p><code>path_redirect</code> -<br />  (Optional)<br />  The path that will be used in the redirect response instead of the one that was<br />  supplied in the request. pathRedirect cannot be supplied together with<br />  prefixRedirect. Supply one alone or neither. If neither is supplied, the path of the<br />  original request will be used for the redirect. The value must be between 1 and 1024<br />  characters.</p></li><li><p><code>prefix_redirect</code> -<br />  (Optional)<br />  The prefix that replaces the prefixMatch specified in the HttpRouteRuleMatch,<br />  retaining the remaining portion of the URL before redirecting the request.<br />  prefixRedirect cannot be supplied together with pathRedirect. Supply one alone or<br />  neither. If neither is supplied, the path of the original request will be used for<br />  the redirect. The value must be between 1 and 1024 characters.</p></li><li><p><code>redirect_response_code</code> -<br />  (Optional)<br />  The HTTP Status code to use for this RedirectAction. Supported values are:</p></li><li>MOVED_PERMANENTLY_DEFAULT, which is the default value and corresponds to 301.</li><li>FOUND, which corresponds to 302.</li><li>SEE_OTHER which corresponds to 303.</li><li>TEMPORARY_REDIRECT, which corresponds to 307. In this case, the request method<br />  will be retained.</li><li><p>PERMANENT_REDIRECT, which corresponds to 308. In this case,<br />  the request method will be retained.</p></li><li><p><code>strip_query</code> -<br />  (Required)<br />  If set to true, any accompanying query portion of the original URL is removed prior<br />  to redirecting the request. If set to false, the query portion of the original URL is<br />  retained. The default is set to false.<br />   This field is required to ensure an empty block is not set. The normal default value is false.</p></li></ul><p><a name=\"nested_default_route_action\"></a>The <code>default_route_action</code> block supports:</p><ul><li><p><code>weighted_backend_services</code> -<br />  (Optional)<br />  A list of weighted backend services to send traffic to when a route match occurs.<br />  The weights determine the fraction of traffic that flows to their corresponding backend service.<br />  If all traffic needs to go to a single backend service, there must be one weightedBackendService<br />  with weight set to a non 0 number.<br />  Once a backendService is identified and before forwarding the request to the backend service,<br />  advanced routing actions like Url rewrites and header transformations are applied depending on<br />  additional settings specified in this HttpRouteAction.<br />  Structure is <a href=\"#nested_weighted_backend_services\">documented below</a>.</p></li><li><p><code>url_rewrite</code> -<br />  (Optional)<br />  The spec to modify the URL of the request, prior to forwarding the request to the matched service.<br />  Structure is <a href=\"#nested_url_rewrite\">documented below</a>.</p></li><li><p><code>timeout</code> -<br />  (Optional)<br />  Specifies the timeout for the selected route. Timeout is computed from the time the request has been<br />  fully processed (i.e. end-of-stream) up until the response has been completely processed. Timeout includes all retries.<br />  If not specified, will use the largest timeout among all backend services associated with the route.<br />  Structure is <a href=\"#nested_timeout\">documented below</a>.</p></li><li><p><code>retry_policy</code> -<br />  (Optional)<br />  Specifies the retry policy associated with this route.<br />  Structure is <a href=\"#nested_retry_policy\">documented below</a>.</p></li><li><p><code>request_mirror_policy</code> -<br />  (Optional)<br />  Specifies the policy on how requests intended for the route's backends are shadowed to a separate mirrored backend service.<br />  Loadbalancer does not wait for responses from the shadow service. Prior to sending traffic to the shadow service,<br />  the host / authority header is suffixed with -shadow.<br />  Structure is <a href=\"#nested_request_mirror_policy\">documented below</a>.</p></li><li><p><code>cors_policy</code> -<br />  (Optional)<br />  The specification for allowing client side cross-origin requests. Please see<br /><a href=\"https://www.w3.org/TR/cors/\">W3C Recommendation for Cross Origin Resource Sharing</a><br />  Structure is <a href=\"#nested_cors_policy\">documented below</a>.</p></li><li><p><code>fault_injection_policy</code> -<br />  (Optional)<br />  The specification for fault injection introduced into traffic to test the resiliency of clients to backend service failure.<br />  As part of fault injection, when clients send requests to a backend service, delays can be introduced by Loadbalancer on a<br />  percentage of requests before sending those request to the backend service. Similarly requests from clients can be aborted<br />  by the Loadbalancer for a percentage of requests.<br />  timeout and retryPolicy will be ignored by clients that are configured with a faultInjectionPolicy.<br />  Structure is <a href=\"#nested_fault_injection_policy\">documented below</a>.</p></li></ul><p><a name=\"nested_weighted_backend_services\"></a>The <code>weighted_backend_services</code> block supports:</p><ul><li><p><code>backend_service</code> -<br />  (Optional)<br />  The full or partial URL to the default BackendService resource. Before forwarding the<br />  request to backendService, the loadbalancer applies any relevant headerActions<br />  specified as part of this backendServiceWeight.</p></li><li><p><code>weight</code> -<br />  (Optional)<br />  Specifies the fraction of traffic sent to backendService, computed as<br />  weight / (sum of all weightedBackendService weights in routeAction) .<br />  The selection of a backend service is determined only for new traffic. Once a user's request<br />  has been directed to a backendService, subsequent requests will be sent to the same backendService<br />  as determined by the BackendService's session affinity policy.<br />  The value must be between 0 and 1000</p></li><li><p><code>header_action</code> -<br />  (Optional)<br />  Specifies changes to request and response headers that need to take effect for<br />  the selected backendService.<br />  headerAction specified here take effect before headerAction in the enclosing<br />  HttpRouteRule, PathMatcher and UrlMap.<br />  Structure is <a href=\"#nested_header_action\">documented below</a>.</p></li></ul><p><a name=\"nested_header_action\"></a>The <code>header_action</code> block supports:</p><ul><li><p><code>request_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the request prior to<br />  forwarding the request to the backendService.</p></li><li><p><code>request_headers_to_add</code> -<br />  (Optional)<br />  Headers to add to a matching request prior to forwarding the request to the backendService.<br />  Structure is <a href=\"#nested_request_headers_to_add\">documented below</a>.</p></li><li><p><code>response_headers_to_remove</code> -<br />  (Optional)<br />  A list of header names for headers that need to be removed from the response prior to sending the<br />  response back to the client.</p></li><li><p><code>response_headers_to_add</code> -<br />  (Optional)<br />  Headers to add the response prior to sending the response back to the client.<br />  Structure is <a href=\"#nested_response_headers_to_add\">documented below</a>.</p></li></ul><p><a name=\"nested_request_headers_to_add\"></a>The <code>request_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Optional)<br />  The name of the header to add.</p></li><li><p><code>header_value</code> -<br />  (Optional)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Optional)<br />  If false, headerValue is appended to any values that already exist for the header.<br />  If true, headerValue is set for the header, discarding any values that were set for that header.</p></li></ul><p><a name=\"nested_response_headers_to_add\"></a>The <code>response_headers_to_add</code> block supports:</p><ul><li><p><code>header_name</code> -<br />  (Optional)<br />  The name of the header to add.</p></li><li><p><code>header_value</code> -<br />  (Optional)<br />  The value of the header to add.</p></li><li><p><code>replace</code> -<br />  (Optional)<br />  If false, headerValue is appended to any values that already exist for the header.<br />  If true, headerValue is set for the header, discarding any values that were set for that header.</p></li></ul><p><a name=\"nested_url_rewrite\"></a>The <code>url_rewrite</code> block supports:</p><ul><li><p><code>path_prefix_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected backend service, the matching portion of the<br />  request's path is replaced by pathPrefixRewrite.<br />  The value must be between 1 and 1024 characters.</p></li><li><p><code>host_rewrite</code> -<br />  (Optional)<br />  Prior to forwarding the request to the selected service, the request's host header is replaced<br />  with contents of hostRewrite.<br />  The value must be between 1 and 255 characters.</p></li></ul><p><a name=\"nested_timeout\"></a>The <code>timeout</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Optional)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.<br />  Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are represented<br />  with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_retry_policy\"></a>The <code>retry_policy</code> block supports:</p><ul><li><code>retry_conditions</code> -<br />  (Optional)<br />  Specfies one or more conditions when this retry rule applies. Valid values are:</li><li>5xx: Loadbalancer will attempt a retry if the backend service responds with any 5xx response code,<br />    or if the backend service does not respond at all, example: disconnects, reset, read timeout,</li><li>connection failure, and refused streams.</li><li>gateway-error: Similar to 5xx, but only applies to response codes 502, 503 or 504.</li><li>connect-failure: Loadbalancer will retry on failures connecting to backend services,<br />    for example due to connection timeouts.</li><li>retriable-4xx: Loadbalancer will retry for retriable 4xx response codes.<br />    Currently the only retriable error supported is 409.</li><li>refused-stream:Loadbalancer will retry if the backend service resets the stream with a REFUSED_STREAM error code.<br />    This reset type indicates that it is safe to retry.</li><li>cancelled: Loadbalancer will retry if the gRPC status code in the response header is set to cancelled</li><li>deadline-exceeded: Loadbalancer will retry if the gRPC status code in the response header is set to deadline-exceeded</li><li>resource-exhausted: Loadbalancer will retry if the gRPC status code in the response header is set to resource-exhausted</li><li><p>unavailable: Loadbalancer will retry if the gRPC status code in the response header is set to unavailable</p></li><li><p><code>num_retries</code> -<br />  (Optional)<br />  Specifies the allowed number retries. This number must be &gt; 0. If not specified, defaults to 1.</p></li><li><p><code>per_try_timeout</code> -<br />  (Optional)<br />  Specifies a non-zero timeout per retry attempt.<br />  If not specified, will use the timeout set in HttpRouteAction. If timeout in HttpRouteAction is not set,<br />  will use the largest timeout among all backend services associated with the route.<br />  Structure is <a href=\"#nested_per_try_timeout\">documented below</a>.</p></li></ul><p><a name=\"nested_per_try_timeout\"></a>The <code>per_try_timeout</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Optional)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.<br />  Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are<br />  represented with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_request_mirror_policy\"></a>The <code>request_mirror_policy</code> block supports:</p><ul><li><code>backend_service</code> -<br />  (Required)<br />  The full or partial URL to the BackendService resource being mirrored to.</li></ul><p><a name=\"nested_cors_policy\"></a>The <code>cors_policy</code> block supports:</p><ul><li><p><code>allow_origins</code> -<br />  (Optional)<br />  Specifies the list of origins that will be allowed to do CORS requests.<br />  An origin is allowed if it matches either an item in allowOrigins or an item in allowOriginRegexes.</p></li><li><p><code>allow_origin_regexes</code> -<br />  (Optional)<br />  Specifies the regular expression patterns that match allowed origins. For regular expression grammar<br />  please see en.cppreference.com/w/cpp/regex/ecmascript<br />  An origin is allowed if it matches either an item in allowOrigins or an item in allowOriginRegexes.</p></li><li><p><code>allow_methods</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Methods header.</p></li><li><p><code>allow_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Allow-Headers header.</p></li><li><p><code>expose_headers</code> -<br />  (Optional)<br />  Specifies the content for the Access-Control-Expose-Headers header.</p></li><li><p><code>max_age</code> -<br />  (Optional)<br />  Specifies how long results of a preflight request can be cached in seconds.<br />  This translates to the Access-Control-Max-Age header.</p></li><li><p><code>allow_credentials</code> -<br />  (Optional)<br />  In response to a preflight request, setting this to true indicates that the actual request can include user credentials.<br />  This translates to the Access-Control-Allow-Credentials header.</p></li><li><p><code>disabled</code> -<br />  (Optional)<br />  If true, specifies the CORS policy is disabled. The default value is false, which indicates that the CORS policy is in effect.</p></li></ul><p><a name=\"nested_fault_injection_policy\"></a>The <code>fault_injection_policy</code> block supports:</p><ul><li><p><code>delay</code> -<br />  (Optional)<br />  The specification for how client requests are delayed as part of fault injection, before being sent to a backend service.<br />  Structure is <a href=\"#nested_delay\">documented below</a>.</p></li><li><p><code>abort</code> -<br />  (Optional)<br />  The specification for how client requests are aborted as part of fault injection.<br />  Structure is <a href=\"#nested_abort\">documented below</a>.</p></li></ul><p><a name=\"nested_delay\"></a>The <code>delay</code> block supports:</p><ul><li><p><code>fixed_delay</code> -<br />  (Optional)<br />  Specifies the value of the fixed delay interval.<br />  Structure is <a href=\"#nested_fixed_delay\">documented below</a>.</p></li><li><p><code>percentage</code> -<br />  (Optional)<br />  The percentage of traffic (connections/operations/requests) on which delay will be introduced as part of fault injection.<br />  The value must be between 0.0 and 100.0 inclusive.</p></li></ul><p><a name=\"nested_fixed_delay\"></a>The <code>fixed_delay</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Optional)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000 inclusive.<br />  Note: these bounds are computed from: 60 sec/min * 60 min/hr * 24 hr/day * 365.25 days/year * 10000 years</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations less than one second are<br />  represented with a 0 seconds field and a positive nanos field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_abort\"></a>The <code>abort</code> block supports:</p><ul><li><p><code>http_status</code> -<br />  (Optional)<br />  The HTTP status code used to abort the request.<br />  The value must be between 200 and 599 inclusive.</p></li><li><p><code>percentage</code> -<br />  (Optional)<br />  The percentage of traffic (connections/operations/requests) which will be aborted as part of fault injection.<br />  The value must be between 0.0 and 100.0 inclusive.</p></li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are exported:</p><ul><li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/global/urlMaps/{{name}}</code></p></li><li><p><code>creation_timestamp</code> -<br />  Creation timestamp in RFC3339 text format.</p></li><li><p><code>map_id</code> -<br />  The unique identifier for the resource.</p></li><li><p><code>fingerprint</code> -<br />  Fingerprint of this resource. A hash of the contents stored in this object. This<br />  field is used in optimistic locking.</p></li><li><code>self_link</code> - The URI of the created resource.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a> configuration options:</p><ul><li><code>create</code> - Default is 20 minutes.</li><li><code>update</code> - Default is 20 minutes.</li><li><code>delete</code> - Default is 20 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>UrlMap can be imported using any of these accepted formats:</p><p>$ terraform import google_compute_url_map.default projects/{{project}}/global/urlMaps/{{name}}<br />$ terraform import google_compute_url_map.default {{project}}/{{name}}<br />$ terraform import google_compute_url_map.default {{name}}</p>", "user-project-overrides": "<h2 id=\"user-project-overrides\">User Project Overrides</h2><p>This resource supports <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override\">User Project Overrides</a>.</p>", "description": "<h1 id=\"google_compute_url_map\">google_compute_url_map</h1><p>UrlMaps are used to route requests to a backend service based on rules<br />that you define for the host and path of an incoming URL.</p><p>To get more information about UrlMap, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/rest/v1/urlMaps\">API documentation</a></li></ul><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=url_map_bucket_and_service&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>"}