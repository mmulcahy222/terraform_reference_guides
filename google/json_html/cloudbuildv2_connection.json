{"": "<h1 id=\"-_2\">----------------------------------------------------------------------------</h1><p>subcategory: \"Cloud Build v2\"<br />description: |-<br />  The Cloudbuildv2 Connection resource</p><hr />", "auto-generated-code-type-dcl": "<h1 id=\"auto-generated-code-type-dcl\"><strong><em>     AUTO GENERATED CODE    </em></strong>    Type: DCL     ***</h1>", "this-file-is-managed-by-magic-modules-https-github-com-googlecloudplatform-magic-modules": "<h1 id=\"this-file-is-managed-by-magic-modules-httpsgithubcomgooglecloudplatformmagic-modules\">This file is managed by Magic Modules (https:#github.com/GoogleCloudPlatform/magic-modules)</h1>", "and-is-based-on-the-dcl-https-github-com-googlecloudplatform-declarative-resource-client-library": "<h1 id=\"and-is-based-on-the-dcl-httpsgithubcomgooglecloudplatformdeclarative-resource-client-library\">and is based on the DCL (https:#github.com/GoogleCloudPlatform/declarative-resource-client-library).</h1>", "changes-will-need-to-be-made-to-the-dcl-or-magic-modules-instead-of-here": "<h1 id=\"changes-will-need-to-be-made-to-the-dcl-or-magic-modules-instead-of-here\">Changes will need to be made to the DCL or Magic Modules instead of here.</h1>", "we-are-not-currently-able-to-accept-contributions-to-this-file-if-changes": "<h1 id=\"we-are-not-currently-able-to-accept-contributions-to-this-file-if-changes\">We are not currently able to accept contributions to this file. If changes</h1>", "are-required-please-file-an-issue-at-https-github-com-hashicorp-terraform-provider-google-issues-new-choose": "<h1 id=\"are-required-please-file-an-issue-at-httpsgithubcomhashicorpterraform-provider-googleissuesnewchoose\">are required, please file an issue at https:#github.com/hashicorp/terraform-provider-google/issues/new/choose</h1>", "google-cloudbuildv2-connection": "<h1 id=\"google_cloudbuildv2_connection\">google_cloudbuildv2_connection</h1><p>The Cloudbuildv2 Connection resource</p>", "example-usage---ghe": "<h2 id=\"example-usage-ghe\">Example Usage - ghe</h2><p><br />resource \"google_secret_manager_secret\" \"private-key-secret\" {<br />  secret_id = \"ghe-pk-secret\"</p><p>replication {<br />    auto {}<br />  }<br />}</p><p>resource \"google_secret_manager_secret_version\" \"private-key-secret-version\" {<br />  secret = google_secret_manager_secret.private-key-secret.id<br />  secret_data = file(\"private-key.pem\")<br />}</p><p>resource \"google_secret_manager_secret\" \"webhook-secret-secret\" {<br />  secret_id = \"github-token-secret\"</p><p>replication {<br />    auto {}<br />  }<br />}</p><p>resource \"google_secret_manager_secret_version\" \"webhook-secret-secret-version\" {<br />  secret = google_secret_manager_secret.webhook-secret-secret.id<br />  secret_data = \"<webhook-secret-data>\"<br />}</p><p>data \"google_iam_policy\" \"p4sa-secretAccessor\" {<br />  binding {<br />    role = \"roles/secretmanager.secretAccessor\"<br />    // Here, 123456789 is the Google Cloud project number for the project that contains the connection.<br />    members = [\"serviceAccount:service-123456789@gcp-sa-cloudbuild.iam.gserviceaccount.com\"]<br />  }<br />}</p><p>resource \"google_secret_manager_secret_iam_policy\" \"policy-pk\" {<br />  secret_id = google_secret_manager_secret.private-key-secret.secret_id<br />  policy_data = data.google_iam_policy.p4sa-secretAccessor.policy_data<br />}</p><p>resource \"google_secret_manager_secret_iam_policy\" \"policy-whs\" {<br />  secret_id = google_secret_manager_secret.webhook-secret-secret.secret_id<br />  policy_data = data.google_iam_policy.p4sa-secretAccessor.policy_data<br />}</p><p>resource \"google_cloudbuildv2_connection\" \"my-connection\" {<br />  location = \"us-central1\"<br />  name = \"my-terraform-ghe-connection\"</p><p>github_enterprise_config {<br />    host_uri = \"https://ghe.com\"<br />    private_key_secret_version = google_secret_manager_secret_version.private-key-secret-version.id<br />    webhook_secret_secret_version = google_secret_manager_secret_version.webhook-secret-secret-version.id<br />    app_id = 200<br />    app_slug = \"gcb-app\"<br />    app_installation_id = 300<br />  }</p><p>depends_on = [<br />    google_secret_manager_secret_iam_policy.policy-pk,<br />    google_secret_manager_secret_iam_policy.policy-whs<br />  ]<br />}</p><p></p>", "example-usage---github-connection": "<h2 id=\"example-usage-github-connection\">Example Usage - GitHub Connection</h2><p>Creates a Connection to github.com<br /><br />resource \"google_secret_manager_secret\" \"github-token-secret\" {<br />  secret_id = \"github-token-secret\"</p><p>replication {<br />    auto {}<br />  }<br />}</p><p>resource \"google_secret_manager_secret_version\" \"github-token-secret-version\" {<br />  secret = google_secret_manager_secret.github-token-secret.id<br />  secret_data = file(\"my-github-token.txt\")<br />}</p><p>data \"google_iam_policy\" \"p4sa-secretAccessor\" {<br />  binding {<br />    role = \"roles/secretmanager.secretAccessor\"<br />    // Here, 123456789 is the Google Cloud project number for my-project-name.<br />    members = [\"serviceAccount:service-123456789@gcp-sa-cloudbuild.iam.gserviceaccount.com\"]<br />  }<br />}</p><p>resource \"google_secret_manager_secret_iam_policy\" \"policy\" {<br />  secret_id = google_secret_manager_secret.github-token-secret.secret_id<br />  policy_data = data.google_iam_policy.p4sa-secretAccessor.policy_data<br />}</p><p>resource \"google_cloudbuildv2_connection\" \"my-connection\" {<br />  location = \"us-west1\"<br />  name = \"my-connection\"</p><p>github_config {<br />    app_installation_id = 123123<br />    authorizer_credential {<br />      oauth_token_secret_version = google_secret_manager_secret_version.github-token-secret-version.id<br />    }<br />  }<br />}</p><p></p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>location</code> -<br />  (Required)<br />  The location for the resource</p></li><li><p><code>name</code> -<br />  (Required)<br />  Immutable. The resource name of the connection, in the format <code>projects/{project}/locations/{location}/connections/{connection_id}</code>.</p></li></ul><p>The <code>authorizer_credential</code> block supports:</p><ul><li><p><code>user_token_secret_version</code> -<br />  (Required)<br />  Required. A SecretManager resource containing the user token that authorizes the Cloud Build connection. Format: <code>projects/*/secrets/*/versions/*</code>.</p></li><li><p><code>username</code> -<br />  Output only. The username associated to this token.</p></li></ul><p>The <code>read_authorizer_credential</code> block supports:</p><ul><li><p><code>user_token_secret_version</code> -<br />  (Required)<br />  Required. A SecretManager resource containing the user token that authorizes the Cloud Build connection. Format: <code>projects/*/secrets/*/versions/*</code>.</p></li><li><p><code>username</code> -<br />  Output only. The username associated to this token.</p></li></ul><hr /><ul><li><p><code>annotations</code> -<br />  (Optional)<br />  Allows clients to store small amounts of arbitrary data.</p></li><li><p><code>disabled</code> -<br />  (Optional)<br />  If disabled is set to true, functionality is disabled for this connection. Repository based API methods and webhooks processing for repositories in this connection will be disabled.</p></li><li><p><code>github_config</code> -<br />  (Optional)<br />  Configuration for connections to github.com.</p></li><li><p><code>github_enterprise_config</code> -<br />  (Optional)<br />  Configuration for connections to an instance of GitHub Enterprise.</p></li><li><p><code>gitlab_config</code> -<br />  (Optional)<br />  Configuration for connections to gitlab.com or an instance of GitLab Enterprise.</p></li><li><p><code>project</code> -<br />  (Optional)<br />  The project for the resource</p></li></ul><p>The <code>github_config</code> block supports:</p><ul><li><p><code>app_installation_id</code> -<br />  (Optional)<br />  GitHub App installation id.</p></li><li><p><code>authorizer_credential</code> -<br />  (Optional)<br />  OAuth credential of the account that authorized the Cloud Build GitHub App. It is recommended to use a robot account instead of a human user account. The OAuth token must be tied to the Cloud Build GitHub App.</p></li></ul><p>The <code>authorizer_credential</code> block supports:</p><ul><li><p><code>oauth_token_secret_version</code> -<br />  (Optional)<br />  A SecretManager resource containing the OAuth token that authorizes the Cloud Build connection. Format: <code>projects/*/secrets/*/versions/*</code>.</p></li><li><p><code>username</code> -<br />  Output only. The username associated to this token.</p></li></ul><p>The <code>github_enterprise_config</code> block supports:</p><ul><li><p><code>app_id</code> -<br />  (Optional)<br />  Id of the GitHub App created from the manifest.</p></li><li><p><code>app_installation_id</code> -<br />  (Optional)<br />  ID of the installation of the GitHub App.</p></li><li><p><code>app_slug</code> -<br />  (Optional)<br />  The URL-friendly name of the GitHub App.</p></li><li><p><code>host_uri</code> -<br />  (Required)<br />  Required. The URI of the GitHub Enterprise host this connection is for.</p></li><li><p><code>private_key_secret_version</code> -<br />  (Optional)<br />  SecretManager resource containing the private key of the GitHub App, formatted as <code>projects/*/secrets/*/versions/*</code>.</p></li><li><p><code>service_directory_config</code> -<br />  (Optional)<br />  Configuration for using Service Directory to privately connect to a GitHub Enterprise server. This should only be set if the GitHub Enterprise server is hosted on-premises and not reachable by public internet. If this field is left empty, calls to the GitHub Enterprise server will be made over the public internet.</p></li><li><p><code>ssl_ca</code> -<br />  (Optional)<br />  SSL certificate to use for requests to GitHub Enterprise.</p></li><li><p><code>webhook_secret_secret_version</code> -<br />  (Optional)<br />  SecretManager resource containing the webhook secret of the GitHub App, formatted as <code>projects/*/secrets/*/versions/*</code>.</p></li></ul><p>The <code>service_directory_config</code> block supports:</p><ul><li><code>service</code> -<br />  (Required)<br />  Required. The Service Directory service name. Format: projects/{project}/locations/{location}/namespaces/{namespace}/services/{service}.</li></ul><p>The <code>gitlab_config</code> block supports:</p><ul><li><p><code>authorizer_credential</code> -<br />  (Required)<br />  Required. A GitLab personal access token with the <code>api</code> scope access.</p></li><li><p><code>host_uri</code> -<br />  (Optional)<br />  The URI of the GitLab Enterprise host this connection is for. If not specified, the default value is https://gitlab.com.</p></li><li><p><code>read_authorizer_credential</code> -<br />  (Required)<br />  Required. A GitLab personal access token with the minimum <code>read_api</code> scope access.</p></li><li><p><code>server_version</code> -<br />  Output only. Version of the GitLab Enterprise server running on the <code>host_uri</code>.</p></li><li><p><code>service_directory_config</code> -<br />  (Optional)<br />  Configuration for using Service Directory to privately connect to a GitLab Enterprise server. This should only be set if the GitLab Enterprise server is hosted on-premises and not reachable by public internet. If this field is left empty, calls to the GitLab Enterprise server will be made over the public internet.</p></li><li><p><code>ssl_ca</code> -<br />  (Optional)<br />  SSL certificate to use for requests to GitLab Enterprise.</p></li><li><p><code>webhook_secret_secret_version</code> -<br />  (Required)<br />  Required. Immutable. SecretManager resource containing the webhook secret of a GitLab Enterprise project, formatted as <code>projects/*/secrets/*/versions/*</code>.</p></li></ul><p>The <code>service_directory_config</code> block supports:</p><ul><li><code>service</code> -<br />  (Required)<br />  Required. The Service Directory service name. Format: projects/{project}/locations/{location}/namespaces/{namespace}/services/{service}.</li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are exported:</p><ul><li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/locations/{{location}}/connections/{{name}}</code></p></li><li><p><code>create_time</code> -<br />  Output only. Server assigned timestamp for when the connection was created.</p></li><li><p><code>etag</code> -<br />  This checksum is computed by the server based on the value of other fields, and may be sent on update and delete requests to ensure the client has an up-to-date value before proceeding.</p></li><li><p><code>installation_state</code> -<br />  Output only. Installation state of the Connection.</p></li><li><p><code>reconciling</code> -<br />  Output only. Set to true when the connection is being set up or updated in the background.</p></li><li><p><code>update_time</code> -<br />  Output only. Server assigned timestamp for when the connection was updated.</p></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a> configuration options:</p><ul><li><code>create</code> - Default is 20 minutes.</li><li><code>update</code> - Default is 20 minutes.</li><li><code>delete</code> - Default is 20 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Connection can be imported using any of these accepted formats:</p><p><code>$ terraform import google_cloudbuildv2_connection.default projects/{{project}}/locations/{{location}}/connections/{{name}}$ terraform import google_cloudbuildv2_connection.default {{project}}/{{location}}/{{name}}$ terraform import google_cloudbuildv2_connection.default {{location}}/{{name}}</code></p>", "description": "<h1 id=\"google_cloudbuildv2_connection\">google_cloudbuildv2_connection</h1><p>The Cloudbuildv2 Connection resource</p>"}