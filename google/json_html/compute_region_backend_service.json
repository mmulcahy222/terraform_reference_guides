{"": "<h1 id=\"-_2\">----------------------------------------------------------------------------</h1><p>subcategory: \"Compute Engine\"<br />description: |-<br />  A Region Backend Service defines a regionally-scoped group of virtual<br />  machines that will serve traffic for load balancing.</p><hr />", "auto-generated-code-type-mmv1": "<h1 id=\"auto-generated-code-type-mmv1\"><strong><em>     AUTO GENERATED CODE    </em></strong>    Type: MMv1     ***</h1>", "this-file-is-automatically-generated-by-magic-modules-and-manual": "<h1 id=\"this-file-is-automatically-generated-by-magic-modules-and-manual\">This file is automatically generated by Magic Modules and manual</h1>", "changes-will-be-clobbered-when-the-file-is-regenerated": "<h1 id=\"changes-will-be-clobbered-when-the-file-is-regenerated\">changes will be clobbered when the file is regenerated.</h1>", "please-read-more-about-how-to-change-this-file-in": "<h1 id=\"please-read-more-about-how-to-change-this-file-in\">Please read more about how to change this file in</h1>", "github-contributing-md": "<h1 id=\"githubcontributingmd\">.github/CONTRIBUTING.md.</h1>", "google-compute-region-backend-service": "<h1 id=\"google_compute_region_backend_service\">google_compute_region_backend_service</h1><p>A Region Backend Service defines a regionally-scoped group of virtual<br />machines that will serve traffic for load balancing.</p><p>To get more information about RegionBackendService, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/latest/regionBackendServices\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/compute/docs/load-balancing/internal/\">Internal TCP/UDP Load Balancing</a></li></ul></li></ul><p>~&gt; <strong>Warning:</strong> All arguments including the following potentially sensitive<br />values will be stored in the raw state as plain text: <code>iap.oauth2_client_secret</code>, <code>iap.oauth2_client_secret_sha256</code>.<br /><a href=\"https://www.terraform.io/language/state/sensitive-data\">Read more about sensitive data in state</a>.</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_basic&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-basic": "<h2 id=\"example-usage-region-backend-service-basic\">Example Usage - Region Backend Service Basic</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  name                            = \"region-service\"<br />  region                          = \"us-central1\"<br />  health_checks                   = [google_compute_health_check.default.id]<br />  connection_draining_timeout_sec = 10<br />  session_affinity                = \"CLIENT_IP\"<br />}</p><p>resource \"google_compute_health_check\" \"default\" {<br />  name               = \"rbs-health-check\"<br />  check_interval_sec = 1<br />  timeout_sec        = 1</p><p>tcp_health_check {<br />    port = \"80\"<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_cache&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-cache": "<h2 id=\"example-usage-region-backend-service-cache\">Example Usage - Region Backend Service Cache</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  provider = google-beta</p><p>name                            = \"region-service\"<br />  region                          = \"us-central1\"<br />  health_checks                   = [google_compute_region_health_check.default.id]<br />  enable_cdn  = true<br />  cdn_policy {<br />    cache_mode = \"CACHE_ALL_STATIC\"<br />    default_ttl = 3600<br />    client_ttl  = 7200<br />    max_ttl     = 10800<br />    negative_caching = true<br />    signed_url_cache_max_age_sec = 7200<br />  }</p><p>load_balancing_scheme = \"EXTERNAL\"<br />  protocol              = \"HTTP\"</p><p>}</p><p>resource \"google_compute_region_health_check\" \"default\" {<br />  provider = google-beta</p><p>name               = \"rbs-health-check\"<br />  region             = \"us-central1\"</p><p>http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_ilb_round_robin&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-ilb-round-robin": "<h2 id=\"example-usage-region-backend-service-ilb-round-robin\">Example Usage - Region Backend Service Ilb Round Robin</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  region = \"us-central1\"<br />  name = \"region-service\"<br />  health_checks = [google_compute_health_check.health_check.id]<br />  protocol = \"HTTP\"<br />  load_balancing_scheme = \"INTERNAL_MANAGED\"<br />  locality_lb_policy = \"ROUND_ROBIN\"<br />}</p><p>resource \"google_compute_health_check\" \"health_check\" {<br />  name               = \"rbs-health-check\"<br />  http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_external&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-external": "<h2 id=\"example-usage-region-backend-service-external\">Example Usage - Region Backend Service External</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  provider              = google-beta<br />  region                = \"us-central1\"<br />  name                  = \"region-service\"<br />  health_checks         = [google_compute_region_health_check.health_check.id]<br />  protocol              = \"TCP\"<br />  load_balancing_scheme = \"EXTERNAL\"<br />}</p><p>resource \"google_compute_region_health_check\" \"health_check\" {<br />  provider           = google-beta<br />  name               = \"rbs-health-check\"<br />  region             = \"us-central1\"</p><p>tcp_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_external_weighted&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-external-weighted": "<h2 id=\"example-usage-region-backend-service-external-weighted\">Example Usage - Region Backend Service External Weighted</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  region                = \"us-central1\"<br />  name                  = \"region-service\"<br />  health_checks         = [google_compute_region_health_check.health_check.id]<br />  protocol              = \"TCP\"<br />  load_balancing_scheme = \"EXTERNAL\"<br />  locality_lb_policy    = \"WEIGHTED_MAGLEV\"<br />}</p><p>resource \"google_compute_region_health_check\" \"health_check\" {<br />  name               = \"rbs-health-check\"<br />  region             = \"us-central1\"</p><p>http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_ilb_ring_hash&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-ilb-ring-hash": "<h2 id=\"example-usage-region-backend-service-ilb-ring-hash\">Example Usage - Region Backend Service Ilb Ring Hash</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  region = \"us-central1\"<br />  name = \"region-service\"<br />  health_checks = [google_compute_health_check.health_check.id]<br />  load_balancing_scheme = \"INTERNAL_MANAGED\"<br />  locality_lb_policy = \"RING_HASH\"<br />  session_affinity = \"HTTP_COOKIE\"<br />  protocol = \"HTTP\"<br />  circuit_breakers {<br />    max_connections = 10<br />  }<br />  consistent_hash {<br />    http_cookie {<br />      ttl {<br />        seconds = 11<br />        nanos = 1111<br />      }<br />      name = \"mycookie\"<br />    }<br />  }<br />  outlier_detection {<br />    consecutive_errors = 2<br />  }<br />}</p><p>resource \"google_compute_health_check\" \"health_check\" {<br />  name               = \"rbs-health-check\"<br />  http_health_check {<br />    port = 80<br />  }<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_balancing_mode&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-balancing-mode": "<h2 id=\"example-usage-region-backend-service-balancing-mode\">Example Usage - Region Backend Service Balancing Mode</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  load_balancing_scheme = \"INTERNAL_MANAGED\"</p><p>backend {<br />    group          = google_compute_region_instance_group_manager.rigm.instance_group<br />    balancing_mode = \"UTILIZATION\"<br />    capacity_scaler = 1.0<br />  }</p><p>region      = \"us-central1\"<br />  name        = \"region-service\"<br />  protocol    = \"HTTP\"<br />  timeout_sec = 10</p><p>health_checks = [google_compute_region_health_check.default.id]<br />}</p><p>data \"google_compute_image\" \"debian_image\" {<br />  family   = \"debian-11\"<br />  project  = \"debian-cloud\"<br />}</p><p>resource \"google_compute_region_instance_group_manager\" \"rigm\" {<br />  region   = \"us-central1\"<br />  name     = \"rbs-rigm\"<br />  version {<br />    instance_template = google_compute_instance_template.instance_template.id<br />    name              = \"primary\"<br />  }<br />  base_instance_name = \"internal-glb\"<br />  target_size        = 1<br />}</p><p>resource \"google_compute_instance_template\" \"instance_template\" {<br />  name         = \"template-region-service\"<br />  machine_type = \"e2-medium\"</p><p>network_interface {<br />    network    = google_compute_network.default.id<br />    subnetwork = google_compute_subnetwork.default.id<br />  }</p><p>disk {<br />    source_image = data.google_compute_image.debian_image.self_link<br />    auto_delete  = true<br />    boot         = true<br />  }</p><p>tags = [\"allow-ssh\", \"load-balanced-backend\"]<br />}</p><p>resource \"google_compute_region_health_check\" \"default\" {<br />  region = \"us-central1\"<br />  name   = \"rbs-health-check\"<br />  http_health_check {<br />    port_specification = \"USE_SERVING_PORT\"<br />  }<br />}</p><p>resource \"google_compute_network\" \"default\" {<br />  name                    = \"rbs-net\"<br />  auto_create_subnetworks = false<br />  routing_mode            = \"REGIONAL\"<br />}</p><p>resource \"google_compute_subnetwork\" \"default\" {<br />  name          = \"rbs-net-default\"<br />  ip_cidr_range = \"10.1.2.0/24\"<br />  region        = \"us-central1\"<br />  network       = google_compute_network.default.id<br />}</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_connection_tracking&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>", "example-usage---region-backend-service-connection-tracking": "<h2 id=\"example-usage-region-backend-service-connection-tracking\">Example Usage - Region Backend Service Connection Tracking</h2><p>resource \"google_compute_region_backend_service\" \"default\" {<br />  provider                        = google-beta<br />  name                            = \"region-service\"<br />  region                          = \"us-central1\"<br />  health_checks                   = [google_compute_region_health_check.health_check.id]<br />  connection_draining_timeout_sec = 10<br />  session_affinity                = \"CLIENT_IP\"<br />  protocol                        = \"TCP\"<br />  load_balancing_scheme           = \"EXTERNAL\"<br />  connection_tracking_policy {<br />    tracking_mode                                = \"PER_SESSION\"<br />    connection_persistence_on_unhealthy_backends = \"NEVER_PERSIST\"<br />    idle_timeout_sec                             = 60<br />    enable_strong_affinity                       = true<br />  }<br />}</p><p>resource \"google_compute_region_health_check\" \"health_check\" {<br />  provider           = google-beta<br />  name               = \"rbs-health-check\"<br />  region             = \"us-central1\"</p><p>tcp_health_check {<br />    port = 22<br />  }<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><code>name</code> -<br />  (Required)<br />  Name of the resource. Provided by the client when the resource is<br />  created. The name must be 1-63 characters long, and comply with<br />  RFC1035. Specifically, the name must be 1-63 characters long and match<br />  the regular expression <code>[a-z]([-a-z0-9]*[a-z0-9])?</code> which means the<br />  first character must be a lowercase letter, and all following<br />  characters must be a dash, lowercase letter, or digit, except the last<br />  character, which cannot be a dash.</li></ul><hr /><ul><li><p><code>affinity_cookie_ttl_sec</code> -<br />  (Optional)<br />  Lifetime of cookies in seconds if session_affinity is<br />  GENERATED_COOKIE. If set to 0, the cookie is non-persistent and lasts<br />  only until the end of the browser session (or equivalent). The<br />  maximum allowed value for TTL is one day.<br />  When the load balancing scheme is INTERNAL, this field is not used.</p></li><li><p><code>backend</code> -<br />  (Optional)<br />  The set of backends that serve this RegionBackendService.<br />  Structure is <a href=\"#nested_backend\">documented below</a>.</p></li><li><p><code>circuit_breakers</code> -<br />  (Optional)<br />  Settings controlling the volume of connections to a backend service. This field<br />  is applicable only when the <code>load_balancing_scheme</code> is set to INTERNAL_MANAGED<br />  and the <code>protocol</code> is set to HTTP, HTTPS, or HTTP2.<br />  Structure is <a href=\"#nested_circuit_breakers\">documented below</a>.</p></li><li><p><code>consistent_hash</code> -<br />  (Optional)<br />  Consistent Hash-based load balancing can be used to provide soft session<br />  affinity based on HTTP headers, cookies or other properties. This load balancing<br />  policy is applicable only for HTTP connections. The affinity to a particular<br />  destination host will be lost when one or more hosts are added/removed from the<br />  destination service. This field specifies parameters that control consistent<br />  hashing.<br />  This field only applies when all of the following are true -</p><ul><li><code>load_balancing_scheme</code> is set to INTERNAL_MANAGED</li><li><code>protocol</code> is set to HTTP, HTTPS, or HTTP2</li><li><code>locality_lb_policy</code> is set to MAGLEV or RING_HASH<br />  Structure is <a href=\"#nested_consistent_hash\">documented below</a>.</li></ul></li><li><p><code>cdn_policy</code> -<br />  (Optional)<br />  Cloud CDN configuration for this BackendService.<br />  Structure is <a href=\"#nested_cdn_policy\">documented below</a>.</p></li><li><p><code>connection_draining_timeout_sec</code> -<br />  (Optional)<br />  Time for which instance will be drained (not accept new<br />  connections, but still work to finish started).</p></li><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this resource.</p></li><li><p><code>failover_policy</code> -<br />  (Optional)<br />  Policy for failovers.<br />  Structure is <a href=\"#nested_failover_policy\">documented below</a>.</p></li><li><p><code>enable_cdn</code> -<br />  (Optional)<br />  If true, enable Cloud CDN for this RegionBackendService.</p></li><li><p><code>health_checks</code> -<br />  (Optional)<br />  The set of URLs to HealthCheck resources for health checking<br />  this RegionBackendService. Currently at most one health<br />  check can be specified.<br />  A health check must be specified unless the backend service uses an internet<br />  or serverless NEG as a backend.</p></li><li><p><code>iap</code> -<br />  (Optional)<br />  Settings for enabling Cloud Identity Aware Proxy<br />  Structure is <a href=\"#nested_iap\">documented below</a>.</p></li><li><p><code>load_balancing_scheme</code> -<br />  (Optional)<br />  Indicates what kind of load balancing this regional backend service<br />  will be used for. A backend service created for one type of load<br />  balancing cannot be used with the other(s). For more information, refer to<br /><a href=\"https://cloud.google.com/load-balancing/docs/backend-service\">Choosing a load balancer</a>.<br />  Default value is <code>INTERNAL</code>.<br />  Possible values are: <code>EXTERNAL</code>, <code>EXTERNAL_MANAGED</code>, <code>INTERNAL</code>, <code>INTERNAL_MANAGED</code>.</p></li><li><p><code>locality_lb_policy</code> -<br />  (Optional)<br />  The load balancing algorithm used within the scope of the locality.<br />  The possible values are:</p></li><li><code>ROUND_ROBIN</code>: This is a simple policy in which each healthy backend<br />                   is selected in round robin order.</li><li><code>LEAST_REQUEST</code>: An O(1) algorithm which selects two random healthy<br />                     hosts and picks the host which has fewer active requests.</li><li><code>RING_HASH</code>: The ring/modulo hash load balancer implements consistent<br />                 hashing to backends. The algorithm has the property that the<br />                 addition/removal of a host from a set of N hosts only affects<br />                 1/N of the requests.</li><li><code>RANDOM</code>: The load balancer selects a random healthy host.</li><li><code>ORIGINAL_DESTINATION</code>: Backend host is selected based on the client<br />                            connection metadata, i.e., connections are opened<br />                            to the same address as the destination address of<br />                            the incoming connection before the connection<br />                            was redirected to the load balancer.</li><li><code>MAGLEV</code>: used as a drop in replacement for the ring hash load balancer.<br />              Maglev is not as stable as ring hash but has faster table lookup<br />              build times and host selection times. For more information about<br />              Maglev, refer to https://ai.google/research/pubs/pub44824</li><li><code>WEIGHTED_MAGLEV</code>: Per-instance weighted Load Balancing via health check<br />                       reported weights. If set, the Backend Service must<br />                       configure a non legacy HTTP-based Health Check, and<br />                       health check replies are expected to contain<br />                       non-standard HTTP response header field<br />                       X-Load-Balancing-Endpoint-Weight to specify the<br />                       per-instance weights. If set, Load Balancing is weight<br />                       based on the per-instance weights reported in the last<br />                       processed health check replies, as long as every<br />                       instance either reported a valid weight or had<br />                       UNAVAILABLE_WEIGHT. Otherwise, Load Balancing remains<br />                       equal-weight.</li></ul><p>This field is applicable to either:<br />  * A regional backend service with the service_protocol set to HTTP, HTTPS, or HTTP2,<br />    and loadBalancingScheme set to INTERNAL_MANAGED.<br />  * A global backend service with the load_balancing_scheme set to INTERNAL_SELF_MANAGED.<br />  * A regional backend service with loadBalancingScheme set to EXTERNAL (External Network<br />    Load Balancing). Only MAGLEV and WEIGHTED_MAGLEV values are possible for External<br />    Network Load Balancing. The default is MAGLEV.</p><p>If session_affinity is not NONE, and this field is not set to MAGLEV, WEIGHTED_MAGLEV,<br />  or RING_HASH, session affinity settings will not take effect.<br />  Only ROUND_ROBIN and RING_HASH are supported when the backend service is referenced<br />  by a URL map that is bound to target gRPC proxy that has validate_for_proxyless<br />  field set to true.<br />  Possible values are: <code>ROUND_ROBIN</code>, <code>LEAST_REQUEST</code>, <code>RING_HASH</code>, <code>RANDOM</code>, <code>ORIGINAL_DESTINATION</code>, <code>MAGLEV</code>, <code>WEIGHTED_MAGLEV</code>.</p><ul><li><p><code>outlier_detection</code> -<br />  (Optional)<br />  Settings controlling eviction of unhealthy hosts from the load balancing pool.<br />  This field is applicable only when the <code>load_balancing_scheme</code> is set<br />  to INTERNAL_MANAGED and the <code>protocol</code> is set to HTTP, HTTPS, or HTTP2.<br />  Structure is <a href=\"#nested_outlier_detection\">documented below</a>.</p></li><li><p><code>port_name</code> -<br />  (Optional)<br />  A named port on a backend instance group representing the port for<br />  communication to the backend VMs in that group. Required when the<br />  loadBalancingScheme is EXTERNAL, EXTERNAL_MANAGED, INTERNAL_MANAGED, or INTERNAL_SELF_MANAGED<br />  and the backends are instance groups. The named port must be defined on each<br />  backend instance group. This parameter has no meaning if the backends are NEGs. API sets a<br />  default of \"http\" if not given.<br />  Must be omitted when the loadBalancingScheme is INTERNAL (Internal TCP/UDP Load Balancing).</p></li><li><p><code>protocol</code> -<br />  (Optional)<br />  The protocol this RegionBackendService uses to communicate with backends.<br />  The default is HTTP. <strong>NOTE</strong>: HTTP2 is only valid for beta HTTP/2 load balancer<br />  types and may result in errors if used with the GA API.<br />  Possible values are: <code>HTTP</code>, <code>HTTPS</code>, <code>HTTP2</code>, <code>SSL</code>, <code>TCP</code>, <code>UDP</code>, <code>GRPC</code>, <code>UNSPECIFIED</code>.</p></li><li><p><code>security_policy</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  The security policy associated with this backend service.</p></li><li><p><code>session_affinity</code> -<br />  (Optional)<br />  Type of session affinity to use. The default is NONE. Session affinity is<br />  not applicable if the protocol is UDP.<br />  Possible values are: <code>NONE</code>, <code>CLIENT_IP</code>, <code>CLIENT_IP_PORT_PROTO</code>, <code>CLIENT_IP_PROTO</code>, <code>GENERATED_COOKIE</code>, <code>HEADER_FIELD</code>, <code>HTTP_COOKIE</code>, <code>CLIENT_IP_NO_DESTINATION</code>.</p></li><li><p><code>connection_tracking_policy</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  Connection Tracking configuration for this BackendService.<br />  This is available only for Layer 4 Internal Load Balancing and<br />  Network Load Balancing.<br />  Structure is <a href=\"#nested_connection_tracking_policy\">documented below</a>.</p></li><li><p><code>timeout_sec</code> -<br />  (Optional)<br />  How many seconds to wait for the backend before considering it a<br />  failed request. Default is 30 seconds. Valid range is [1, 86400].</p></li><li><p><code>log_config</code> -<br />  (Optional)<br />  This field denotes the logging options for the load balancer traffic served by this backend service.<br />  If logging is enabled, logs will be exported to Stackdriver.<br />  Structure is <a href=\"#nested_log_config\">documented below</a>.</p></li><li><p><code>network</code> -<br />  (Optional)<br />  The URL of the network to which this backend service belongs.<br />  This field can only be specified when the load balancing scheme is set to INTERNAL.</p></li><li><p><code>subsetting</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  Subsetting configuration for this BackendService. Currently this is applicable only for Internal TCP/UDP load balancing and Internal HTTP(S) load balancing.<br />  Structure is <a href=\"#nested_subsetting\">documented below</a>.</p></li><li><p><code>region</code> -<br />  (Optional)<br />  The Region in which the created backend service should reside.<br />  If it is not provided, the provider region is used.</p></li><li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.<br />    If it is not provided, the provider project is used.</p></li></ul><p><a name=\"nested_backend\"></a>The <code>backend</code> block supports:</p><ul><li><p><code>balancing_mode</code> -<br />  (Optional)<br />  Specifies the balancing mode for this backend.<br />  See the <a href=\"https://cloud.google.com/load-balancing/docs/backend-service#balancing-mode\">Backend Services Overview</a><br />  for an explanation of load balancing modes.<br />  Default value is <code>CONNECTION</code>.<br />  Possible values are: <code>UTILIZATION</code>, <code>RATE</code>, <code>CONNECTION</code>.</p></li><li><p><code>capacity_scaler</code> -<br />  (Optional)<br />  A multiplier applied to the group's maximum servicing capacity<br />  (based on UTILIZATION, RATE or CONNECTION).<br />  ~&gt;<strong>NOTE</strong>: This field cannot be set for<br />  INTERNAL region backend services (default loadBalancingScheme),<br />  but is required for non-INTERNAL backend service. The total<br />  capacity_scaler for all backends must be non-zero.<br />  A setting of 0 means the group is completely drained, offering<br />  0% of its available Capacity. Valid range is [0.0,1.0].</p></li><li><p><code>description</code> -<br />  (Optional)<br />  An optional description of this resource.<br />  Provide this property when you create the resource.</p></li><li><p><code>failover</code> -<br />  (Optional)<br />  This field designates whether this is a failover backend. More<br />  than one failover backend can be configured for a given RegionBackendService.</p></li><li><p><code>group</code> -<br />  (Required)<br />  The fully-qualified URL of an Instance Group or Network Endpoint<br />  Group resource. In case of instance group this defines the list<br />  of instances that serve traffic. Member virtual machine<br />  instances from each instance group must live in the same zone as<br />  the instance group itself. No two backends in a backend service<br />  are allowed to use same Instance Group resource.<br />  For Network Endpoint Groups this defines list of endpoints. All<br />  endpoints of Network Endpoint Group must be hosted on instances<br />  located in the same zone as the Network Endpoint Group.<br />  Backend services cannot mix Instance Group and<br />  Network Endpoint Group backends.<br />  When the <code>load_balancing_scheme</code> is INTERNAL, only instance groups<br />  are supported.<br />  Note that you must specify an Instance Group or Network Endpoint<br />  Group resource using the fully-qualified URL, rather than a<br />  partial URL.</p></li><li><p><code>max_connections</code> -<br />  (Optional)<br />  The max number of simultaneous connections for the group. Can<br />  be used with either CONNECTION or UTILIZATION balancing modes.<br />  Cannot be set for INTERNAL backend services.<br />  For CONNECTION mode, either maxConnections or one<br />  of maxConnectionsPerInstance or maxConnectionsPerEndpoint,<br />  as appropriate for group type, must be set.</p></li><li><p><code>max_connections_per_instance</code> -<br />  (Optional)<br />  The max number of simultaneous connections that a single<br />  backend instance can handle. Cannot be set for INTERNAL backend<br />  services.<br />  This is used to calculate the capacity of the group.<br />  Can be used in either CONNECTION or UTILIZATION balancing modes.<br />  For CONNECTION mode, either maxConnections or<br />  maxConnectionsPerInstance must be set.</p></li><li><p><code>max_connections_per_endpoint</code> -<br />  (Optional)<br />  The max number of simultaneous connections that a single backend<br />  network endpoint can handle. Cannot be set<br />  for INTERNAL backend services.<br />  This is used to calculate the capacity of the group. Can be<br />  used in either CONNECTION or UTILIZATION balancing modes. For<br />  CONNECTION mode, either maxConnections or<br />  maxConnectionsPerEndpoint must be set.</p></li><li><p><code>max_rate</code> -<br />  (Optional)<br />  The max requests per second (RPS) of the group. Cannot be set<br />  for INTERNAL backend services.<br />  Can be used with either RATE or UTILIZATION balancing modes,<br />  but required if RATE mode. Either maxRate or one<br />  of maxRatePerInstance or maxRatePerEndpoint, as appropriate for<br />  group type, must be set.</p></li><li><p><code>max_rate_per_instance</code> -<br />  (Optional)<br />  The max requests per second (RPS) that a single backend<br />  instance can handle. This is used to calculate the capacity of<br />  the group. Can be used in either balancing mode. For RATE mode,<br />  either maxRate or maxRatePerInstance must be set. Cannot be set<br />  for INTERNAL backend services.</p></li><li><p><code>max_rate_per_endpoint</code> -<br />  (Optional)<br />  The max requests per second (RPS) that a single backend network<br />  endpoint can handle. This is used to calculate the capacity of<br />  the group. Can be used in either balancing mode. For RATE mode,<br />  either maxRate or maxRatePerEndpoint must be set. Cannot be set<br />  for INTERNAL backend services.</p></li><li><p><code>max_utilization</code> -<br />  (Optional)<br />  Used when balancingMode is UTILIZATION. This ratio defines the<br />  CPU utilization target for the group. Valid range is [0.0, 1.0].<br />  Cannot be set for INTERNAL backend services.</p></li></ul><p><a name=\"nested_circuit_breakers\"></a>The <code>circuit_breakers</code> block supports:</p><ul><li><p><code>connect_timeout</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  The timeout for new network connections to hosts.<br />  Structure is <a href=\"#nested_connect_timeout\">documented below</a>.</p></li><li><p><code>max_requests_per_connection</code> -<br />  (Optional)<br />  Maximum requests for a single backend connection. This parameter<br />  is respected by both the HTTP/1.1 and HTTP/2 implementations. If<br />  not specified, there is no limit. Setting this parameter to 1<br />  will effectively disable keep alive.</p></li><li><p><code>max_connections</code> -<br />  (Optional)<br />  The maximum number of connections to the backend cluster.<br />  Defaults to 1024.</p></li><li><p><code>max_pending_requests</code> -<br />  (Optional)<br />  The maximum number of pending requests to the backend cluster.<br />  Defaults to 1024.</p></li><li><p><code>max_requests</code> -<br />  (Optional)<br />  The maximum number of parallel requests to the backend cluster.<br />  Defaults to 1024.</p></li><li><p><code>max_retries</code> -<br />  (Optional)<br />  The maximum number of parallel retries to the backend cluster.<br />  Defaults to 3.</p></li></ul><p><a name=\"nested_connect_timeout\"></a>The <code>connect_timeout</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second.<br />  Must be from 0 to 315,576,000,000 inclusive.</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond<br />  resolution. Durations less than one second are represented<br />  with a 0 seconds field and a positive nanos field. Must<br />  be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_consistent_hash\"></a>The <code>consistent_hash</code> block supports:</p><ul><li><p><code>http_cookie</code> -<br />  (Optional)<br />  Hash is based on HTTP Cookie. This field describes a HTTP cookie<br />  that will be used as the hash key for the consistent hash load<br />  balancer. If the cookie is not present, it will be generated.<br />  This field is applicable if the sessionAffinity is set to HTTP_COOKIE.<br />  Structure is <a href=\"#nested_http_cookie\">documented below</a>.</p></li><li><p><code>http_header_name</code> -<br />  (Optional)<br />  The hash based on the value of the specified header field.<br />  This field is applicable if the sessionAffinity is set to HEADER_FIELD.</p></li><li><p><code>minimum_ring_size</code> -<br />  (Optional)<br />  The minimum number of virtual nodes to use for the hash ring.<br />  Larger ring sizes result in more granular load<br />  distributions. If the number of hosts in the load balancing pool<br />  is larger than the ring size, each host will be assigned a single<br />  virtual node.<br />  Defaults to 1024.</p></li></ul><p><a name=\"nested_http_cookie\"></a>The <code>http_cookie</code> block supports:</p><ul><li><p><code>ttl</code> -<br />  (Optional)<br />  Lifetime of the cookie.<br />  Structure is <a href=\"#nested_ttl\">documented below</a>.</p></li><li><p><code>name</code> -<br />  (Optional)<br />  Name of the cookie.</p></li><li><p><code>path</code> -<br />  (Optional)<br />  Path to set for the cookie.</p></li></ul><p><a name=\"nested_ttl\"></a>The <code>ttl</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second.<br />  Must be from 0 to 315,576,000,000 inclusive.</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond<br />  resolution. Durations less than one second are represented<br />  with a 0 seconds field and a positive nanos field. Must<br />  be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_cdn_policy\"></a>The <code>cdn_policy</code> block supports:</p><ul><li><p><code>cache_key_policy</code> -<br />  (Optional)<br />  The CacheKeyPolicy for this CdnPolicy.<br />  Structure is <a href=\"#nested_cache_key_policy\">documented below</a>.</p></li><li><p><code>signed_url_cache_max_age_sec</code> -<br />  (Optional)<br />  Maximum number of seconds the response to a signed URL request<br />  will be considered fresh, defaults to 1hr (3600s). After this<br />  time period, the response will be revalidated before<br />  being served.<br />  When serving responses to signed URL requests, Cloud CDN will<br />  internally behave as though all responses from this backend had a<br />  \"Cache-Control: public, max-age=[TTL]\" header, regardless of any<br />  existing Cache-Control header. The actual headers served in<br />  responses will not be altered.</p></li><li><p><code>default_ttl</code> -<br />  (Optional)<br />  Specifies the default TTL for cached content served by this origin for responses<br />  that do not have an existing valid TTL (max-age or s-max-age).</p></li><li><p><code>max_ttl</code> -<br />  (Optional)<br />  Specifies the maximum allowed TTL for cached content served by this origin.</p></li><li><p><code>client_ttl</code> -<br />  (Optional)<br />  Specifies the maximum allowed TTL for cached content served by this origin.</p></li><li><p><code>negative_caching</code> -<br />  (Optional)<br />  Negative caching allows per-status code TTLs to be set, in order to apply fine-grained caching for common errors or redirects.</p></li><li><p><code>negative_caching_policy</code> -<br />  (Optional)<br />  Sets a cache TTL for the specified HTTP status code. negativeCaching must be enabled to configure negativeCachingPolicy.<br />  Omitting the policy and leaving negativeCaching enabled will use Cloud CDN's default cache TTLs.<br />  Structure is <a href=\"#nested_negative_caching_policy\">documented below</a>.</p></li><li><p><code>cache_mode</code> -<br />  (Optional)<br />  Specifies the cache setting for all responses from this backend.<br />  The possible values are: USE_ORIGIN_HEADERS, FORCE_CACHE_ALL and CACHE_ALL_STATIC<br />  Possible values are: <code>USE_ORIGIN_HEADERS</code>, <code>FORCE_CACHE_ALL</code>, <code>CACHE_ALL_STATIC</code>.</p></li><li><p><code>serve_while_stale</code> -<br />  (Optional)<br />  Serve existing content from the cache (if available) when revalidating content with the origin, or when an error is encountered when refreshing the cache.</p></li></ul><p><a name=\"nested_cache_key_policy\"></a>The <code>cache_key_policy</code> block supports:</p><ul><li><p><code>include_host</code> -<br />  (Optional)<br />  If true requests to different hosts will be cached separately.</p></li><li><p><code>include_protocol</code> -<br />  (Optional)<br />  If true, http and https requests will be cached separately.</p></li><li><p><code>include_query_string</code> -<br />  (Optional)<br />  If true, include query string parameters in the cache key<br />  according to query_string_whitelist and<br />  query_string_blacklist. If neither is set, the entire query<br />  string will be included.<br />  If false, the query string will be excluded from the cache<br />  key entirely.</p></li><li><p><code>query_string_blacklist</code> -<br />  (Optional)<br />  Names of query string parameters to exclude in cache keys.<br />  All other parameters will be included. Either specify<br />  query_string_whitelist or query_string_blacklist, not both.<br />  '&amp;' and '=' will be percent encoded and not treated as<br />  delimiters.</p></li><li><p><code>query_string_whitelist</code> -<br />  (Optional)<br />  Names of query string parameters to include in cache keys.<br />  All other parameters will be excluded. Either specify<br />  query_string_whitelist or query_string_blacklist, not both.<br />  '&amp;' and '=' will be percent encoded and not treated as<br />  delimiters.</p></li><li><p><code>include_named_cookies</code> -<br />  (Optional)<br />  Names of cookies to include in cache keys.</p></li></ul><p><a name=\"nested_negative_caching_policy\"></a>The <code>negative_caching_policy</code> block supports:</p><ul><li><p><code>code</code> -<br />  (Optional)<br />  The HTTP status code to define a TTL against. Only HTTP status codes 300, 301, 308, 404, 405, 410, 421, 451 and 501<br />  can be specified as values, and you cannot specify a status code more than once.</p></li><li><p><code>ttl</code> -<br />  (Optional, <a href=\"https://terraform.io/docs/providers/google/guides/provider_versions.html\">Beta</a>)<br />  The TTL (in seconds) for which to cache responses with the corresponding status code. The maximum allowed value is 1800s<br />  (30 minutes), noting that infrequently accessed objects may be evicted from the cache before the defined TTL.</p></li></ul><p><a name=\"nested_failover_policy\"></a>The <code>failover_policy</code> block supports:</p><ul><li><p><code>disable_connection_drain_on_failover</code> -<br />  (Optional)<br />  On failover or failback, this field indicates whether connection drain<br />  will be honored. Setting this to true has the following effect: connections<br />  to the old active pool are not drained. Connections to the new active pool<br />  use the timeout of 10 min (currently fixed). Setting to false has the<br />  following effect: both old and new connections will have a drain timeout<br />  of 10 min.<br />  This can be set to true only if the protocol is TCP.<br />  The default is false.</p></li><li><p><code>drop_traffic_if_unhealthy</code> -<br />  (Optional)<br />  This option is used only when no healthy VMs are detected in the primary<br />  and backup instance groups. When set to true, traffic is dropped. When<br />  set to false, new connections are sent across all VMs in the primary group.<br />  The default is false.</p></li><li><p><code>failover_ratio</code> -<br />  (Optional)<br />  The value of the field must be in [0, 1]. If the ratio of the healthy<br />  VMs in the primary backend is at or below this number, traffic arriving<br />  at the load-balanced IP will be directed to the failover backend.<br />  In case where 'failoverRatio' is not set or all the VMs in the backup<br />  backend are unhealthy, the traffic will be directed back to the primary<br />  backend in the \"force\" mode, where traffic will be spread to the healthy<br />  VMs with the best effort, or to all VMs when no VM is healthy.<br />  This field is only used with l4 load balancing.</p></li></ul><p><a name=\"nested_iap\"></a>The <code>iap</code> block supports:</p><ul><li><p><code>oauth2_client_id</code> -<br />  (Required)<br />  OAuth2 Client ID for IAP</p></li><li><p><code>oauth2_client_secret</code> -<br />  (Required)<br />  OAuth2 Client Secret for IAP<br /><strong>Note</strong>: This property is sensitive and will not be displayed in the plan.</p></li><li><p><code>oauth2_client_secret_sha256</code> -<br />  (Output)<br />  OAuth2 Client Secret SHA-256 for IAP<br /><strong>Note</strong>: This property is sensitive and will not be displayed in the plan.</p></li></ul><p><a name=\"nested_outlier_detection\"></a>The <code>outlier_detection</code> block supports:</p><ul><li><p><code>base_ejection_time</code> -<br />  (Optional)<br />  The base time that a host is ejected for. The real time is equal to the base<br />  time multiplied by the number of times the host has been ejected. Defaults to<br />  30000ms or 30s.<br />  Structure is <a href=\"#nested_base_ejection_time\">documented below</a>.</p></li><li><p><code>consecutive_errors</code> -<br />  (Optional)<br />  Number of errors before a host is ejected from the connection pool. When the<br />  backend host is accessed over HTTP, a 5xx return code qualifies as an error.<br />  Defaults to 5.</p></li><li><p><code>consecutive_gateway_failure</code> -<br />  (Optional)<br />  The number of consecutive gateway failures (502, 503, 504 status or connection<br />  errors that are mapped to one of those status codes) before a consecutive<br />  gateway failure ejection occurs. Defaults to 5.</p></li><li><p><code>enforcing_consecutive_errors</code> -<br />  (Optional)<br />  The percentage chance that a host will be actually ejected when an outlier<br />  status is detected through consecutive 5xx. This setting can be used to disable<br />  ejection or to ramp it up slowly. Defaults to 100.</p></li><li><p><code>enforcing_consecutive_gateway_failure</code> -<br />  (Optional)<br />  The percentage chance that a host will be actually ejected when an outlier<br />  status is detected through consecutive gateway failures. This setting can be<br />  used to disable ejection or to ramp it up slowly. Defaults to 0.</p></li><li><p><code>enforcing_success_rate</code> -<br />  (Optional)<br />  The percentage chance that a host will be actually ejected when an outlier<br />  status is detected through success rate statistics. This setting can be used to<br />  disable ejection or to ramp it up slowly. Defaults to 100.</p></li><li><p><code>interval</code> -<br />  (Optional)<br />  Time interval between ejection sweep analysis. This can result in both new<br />  ejections as well as hosts being returned to service. Defaults to 10 seconds.<br />  Structure is <a href=\"#nested_interval\">documented below</a>.</p></li><li><p><code>max_ejection_percent</code> -<br />  (Optional)<br />  Maximum percentage of hosts in the load balancing pool for the backend service<br />  that can be ejected. Defaults to 10%.</p></li><li><p><code>success_rate_minimum_hosts</code> -<br />  (Optional)<br />  The number of hosts in a cluster that must have enough request volume to detect<br />  success rate outliers. If the number of hosts is less than this setting, outlier<br />  detection via success rate statistics is not performed for any host in the<br />  cluster. Defaults to 5.</p></li><li><p><code>success_rate_request_volume</code> -<br />  (Optional)<br />  The minimum number of total requests that must be collected in one interval (as<br />  defined by the interval duration above) to include this host in success rate<br />  based outlier detection. If the volume is lower than this setting, outlier<br />  detection via success rate statistics is not performed for that host. Defaults<br />  to 100.</p></li><li><p><code>success_rate_stdev_factor</code> -<br />  (Optional)<br />  This factor is used to determine the ejection threshold for success rate outlier<br />  ejection. The ejection threshold is the difference between the mean success<br />  rate, and the product of this factor and the standard deviation of the mean<br />  success rate: mean - (stdev * success_rate_stdev_factor). This factor is divided<br />  by a thousand to get a double. That is, if the desired factor is 1.9, the<br />  runtime value should be 1900. Defaults to 1900.</p></li></ul><p><a name=\"nested_base_ejection_time\"></a>The <code>base_ejection_time</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_interval\"></a>The <code>interval</code> block supports:</p><ul><li><p><code>seconds</code> -<br />  (Required)<br />  Span of time at a resolution of a second. Must be from 0 to 315,576,000,000<br />  inclusive.</p></li><li><p><code>nanos</code> -<br />  (Optional)<br />  Span of time that's a fraction of a second at nanosecond resolution. Durations<br />  less than one second are represented with a 0 <code>seconds</code> field and a positive<br /><code>nanos</code> field. Must be from 0 to 999,999,999 inclusive.</p></li></ul><p><a name=\"nested_connection_tracking_policy\"></a>The <code>connection_tracking_policy</code> block supports:</p><ul><li><p><code>idle_timeout_sec</code> -<br />  (Optional)<br />  Specifies how long to keep a Connection Tracking entry while there is<br />  no matching traffic (in seconds).<br />  For L4 ILB the minimum(default) is 10 minutes and maximum is 16 hours.<br />  For NLB the minimum(default) is 60 seconds and the maximum is 16 hours.</p></li><li><p><code>tracking_mode</code> -<br />  (Optional)<br />  Specifies the key used for connection tracking. There are two options:<br /><code>PER_CONNECTION</code>: The Connection Tracking is performed as per the<br />  Connection Key (default Hash Method) for the specific protocol.<br /><code>PER_SESSION</code>: The Connection Tracking is performed as per the<br />  configured Session Affinity. It matches the configured Session Affinity.<br />  Default value is <code>PER_CONNECTION</code>.<br />  Possible values are: <code>PER_CONNECTION</code>, <code>PER_SESSION</code>.</p></li><li><p><code>connection_persistence_on_unhealthy_backends</code> -<br />  (Optional)<br />  Specifies connection persistence when backends are unhealthy.<br />  If set to <code>DEFAULT_FOR_PROTOCOL</code>, the existing connections persist on<br />  unhealthy backends only for connection-oriented protocols (TCP and SCTP)<br />  and only if the Tracking Mode is PER_CONNECTION (default tracking mode)<br />  or the Session Affinity is configured for 5-tuple. They do not persist<br />  for UDP.<br />  If set to <code>NEVER_PERSIST</code>, after a backend becomes unhealthy, the existing<br />  connections on the unhealthy backend are never persisted on the unhealthy<br />  backend. They are always diverted to newly selected healthy backends<br />  (unless all backends are unhealthy).<br />  If set to <code>ALWAYS_PERSIST</code>, existing connections always persist on<br />  unhealthy backends regardless of protocol and session affinity. It is<br />  generally not recommended to use this mode overriding the default.<br />  Default value is <code>DEFAULT_FOR_PROTOCOL</code>.<br />  Possible values are: <code>DEFAULT_FOR_PROTOCOL</code>, <code>NEVER_PERSIST</code>, <code>ALWAYS_PERSIST</code>.</p></li><li><p><code>enable_strong_affinity</code> -<br />  (Optional)<br />  Enable Strong Session Affinity for Network Load Balancing. This option is not available publicly.</p></li></ul><p><a name=\"nested_log_config\"></a>The <code>log_config</code> block supports:</p><ul><li><p><code>enable</code> -<br />  (Optional)<br />  Whether to enable logging for the load balancer traffic served by this backend service.</p></li><li><p><code>sample_rate</code> -<br />  (Optional)<br />  This field can only be specified if logging is enabled for this backend service. The value of<br />  the field must be in [0, 1]. This configures the sampling rate of requests to the load balancer<br />  where 1.0 means all logged requests are reported and 0.0 means no logged requests are reported.<br />  The default value is 1.0.</p></li></ul><p><a name=\"nested_subsetting\"></a>The <code>subsetting</code> block supports:</p><ul><li><code>policy</code> -<br />  (Required)<br />  The algorithm used for subsetting.<br />  Possible values are: <code>CONSISTENT_HASH_SUBSETTING</code>.</li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are exported:</p><ul><li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/regions/{{region}}/backendServices/{{name}}</code></p></li><li><p><code>creation_timestamp</code> -<br />  Creation timestamp in RFC3339 text format.</p></li><li><p><code>fingerprint</code> -<br />  Fingerprint of this resource. A hash of the contents stored in this<br />  object. This field is used in optimistic locking.</p></li><li><code>self_link</code> - The URI of the created resource.</li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a> configuration options:</p><ul><li><code>create</code> - Default is 20 minutes.</li><li><code>update</code> - Default is 20 minutes.</li><li><code>delete</code> - Default is 20 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>RegionBackendService can be imported using any of these accepted formats:</p><p>$ terraform import google_compute_region_backend_service.default projects/{{project}}/regions/{{region}}/backendServices/{{name}}<br />$ terraform import google_compute_region_backend_service.default {{project}}/{{region}}/{{name}}<br />$ terraform import google_compute_region_backend_service.default {{region}}/{{name}}<br />$ terraform import google_compute_region_backend_service.default {{name}}</p>", "user-project-overrides": "<h2 id=\"user-project-overrides\">User Project Overrides</h2><p>This resource supports <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override\">User Project Overrides</a>.</p>", "description": "<h1 id=\"google_compute_region_backend_service\">google_compute_region_backend_service</h1><p>A Region Backend Service defines a regionally-scoped group of virtual<br />machines that will serve traffic for load balancing.</p><p>To get more information about RegionBackendService, see:</p><ul><li><a href=\"https://cloud.google.com/compute/docs/reference/latest/regionBackendServices\">API documentation</a></li><li>How-to Guides<ul><li><a href=\"https://cloud.google.com/compute/docs/load-balancing/internal/\">Internal TCP/UDP Load Balancing</a></li></ul></li></ul><p>~&gt; <strong>Warning:</strong> All arguments including the following potentially sensitive<br />values will be stored in the raw state as plain text: <code>iap.oauth2_client_secret</code>, <code>iap.oauth2_client_secret_sha256</code>.<br /><a href=\"https://www.terraform.io/language/state/sensitive-data\">Read more about sensitive data in state</a>.</p><div class = \"oics-button\" style=\"float: right; margin: 0 0 -15px\">  <a href=\"https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&cloudshell_working_dir=region_backend_service_basic&cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&open_in_editor=main.tf&cloudshell_print=.%2Fmotd&cloudshell_tutorial=.%2Ftutorial.md\" target=\"_blank\">    <img alt=\"Open in Cloud Shell\" src=\"//gstatic.com/cloudssh/images/open-btn.svg\" style=\"max-height: 44px; margin: 32px auto; max-width: 100%;\">  </a></div>"}