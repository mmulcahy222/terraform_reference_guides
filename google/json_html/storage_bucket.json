{"google-storage-bucket": "<h1 id=\"google_storage_bucket\">google_storage_bucket</h1><p>Creates a new bucket in Google cloud storage service (GCS).<br />Once a bucket has been created, its location can't be changed.</p><p>For more information see<br /><a href=\"https://cloud.google.com/storage/docs/overview\">the official documentation</a><br />and<br /><a href=\"https://cloud.google.com/storage/docs/json_api/v1/buckets\">API</a>.</p><p><strong>Note</strong>: If the project id is not set on the resource or in the provider block it will be dynamically<br />determined which will require enabling the compute api.</p>", "example-usage---creating-a-private-bucket-in-standard-storage-in-the-eu-region-bucket-configured-as-static-website-and-cors-configurations": "<h2 id=\"example-usage-creating-a-private-bucket-in-standard-storage-in-the-eu-region-bucket-configured-as-static-website-and-cors-configurations\">Example Usage - creating a private bucket in standard storage, in the EU region. Bucket configured as static website and CORS configurations</h2><p>resource \"google_storage_bucket\" \"static-site\" {<br />  name          = \"image-store.com\"<br />  location      = \"EU\"<br />  force_destroy = true</p><p>uniform_bucket_level_access = true</p><p>website {<br />    main_page_suffix = \"index.html\"<br />    not_found_page   = \"404.html\"<br />  }<br />  cors {<br />    origin          = [\"http://image-store.com\"]<br />    method          = [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\"]<br />    response_header = [\"*\"]<br />    max_age_seconds = 3600<br />  }<br />}</p>", "example-usage---life-cycle-settings-for-storage-bucket-objects": "<h2 id=\"example-usage-life-cycle-settings-for-storage-bucket-objects\">Example Usage - Life cycle settings for storage bucket objects</h2><p>resource \"google_storage_bucket\" \"auto-expire\" {<br />  name          = \"auto-expiring-bucket\"<br />  location      = \"US\"<br />  force_destroy = true</p><p>lifecycle_rule {<br />    condition {<br />      age = 3<br />    }<br />    action {<br />      type = \"Delete\"<br />    }<br />  }</p><p>lifecycle_rule {<br />    condition {<br />      age = 1<br />    }<br />    action {<br />      type = \"AbortIncompleteMultipartUpload\"<br />    }<br />  }<br />}</p>", "example-usage---enabling-public-access-prevention": "<h2 id=\"example-usage-enabling-public-access-prevention\">Example Usage - Enabling public access prevention</h2><p>resource \"google_storage_bucket\" \"auto-expire\" {<br />  name          = \"no-public-access-bucket\"<br />  location      = \"US\"<br />  force_destroy = true</p><p>public_access_prevention = \"enforced\"<br />}</p>", "argument-reference": "<h2 id=\"argument-reference\">Argument Reference</h2><p>The following arguments are supported:</p><ul><li><p><code>name</code> - (Required) The name of the bucket.</p></li><li><p><code>location</code> - (Required) The <a href=\"https://cloud.google.com/storage/docs/bucket-locations\">GCS location</a>.</p></li></ul><hr /><ul><li><p><code>force_destroy</code> - (Optional, Default: false) When deleting a bucket, this<br />    boolean option will delete all contained objects. If you try to delete a<br />    bucket that contains objects, Terraform will fail that run.</p></li><li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs. If it<br />    is not provided, the provider project is used.</p></li><li><p><code>storage_class</code> - (Optional, Default: 'STANDARD') The <a href=\"https://cloud.google.com/storage/docs/storage-classes\">Storage Class</a> of the new bucket. Supported values include: <code>STANDARD</code>, <code>MULTI_REGIONAL</code>, <code>REGIONAL</code>, <code>NEARLINE</code>, <code>COLDLINE</code>, <code>ARCHIVE</code>.</p></li><li><p><code>autoclass</code> - (Optional) The bucket's <a href=\"https://cloud.google.com/storage/docs/autoclass\">Autoclass</a> configuration.  Structure is <a href=\"#nested_autoclass\">documented below</a>.</p></li><li><p><code>lifecycle_rule</code> - (Optional) The bucket's <a href=\"https://cloud.google.com/storage/docs/lifecycle#configuration\">Lifecycle Rules</a> configuration. Multiple blocks of this type are permitted. Structure is <a href=\"#nested_lifecycle_rule\">documented below</a>.</p></li><li><p><code>versioning</code> - (Optional) The bucket's <a href=\"https://cloud.google.com/storage/docs/object-versioning\">Versioning</a> configuration.  Structure is <a href=\"#nested_versioning\">documented below</a>.</p></li><li><p><code>website</code> - (Optional) Configuration if the bucket acts as a website. Structure is <a href=\"#nested_website\">documented below</a>.</p></li><li><p><code>cors</code> - (Optional) The bucket's <a href=\"https://www.w3.org/TR/cors/\">Cross-Origin Resource Sharing (CORS)</a> configuration. Multiple blocks of this type are permitted. Structure is <a href=\"#nested_cors\">documented below</a>.</p></li><li><p><code>default_event_based_hold</code> - (Optional) Whether or not to automatically apply an eventBasedHold to new objects added to the bucket.</p></li><li><p><code>retention_policy</code> - (Optional) Configuration of the bucket's data retention policy for how long objects in the bucket should be retained. Structure is <a href=\"#nested_retention_policy\">documented below</a>.</p></li><li><p><code>labels</code> - (Optional) A map of key/value label pairs to assign to the bucket.</p></li><li><p><code>logging</code> - (Optional) The bucket's <a href=\"https://cloud.google.com/storage/docs/access-logs\">Access &amp; Storage Logs</a> configuration. Structure is <a href=\"#nested_logging\">documented below</a>.</p></li><li><p><code>encryption</code> - (Optional) The bucket's encryption configuration. Structure is <a href=\"#nested_encryption\">documented below</a>.</p></li><li><p><code>requester_pays</code> - (Optional, Default: false) Enables <a href=\"https://cloud.google.com/storage/docs/requester-pays\">Requester Pays</a> on a storage bucket.</p></li><li><p><code>uniform_bucket_level_access</code> - (Optional, Default: false) Enables <a href=\"https://cloud.google.com/storage/docs/uniform-bucket-level-access\">Uniform bucket-level access</a> access to a bucket.</p></li><li><p><code>public_access_prevention</code> - (Optional) Prevents public access to a bucket. Acceptable values are \"inherited\" or \"enforced\". If \"inherited\", the bucket uses <a href=\"https://cloud.google.com/storage/docs/public-access-prevention\">public access prevention</a>. only if the bucket is subject to the public access prevention organization policy constraint. Defaults to \"inherited\".</p></li><li><p><code>custom_placement_config</code> - (Optional) The bucket's custom location configuration, which specifies the individual regions that comprise a dual-region bucket. If the bucket is designated a single or multi-region, the parameters are empty. Structure is <a href=\"#nested_custom_placement_config\">documented below</a>.</p></li></ul><p><a name=\"nested_lifecycle_rule\"></a>The <code>lifecycle_rule</code> block supports:</p><ul><li><p><code>action</code> - (Required) The Lifecycle Rule's action configuration. A single block of this type is supported. Structure is <a href=\"#nested_action\">documented below</a>.</p></li><li><p><code>condition</code> - (Required) The Lifecycle Rule's condition configuration. A single block of this type is supported. Structure is <a href=\"#nested_condition\">documented below</a>.</p></li></ul><p><a name=\"nested_action\"></a>The <code>action</code> block supports:</p><ul><li><p><code>type</code> - The type of the action of this Lifecycle Rule. Supported values include: <code>Delete</code>, <code>SetStorageClass</code> and <code>AbortIncompleteMultipartUpload</code>.</p></li><li><p><code>storage_class</code> - (Required if action type is <code>SetStorageClass</code>) The target <a href=\"https://cloud.google.com/storage/docs/storage-classes\">Storage Class</a> of objects affected by this Lifecycle Rule. Supported values include: <code>STANDARD</code>, <code>MULTI_REGIONAL</code>, <code>REGIONAL</code>, <code>NEARLINE</code>, <code>COLDLINE</code>, <code>ARCHIVE</code>.</p></li></ul><p><a name=\"nested_condition\"></a>The <code>condition</code> block supports the following elements, and requires at least one to be defined. If you specify multiple conditions in a rule, an object has to match all of the conditions for the action to be taken:</p><ul><li><p><code>age</code> - (Optional) Minimum age of an object in days to satisfy this condition.</p></li><li><p><code>created_before</code> - (Optional) A date in the RFC 3339 format YYYY-MM-DD. This condition is satisfied when an object is created before midnight of the specified date in UTC.</p></li><li><p><code>with_state</code> - (Optional) Match to live and/or archived objects. Unversioned buckets have only live objects. Supported values include: <code>\"LIVE\"</code>, <code>\"ARCHIVED\"</code>, <code>\"ANY\"</code>.</p></li><li><p><code>matches_storage_class</code> - (Optional) <a href=\"https://cloud.google.com/storage/docs/storage-classes\">Storage Class</a> of objects to satisfy this condition. Supported values include: <code>STANDARD</code>, <code>MULTI_REGIONAL</code>, <code>REGIONAL</code>, <code>NEARLINE</code>, <code>COLDLINE</code>, <code>ARCHIVE</code>, <code>DURABLE_REDUCED_AVAILABILITY</code>.</p></li><li><p><code>matches_prefix</code> - (Optional) One or more matching name prefixes to satisfy this condition.</p></li><li><p><code>matches_suffix</code> - (Optional) One or more matching name suffixes to satisfy this condition.</p></li><li><p><code>num_newer_versions</code> - (Optional) Relevant only for versioned objects. The number of newer versions of an object to satisfy this condition.</p></li><li><p><code>custom_time_before</code> - (Optional) A date in the RFC 3339 format YYYY-MM-DD. This condition is satisfied when the customTime metadata for the object is set to an earlier date than the date used in this lifecycle condition.</p></li><li><p><code>days_since_custom_time</code> - (Optional) Days since the date set in the <code>customTime</code> metadata for the object. This condition is satisfied when the current date and time is at least the specified number of days after the <code>customTime</code>.</p></li><li><p><code>days_since_noncurrent_time</code> - (Optional) Relevant only for versioned objects. Number of days elapsed since the noncurrent timestamp of an object.</p></li><li><p><code>noncurrent_time_before</code> - (Optional) Relevant only for versioned objects. The date in RFC 3339 (e.g. <code>2017-06-13</code>) when the object became nonconcurrent.</p></li></ul><p><a name=\"nested_autoclass\"></a>The <code>autoclass</code> block supports:</p><ul><li><code>enabled</code> - (Required) While set to <code>true</code>, autoclass automatically transitions objects in your bucket to appropriate storage classes based on each object's access pattern.</li></ul><p><a name=\"nested_versioning\"></a>The <code>versioning</code> block supports:</p><ul><li><code>enabled</code> - (Required) While set to <code>true</code>, versioning is fully enabled for this bucket.</li></ul><p><a name=\"nested_website\"></a>The <code>website</code> block supports the following elements, and requires at least one to be defined:</p><ul><li><p><code>main_page_suffix</code> - (Optional) Behaves as the bucket's directory index where<br />    missing objects are treated as potential directories.</p></li><li><p><code>not_found_page</code> - (Optional) The custom object to return when a requested<br />    resource is not found.</p></li></ul><p><a name=\"nested_cors\"></a>The <code>cors</code> block supports:</p><ul><li><p><code>origin</code> - (Optional) The list of <a href=\"https://tools.ietf.org/html/rfc6454\">Origins</a> eligible to receive CORS response headers. Note: \"*\" is permitted in the list of origins, and means \"any Origin\".</p></li><li><p><code>method</code> - (Optional) The list of HTTP methods on which to include CORS response headers, (GET, OPTIONS, POST, etc) Note: \"*\" is permitted in the list of methods, and means \"any method\".</p></li><li><p><code>response_header</code> - (Optional) The list of HTTP headers other than the <a href=\"https://www.w3.org/TR/cors/#simple-response-header\">simple response headers</a> to give permission for the user-agent to share across domains.</p></li><li><p><code>max_age_seconds</code> - (Optional) The value, in seconds, to return in the <a href=\"https://www.w3.org/TR/cors/#access-control-max-age-response-header\">Access-Control-Max-Age header</a> used in preflight responses.</p></li></ul><p><a name=\"nested_retention_policy\"></a>The <code>retention_policy</code> block supports:</p><ul><li><p><code>is_locked</code> - (Optional) If set to <code>true</code>, the bucket will be <a href=\"https://cloud.google.com/storage/docs/using-bucket-lock#lock-bucket\">locked</a> and permanently restrict edits to the bucket's retention policy.  Caution: Locking a bucket is an irreversible action.</p></li><li><p><code>retention_period</code> - (Required) The period of time, in seconds, that objects in the bucket must be retained and cannot be deleted, overwritten, or archived. The value must be less than 2,147,483,647 seconds.</p></li></ul><p><a name=\"nested_logging\"></a>The <code>logging</code> block supports:</p><ul><li><p><code>log_bucket</code> - (Required) The bucket that will receive log objects.</p></li><li><p><code>log_object_prefix</code> - (Optional, Computed) The object prefix for log objects. If it's not provided,<br />    by default GCS sets this to this bucket's name.</p></li></ul><p><a name=\"nested_encryption\"></a>The <code>encryption</code> block supports:</p><ul><li><code>default_kms_key_name</code>: The <code>id</code> of a Cloud KMS key that will be used to encrypt objects inserted into this bucket, if no encryption method is specified.<br />  You must pay attention to whether the crypto key is available in the location that this bucket is created in.<br />  See <a href=\"https://cloud.google.com/storage/docs/encryption/using-customer-managed-keys\">the docs</a> for more details.</li></ul><p>-&gt; As per <a href=\"https://cloud.google.com/storage/docs/encryption/using-customer-managed-keys\">the docs</a> for customer-managed encryption keys, the IAM policy for the<br />  specified key must permit the <a href=\"https://cloud.google.com/storage/docs/projects#service-accounts\">automatic Google Cloud Storage service account</a> for the bucket's<br />  project to use the specified key for encryption and decryption operations.<br />  Although the service account email address follows a well-known format, the service account is created on-demand and may not necessarily exist for your project<br />  until a relevant action has occurred which triggers its creation.<br />  You should use the <a href=\"/docs/providers/google/d/storage_project_service_account.html\"><code>google_storage_project_service_account</code></a> data source to obtain the email<br />  address for the service account when configuring IAM policy on the Cloud KMS key.<br />  This data source calls an API which creates the account if required, ensuring your Terraform applies cleanly and repeatedly irrespective of the<br />  state of the project.<br />  You should take care for race conditions when the same Terraform manages IAM policy on the Cloud KMS crypto key. See the data source page for more details.</p><p><a name=\"nested_custom_placement_config\"></a>The <code>custom_placement_config</code> block supports:</p><ul><li><code>data_locations</code> - (Required) The list of individual regions that comprise a dual-region bucket. See <a href=\"https://cloud.google.com/storage/docs/dual-regions#availability\">Cloud Storage bucket locations</a> for a list of acceptable regions. <strong>Note</strong>: If any of the data_locations changes, it will <a href=\"https://cloud.google.com/storage/docs/locations#key-concepts\">recreate the bucket</a>.</li></ul>", "attributes-reference": "<h2 id=\"attributes-reference\">Attributes Reference</h2><p>In addition to the arguments listed above, the following computed attributes are<br />exported:</p><ul><li><p><code>self_link</code> - The URI of the created resource.</p></li><li><p><code>url</code> - The base URL of the bucket, in the format <code>gs://&lt;bucket-name&gt;</code>.</p></li></ul>", "timeouts": "<h2 id=\"timeouts\">Timeouts</h2><p>This resource provides the following<br /><a href=\"https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts\">Timeouts</a> configuration options: configuration options:</p><ul><li><code>create</code> - Default is 4 minutes.</li><li><code>update</code> - Default is 4 minutes.</li><li><code>read</code> - Default is 4 minutes.</li></ul>", "import": "<h2 id=\"import\">Import</h2><p>Storage buckets can be imported using the <code>name</code> or  <code>project/name</code>. If the project is not<br />passed to the import command it will be inferred from the provider block or environment variables.<br />If it cannot be inferred it will be queried from the Compute API (this will fail if the API is<br />not enabled).</p><p>e.g.</p><p>$ terraform import google_storage_bucket.image-store image-store-bucket<br />$ terraform import google_storage_bucket.image-store tf-test-project/image-store-bucket</p><p>~&gt; <strong>Note:</strong> Terraform will import this resource with <code>force_destroy</code> set to<br /><code>false</code> in state. If you've set it to <code>true</code> in config, run <code>terraform apply</code> to<br />update the value set in state. If you delete this resource before updating the<br />value, objects in the bucket will not be destroyed.</p>", "description": "<h1 id=\"google_storage_bucket\">google_storage_bucket</h1><p>Creates a new bucket in Google cloud storage service (GCS).<br />Once a bucket has been created, its location can't be changed.</p><p>For more information see<br /><a href=\"https://cloud.google.com/storage/docs/overview\">the official documentation</a><br />and<br /><a href=\"https://cloud.google.com/storage/docs/json_api/v1/buckets\">API</a>.</p><p><strong>Note</strong>: If the project id is not set on the resource or in the provider block it will be dynamically<br />determined which will require enabling the compute api.</p>"}